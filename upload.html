<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload Content | Admin Panel</title>
    
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cpath fill='%23FFD700' d='M50,2 A48,48 0 1,0 50,98 A48,48 0 1,0 50,2 Z' /%3E%3Cg fill='%230A0A0A'%3E%3Cpath d='M28,25 h10 v50 h-10 Z' /%3E%3Cpath d='M45,25 H60 A12.5,12.5 0 0,1 60,50 H45 Z M45,50 H63 A12.5,12.5 0 0,1 63,75 H45 Z' /%3E%3C/g%3E%3C/svg%3E">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-glow: #FFD700; 
            --secondary-glow: #00A2FF; 
            --dark-bg: #0A0A0A;
            --text-primary: #F0F0F0; 
            --text-secondary: #A0A0A0; 
            --card-bg: rgba(22, 22, 22, 0.8);
            --border-color: rgba(255, 215, 0, 0.2); 
            --shadow-color: rgba(0, 0, 0, 0.5);
            --success: #2ecc71; 
            --danger: #e74c3c; 
            --info: #3498db; 
            --warning: #f39c12;
            --cse-color: #3498db;
            --it-color: #9b59b6;
            --ece-color: #e74c3c;
            --eee-color: #f39c12;
            --mech-color: #34495e;
            --aiml-color: #1abc9c;
            --civil-color: #27ae60;
            --bme-color: #e91e63;
            --ft-color: #ff5722;
            --mct-color: #00bcd4;
            --csd-color: #ff9800;
            --ads-color: #795548;
            --efe-color: #607d8b;
            --exe-color: #009688;
        }
        
        * { 
            margin: 0; 
            padding: 0; 
            box-sizing: border-box; 
        }
        
        html { 
            scroll-behavior: smooth; 
        }
        
        body {
            font-family: 'Inter', sans-serif; 
            background-color: var(--dark-bg);
            color: var(--text-primary); 
            line-height: 1.6;
            opacity: 0;
            animation: page-fade-in 0.5s ease-out forwards;
        }
        
        @keyframes page-fade-in { 
            to { opacity: 1; } 
        }
        
        .background-container { 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            z-index: -2; 
        }
        
        .aurora-layer { 
            position: absolute; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            background: radial-gradient(circle at 10% 20%, var(--primary-glow) 0%, transparent 25%), 
                       radial-gradient(circle at 80% 30%, var(--secondary-glow) 0%, transparent 30%), 
                       radial-gradient(circle at 50% 80%, var(--primary-glow) 0%, transparent 25%); 
            animation: aurora-morph 40s linear infinite alternate; 
            filter: blur(120px); 
            opacity: 0.2; 
        }
        
        @keyframes aurora-morph { 
            0% { transform: rotate(0deg) scale(1.2); } 
            100% { transform: rotate(360deg) scale(1.8); } 
        }
        
        .noise-layer { 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            z-index: -1; 
            background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 800"><filter id="noise"><feTurbulence type="fractalNoise" baseFrequency="0.65" numOctaves="3" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(%23noise)"/></svg>'); 
            opacity: 0.015; 
        }
        
        .container { 
            max-width: 800px; 
            margin: 30px auto; 
            padding: 20px; 
        }
        
        .page-header { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            padding: 15px 30px; 
            margin: 20px; 
            background: rgba(16,16,16,0.6); 
            backdrop-filter: blur(20px); 
            border-radius: 15px; 
            border: 1px solid var(--border-color); 
        }
        
        .brand-logo { 
            display: flex; 
            align-items: center; 
            gap: 15px; 
            text-decoration: none; 
        }
        
        .header-logo-svg { 
            width: 45px; 
            height: auto; 
        }
        
        .brand-title { 
            position: relative; 
            font-size: 1.5rem; 
            font-weight: 700; 
            background: linear-gradient(90deg, #ff00ff, #00ffea, #ffdd00, #ff00ff); 
            background-size: 400% 100%; 
            -webkit-background-clip: text; 
            background-clip: text; 
            color: transparent; 
            animation: rgb-text-flow 6s linear infinite; 
        }
        
        @keyframes rgb-text-flow { 
            to { background-position: 400% 0; } 
        }
        
        .btn { 
            padding: 10px 20px; 
            border-radius: 10px; 
            font-size: 0.9rem; 
            font-weight: 500; 
            cursor: pointer; 
            transition: all 0.3s ease; 
            text-decoration: none; 
            display: inline-block; 
            border: none; 
            position: relative; 
            overflow: hidden; 
        }
        
        .btn::before { 
            content: ""; 
            position: absolute; 
            top: 0; 
            left: -100%; 
            width: 100%; 
            height: 100%; 
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent); 
            transition: left 0.5s; 
        }
        
        .btn:hover::before { 
            left: 100%; 
        }
        
        .btn-secondary { 
            background: transparent; 
            border: 1px solid var(--border-color); 
            color: var(--text-secondary); 
        }
        
        .btn-secondary:hover { 
            background: var(--primary-glow); 
            color: var(--dark-bg); 
            border-color: var(--primary-glow); 
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.5); 
        }
        
        .btn-primary { 
            background: var(--primary-glow); 
            color: var(--dark-bg); 
            font-weight: 600; 
            width: 100%; 
        }
        
        .btn-primary:hover { 
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.5); 
            transform: translateY(-2px); 
        }
        
        .btn-primary:disabled { 
            background: var(--text-secondary); 
            cursor: not-allowed; 
            transform: none; 
        }
        
        .btn-primary .spinner { 
            display: none; 
            width: 18px; 
            height: 18px; 
            border: 2px solid var(--dark-bg); 
            border-top-color: transparent; 
            border-radius: 50%; 
            animation: spin 1s linear infinite; 
            margin: 0 auto; 
        }
        
        .btn-primary.loading .spinner { 
            display: block; 
        }
        
        .btn-primary.loading .btn-text { 
            display: none; 
        }
        
        @keyframes spin { 
            to { transform: rotate(360deg); } 
        }
        
        .page-title { 
            text-align: center; 
            font-size: 2.2rem; 
            margin-bottom: 30px; 
            font-weight: 700; 
            color: var(--text-primary); 
            position: relative; 
            display: inline-block; 
            width: 100%; 
        }
        
        .page-title::after { 
            content: ''; 
            position: absolute; 
            bottom: -10px; 
            left: 50%; 
            transform: translateX(-50%); 
            width: 100px; 
            height: 3px; 
            background: linear-gradient(90deg, var(--primary-glow), var(--secondary-glow)); 
            border-radius: 3px; 
        }
        
        .upload-form { 
            background: var(--card-bg); 
            backdrop-filter: blur(10px); 
            border-radius: 15px; 
            padding: 40px; 
            border: 1px solid var(--border-color); 
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3); 
            transition: transform 0.3s ease, box-shadow 0.3s ease; 
        }
        
        .upload-form:hover { 
            transform: translateY(-5px); 
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4); 
        }
        
        .form-group { 
            margin-bottom: 25px; 
            opacity: 0; 
            animation: fadeInUp 0.5s ease forwards; 
        }
        
        .form-group:nth-child(1) { 
            animation-delay: 0.1s; 
        }
        
        .form-group:nth-child(2) { 
            animation-delay: 0.2s; 
        }
        
        .form-group:nth-child(3) { 
            animation-delay: 0.3s; 
        }
        
        .form-group:nth-child(4) { 
            animation-delay: 0.4s; 
        }
        
        .form-group:nth-child(5) { 
            animation-delay: 0.5s; 
        }
        
        .form-group:nth-child(6) { 
            animation-delay: 0.6s; 
        }
        
        @keyframes fadeInUp { 
            from { opacity: 0; transform: translateY(20px); } 
            to { opacity: 1; transform: translateY(0); } 
        }
        
        .form-group label { 
            display: block; 
            margin-bottom: 10px; 
            font-weight: 500; 
            color: var(--text-secondary); 
            transition: color 0.3s ease; 
        }
        
        .form-group:hover label { 
            color: var(--primary-glow); 
        }
        
        .form-group label .fas, .form-group label .fab { 
            margin-right: 10px; 
            color: var(--primary-glow); 
        }
        
        input, select, textarea { 
            width: 100%; 
            padding: 12px; 
            border-radius: 8px; 
            border: 1px solid var(--border-color); 
            background-color: rgba(0,0,0,0.3); 
            color: var(--text-primary); 
            font-family: 'Inter', sans-serif; 
            font-size: 1rem; 
            transition: all 0.3s ease; 
        }
        
        input:focus, select:focus, textarea:focus { 
            outline: none; 
            border-color: var(--primary-glow); 
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.3); 
            transform: translateY(-2px);
        }
        
        .checkbox-group { 
            display: flex; 
            align-items: center; 
            gap: 12px; 
        }
        
        .checkbox-group input { 
            width: auto; 
        }
        
        .message { 
            text-align: center; 
            padding: 15px; 
            border-radius: 8px; 
            margin-top: 20px; 
            display: none; 
            font-weight: 500;
            transform: translateY(10px);
            opacity: 0;
            transition: all 0.3s ease;
        }
        
        .message.show { 
            display: block; 
            transform: translateY(0);
            opacity: 1;
        }
        
        .message.success { 
            background-color: rgba(46, 204, 113, 0.15); 
            border: 1px solid var(--success); 
            color: var(--success); 
        }
        
        .message.error { 
            background-color: rgba(231, 76, 60, 0.15); 
            border: 1px solid var(--danger); 
            color: var(--danger); 
        }
        
        /* --- Content Type Selector --- */
        .content-type-selector {
            background-color: rgba(0,0,0,0.3);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .content-type-selector:hover { 
            border-color: var(--primary-glow); 
        }
        
        #selected-content-type { 
            color: var(--text-secondary); 
        }
        
        #selected-content-type strong { 
            color: var(--text-primary); 
        }
        
        /* --- Course Selector Bar --- */
        .course-selector-bar {
            background-color: rgba(0,0,0,0.3);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }
        
        .course-selector-bar:hover { 
            border-color: var(--primary-glow); 
        }
        
        #selected-course-display { 
            color: var(--text-secondary); 
        }
        
        #selected-course-display strong { 
            color: var(--text-primary); 
        }
        
        #open-filter-modal-btn { 
            width: auto; 
            font-size: 0.9rem; 
            padding: 8px 15px; 
        }
        
        /* --- Thumbnail Preview --- */
        .thumbnail-preview {
            margin-top: 10px;
            border-radius: 8px;
            overflow: hidden;
            display: none;
            max-height: 200px;
            position: relative;
        }
        
        .thumbnail-preview img {
            width: 100%;
            height: auto;
            display: block;
        }
        
        .thumbnail-preview .remove-thumbnail {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .thumbnail-preview .remove-thumbnail:hover {
            background: var(--danger);
            transform: scale(1.1);
        }
        
        /* --- MODAL STYLES --- */
        .modal-overlay { 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            background: rgba(0, 0, 0, 0.8); 
            backdrop-filter: blur(8px); 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            z-index: 1000; 
            opacity: 0; 
            pointer-events: none; 
            transition: opacity 0.3s ease; 
        }
        
        .modal-overlay.active { 
            opacity: 1; 
            pointer-events: auto; 
        }
        
        .modal-content { 
            background: var(--dark-bg); 
            padding: 30px; 
            border-radius: 15px; 
            border: 1px solid var(--border-color); 
            width: 90%; 
            max-width: 900px; 
            max-height: 90vh; 
            display: flex; 
            flex-direction: column; 
            position: relative; 
            transform: scale(0.95); 
            transition: transform 0.3s ease; 
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }
        
        .modal-overlay.active .modal-content { 
            transform: scale(1); 
        }
        
        .modal-close { 
            position: absolute; 
            top: 15px; 
            right: 20px; 
            background: none; 
            border: none; 
            color: var(--text-primary); 
            font-size: 2rem; 
            cursor: pointer; 
            z-index: 10; 
            transition: transform 0.3s ease;
        }
        
        .modal-close:hover {
            transform: rotate(90deg);
            color: var(--danger);
        }
        
        .modal-header { 
            text-align: center; 
            margin-bottom: 20px; 
        }
        
        .modal-description {
            color: var(--text-secondary);
            margin-bottom: 20px;
        }
        
        /* --- Content Type Modal Styles --- */
        .content-type-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .content-type-option {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .content-type-option:hover {
            transform: translateY(-5px);
            border-color: var(--primary-glow);
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.2);
        }
        
        .content-type-option.selected {
            background: rgba(255, 215, 0, 0.1);
            border-color: var(--primary-glow);
        }
        
        .content-type-option i {
            font-size: 2.5rem;
            color: var(--primary-glow);
            margin-bottom: 15px;
        }
        
        .content-type-option h3 {
            font-size: 1.2rem;
            margin-bottom: 10px;
        }
        
        .content-type-option p {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        
        /* --- Exam Type Modal Styles --- */
        .exam-type-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .exam-type-option {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .exam-type-option:hover {
            transform: translateY(-5px);
            border-color: var(--primary-glow);
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.2);
        }
        
        .exam-type-option.selected {
            background: rgba(255, 215, 0, 0.1);
            border-color: var(--primary-glow);
        }
        
        .exam-type-option i {
            font-size: 2.5rem;
            color: var(--primary-glow);
            margin-bottom: 15px;
        }
        
        .exam-type-option h3 {
            font-size: 1.2rem;
            margin-bottom: 10px;
        }
        
        .exam-type-option p {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        
        /* --- RESPONSIVE FILTER MODAL STYLES --- */
        .filter-columns-container { 
            overflow: hidden; 
            width: 100%; 
        }
        
        .filter-columns { 
            display: flex; 
            width: 300%; 
            transition: transform 0.4s ease-in-out; 
        }
        
        .filter-column { 
            width: 100%; 
            padding: 0 10px; 
            display: flex; 
            flex-direction: column; 
        }
        
        .filter-column-header { 
            display: flex; 
            align-items: center; 
            margin-bottom: 15px; 
        }
        
        .filter-column-header h3 { 
            font-size: 1.2rem; 
            color: var(--primary-glow); 
            flex-grow: 1; 
        }
        
        .filter-back-btn { 
            background: none; 
            border: 1px solid var(--border-color); 
            color: var(--text-secondary); 
            padding: 5px 10px; 
            border-radius: 8px; 
            cursor: pointer; 
            margin-right: 10px; 
            transition: all 0.3s ease;
        }
        
        .filter-back-btn:hover {
            background: var(--primary-glow);
            color: var(--dark-bg);
            border-color: var(--primary-glow);
        }
        
        .filter-column-list { 
            height: 50vh; 
            overflow-y: auto; 
            padding-right: 10px; 
        }
        
        .filter-column-list::-webkit-scrollbar { 
            width: 6px; 
        }
        
        .filter-column-list::-webkit-scrollbar-track { 
            background: transparent; 
        }
        
        .filter-column-list::-webkit-scrollbar-thumb { 
            background: var(--border-color); 
            border-radius: 3px; 
        }
        
        .filter-item { 
            padding: 12px 15px; 
            margin-bottom: 8px; 
            border-radius: 8px; 
            cursor: pointer; 
            transition: all 0.2s ease; 
            font-size: 0.95rem; 
        }
        
        .filter-item:hover { 
            background-color: rgba(255, 255, 255, 0.05); 
            transform: translateX(5px);
        }
        
        .filter-item.selected { 
            background-color: var(--primary-glow); 
            color: var(--dark-bg); 
            font-weight: 600; 
        }
        
        .filter-column.disabled { 
            opacity: 0.3; 
            pointer-events: none; 
        }
        
        .filter-columns.show-semesters { 
            transform: translateX(-33.333%); 
        }
        
        .filter-columns.show-courses { 
            transform: translateX(-66.666%); 
        }
        
        /* --- Toast Notification --- */
        .toast-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 2000;
        }
        
        .toast {
            background: var(--card-bg);
            border-radius: 8px;
            padding: 15px 20px;
            margin-bottom: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            transform: translateX(150%);
            opacity: 0;
            transition: all 0.3s ease;
            max-width: 350px;
        }
        
        .toast.show {
            transform: translateX(0);
            opacity: 1;
        }
        
        .toast.success {
            border-left: 4px solid var(--success);
        }
        
        .toast.error {
            border-left: 4px solid var(--danger);
        }
        
        .toast.info {
            border-left: 4px solid var(--info);
        }
        
        .toast i {
            font-size: 1.5rem;
            margin-right: 15px;
        }
        
        .toast.success i {
            color: var(--success);
        }
        
        .toast.error i {
            color: var(--danger);
        }
        
        .toast.info i {
            color: var(--info);
        }
        
        .toast-content {
            flex: 1;
        }
        
        .toast-title {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .toast-message {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }
        
        /* --- Page Transition --- */
        .page-transition {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--dark-bg);
            z-index: 9999;
            transform: translateY(-100%);
            transition: transform 0.5s ease;
        }
        
        .page-transition.active {
            transform: translateY(0);
        }
        
        /* --- Progress Indicator --- */
        .progress-indicator {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }
        
        .progress-step {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 10px;
            position: relative;
            transition: all 0.3s ease;
        }
        
        .progress-step.active {
            background: var(--primary-glow);
            border-color: var(--primary-glow);
            color: var(--dark-bg);
        }
        
        .progress-step.completed {
            background: var(--success);
            border-color: var(--success);
            color: white;
        }
        
        .progress-step::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 100%;
            width: 20px;
            height: 2px;
            background: var(--border-color);
            transform: translateY(-50%);
        }
        
        .progress-step:last-child::after {
            display: none;
        }
        
        .progress-step.completed::after {
            background: var(--success);
        }
        
        /* --- File Upload Area --- */
        .file-upload-area {
            border: 2px dashed var(--border-color);
            border-radius: 10px;
            padding: 30px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            background: rgba(0, 0, 0, 0.2);
        }
        
        .file-upload-area:hover {
            border-color: var(--primary-glow);
            background: rgba(255, 215, 0, 0.05);
        }
        
        .file-upload-area.dragover {
            border-color: var(--primary-glow);
            background: rgba(255, 215, 0, 0.1);
            transform: scale(1.02);
        }
        
        .file-upload-icon {
            font-size: 3rem;
            color: var(--primary-glow);
            margin-bottom: 15px;
        }
        
        .file-upload-text {
            color: var(--text-secondary);
            margin-bottom: 10px;
        }
        
        .file-upload-button {
            background: var(--primary-glow);
            color: var(--dark-bg);
            padding: 8px 20px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .file-upload-button:hover {
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.4);
            transform: translateY(-2px);
        }
        
        /* --- File Preview --- */
        .file-preview {
            margin-top: 20px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            display: none;
        }
        
        .file-preview.show {
            display: block;
        }
        
        .file-preview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .file-preview-name {
            font-weight: 500;
            color: var(--text-primary);
        }
        
        .file-preview-size {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        
        .file-preview-remove {
            background: var(--danger);
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .file-preview-remove:hover {
            transform: scale(1.1);
            box-shadow: 0 0 10px rgba(231, 76, 60, 0.5);
        }
        
        /* --- Upload Progress --- */
        .upload-progress {
            margin-top: 20px;
            display: none;
        }
        
        .upload-progress.show {
            display: block;
        }
        
        .progress-bar {
            width: 100%;
            height: 10px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: 10px;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-glow), var(--secondary-glow));
            border-radius: 5px;
            transition: width 0.3s ease;
            width: 0%;
        }
        
        .progress-text {
            display: flex;
            justify-content: space-between;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        
        /* --- Storage Options --- */
        .storage-options {
            display: flex;
            gap: 15px;
            margin-top: 15px;
        }
        
        .storage-option {
            flex: 1;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .storage-option:hover {
            border-color: var(--primary-glow);
            transform: translateY(-2px);
        }
        
        .storage-option.selected {
            border-color: var(--primary-glow);
            background: rgba(255, 215, 0, 0.1);
        }
        
        .storage-option i {
            font-size: 2rem;
            color: var(--primary-glow);
            margin-bottom: 10px;
        }
        
        .storage-option h4 {
            font-size: 1rem;
            margin-bottom: 5px;
        }
        
        .storage-option p {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }
        
        @media (min-width: 768px) {
            .page-header { flex-direction: row; }
            .upload-form { padding: 40px; }
            .filter-columns-container { overflow: visible; }
            .filter-columns { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; width: 100%; transform: none !important; }
            .filter-column { width: auto; border-right: 1px solid var(--border-color); padding: 0 20px; }
            .filter-column:last-child { border-right: none; }
            .filter-back-btn { display: none; }
        }
        
        /* --- Loading Spinner --- */
        .spinner-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 3000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .spinner-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            border-top-color: var(--primary-glow);
            animation: spin 1s ease-in-out infinite;
        }
        
        /* --- Skeleton Loader --- */
        .skeleton {
            background: linear-gradient(90deg, #eee 25%, #f3f3f3 50%, #eee 75%);
            background-size: 200% 100%;
            animation: skeleton-loading 1.2s infinite linear;
            border-radius: 8px;
            min-height: 24px;
            width: 100%;
        }
        
        @keyframes skeleton-loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
    </style>
</head>
<body>
    <div class="background-container">
        <div class="aurora-layer"></div>
        <div class="noise-layer"></div>
    </div>
    
    <header class="page-header">
        <a href="/admindashboard.html" class="brand-logo">
            <svg class="header-logo-svg" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                <path fill="var(--primary-glow)" d="M50,2 A48,48 0 1,0 50,98 A48,48 0 1,0 50,2 Z" />
                <g fill="var(--dark-bg)">
                    <path d="M28,25 h10 v50 h-10 Z" />
                    <path d="M45,25 H60 A12.5,12.5 0 0,1 60,50 H45 Z M45,50 H63 A12.5,12.5 0 0,1 63,75 H45 Z" />
                </g>
            </svg>
            <h1 class="brand-title">IB STUDIOZ</h1>
        </a>
        <button id="logout-btn" class="btn btn-secondary">
            <i class="fas fa-sign-out-alt"></i> Logout
        </button>
    </header>
    
    <main class="container">
        <h1 class="page-title">Upload New Content</h1>
        
        <form id="upload-form" class="upload-form">
            <!-- Content Type Selection -->
            <div class="form-group">
                <label for="content-type-selector">
                    <i class="fas fa-layer-group"></i> Content Type
                </label>
                <div id="content-type-selector" class="content-type-selector">
                    <div id="selected-content-type">
                        <strong>No content type selected</strong>
                    </div>
                    <button type="button" id="open-content-type-modal-btn" class="btn btn-secondary">
                        <i class="fas fa-chevron-down"></i>
                    </button>
                </div>
            </div>
            
            <!-- Course Selection -->
            <div class="form-group" id="course-group" style="display: none;">
                <label for="course-selector">
                    <i class="fas fa-graduation-cap"></i> Course
                </label>
                <div id="course-selector" class="course-selector-bar">
                    <div id="selected-course-display">
                        <strong>No course selected</strong>
                    </div>
                    <button type="button" id="open-filter-modal-btn" class="btn btn-secondary">
                        <i class="fas fa-filter"></i> Select
                    </button>
                </div>
            </div>
            
            <!-- Title -->
            <div class="form-group">
                <label for="title">
                    <i class="fas fa-heading"></i> Title
                </label>
                <input type="text" id="title" name="title" placeholder="Enter content title" required>
            </div>
            
            <!-- File Upload Area -->
            <div class="form-group">
                <label>
                    <i class="fas fa-cloud-upload-alt"></i> Upload File
                </label>
                <div id="file-upload-area" class="file-upload-area">
                    <i class="fas fa-cloud-upload-alt file-upload-icon"></i>
                    <p class="file-upload-text">Drag and drop your file here or click to browse</p>
                    <button type="button" class="file-upload-button">Choose File</button>
                    <input type="file" id="file-input" style="display: none;">
                </div>
                
                <!-- File Preview -->
                <div id="file-preview" class="file-preview">
                    <div class="file-preview-header">
                        <div>
                            <div class="file-preview-name" id="file-name"></div>
                            <div class="file-preview-size" id="file-size"></div>
                        </div>
                        <button type="button" id="remove-file" class="file-preview-remove">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Upload Progress -->
                <div id="upload-progress" class="upload-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill"></div>
                    </div>
                    <div class="progress-text">
                        <span id="progress-text">0%</span>
                        <span id="progress-status">Uploading...</span>
                    </div>
                </div>
            </div>
            
            <!-- Storage Options -->
            <div class="form-group">
                <label>
                    <i class="fas fa-database"></i> Storage Location
                </label>
                <div class="storage-options">
                    <div class="storage-option selected" data-storage="firebase">
                        <i class="fas fa-fire"></i>
                        <h4>Firebase Storage</h4>
                        <p>Fast and reliable cloud storage</p>
                    </div>
                    <div class="storage-option" data-storage="gdrive">
                        <i class="fab fa-google-drive"></i>
                        <h4>Google Drive</h4>
                        <p>Integrated with Google Workspace</p>
                    </div>
                </div>
            </div>
            
            <!-- Additional Fields (shown based on content type) -->
            <div id="additional-fields"></div>
            
            <!-- Submit Button -->
            <div class="form-group">
                <button type="submit" id="submit-btn" class="btn btn-primary">
                    <span class="btn-text">Upload Content</span>
                    <div class="spinner"></div>
                </button>
            </div>
            
            <!-- Message -->
            <div id="form-message" class="message"></div>
        </form>
        
        <a href="/admindashboard.html" class="btn btn-secondary" style="width: 100%; text-align: center; margin-top: 20px;">
            <i class="fas fa-arrow-left"></i> Back to Dashboard
        </a>
    </main>
    
    <!-- Content Type Selection Modal -->
    <div id="content-type-modal" class="modal-overlay">
        <div class="modal-content">
            <button id="content-type-modal-close-btn" class="modal-close">&times;</button>
            <div class="modal-header">
                <h2>Select Content Type</h2>
                <p class="modal-description">Choose the type of content you want to upload</p>
            </div>
            
            <div class="content-type-grid">
                <div class="content-type-option" data-type="materials">
                    <i class="fas fa-book-open"></i>
                    <h3>Study Material</h3>
                    <p>Notes, textbooks, and other learning resources</p>
                </div>
                <div class="content-type-option" data-type="pyqs">
                    <i class="fas fa-file-alt"></i>
                    <h3>PYQ / Question Bank</h3>
                    <p>Previous year questions and practice papers</p>
                </div>
                <div class="content-type-option" data-type="seminars">
                    <i class="fab fa-youtube"></i>
                    <h3>Seminar</h3>
                    <p>YouTube videos of seminars and talks</p>
                </div>
                <div class="content-type-option" data-type="quizzes">
                    <i class="fas fa-question-circle"></i>
                    <h3>Quiz</h3>
                    <p>Google Form quizzes and assessments</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Exam Type Selection Modal (for PYQs) -->
    <div id="exam-type-modal" class="modal-overlay">
        <div class="modal-content">
            <button id="exam-type-modal-close-btn" class="modal-close">&times;</button>
            <div class="modal-header">
                <h2>Select Exam Type</h2>
                <p class="modal-description">Choose the type of exam for these questions</p>
            </div>
            
            <div class="exam-type-grid">
                <div class="exam-type-option" data-exam="CIE 1">
                    <i class="fas fa-clipboard-list"></i>
                    <h3>CIE 1</h3>
                    <p>Continuous Internal Examination 1</p>
                </div>
                <div class="exam-type-option" data-exam="CIE 2">
                    <i class="fas fa-clipboard-list"></i>
                    <h3>CIE 2</h3>
                    <p>Continuous Internal Examination 2</p>
                </div>
                <div class="exam-type-option" data-exam="CIE 3">
                    <i class="fas fa-clipboard-list"></i>
                    <h3>CIE 3</h3>
                    <p>Continuous Internal Examination 3</p>
                </div>
                <div class="exam-type-option" data-exam="Semester End">
                    <i class="fas fa-graduation-cap"></i>
                    <h3>Semester End Exam</h3>
                    <p>End of semester examination</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- FILTER SELECTION MODAL -->
    <div id="filter-modal" class="modal-overlay">
        <div class="modal-content">
            <button id="filter-modal-close-btn" class="modal-close">&times;</button>
            <div class="modal-header">
                <h2>Select the Course</h2>
                <p class="modal-description">Choose the department, semester, and course for this material.</p>
                
                <div class="progress-indicator">
                    <div class="progress-step active" id="step-dept">1</div>
                    <div class="progress-step" id="step-sem">2</div>
                    <div class="progress-step" id="step-course">3</div>
                </div>
            </div>
            <div class="filter-columns-container">
                <div class="filter-columns">
                    <div id="department-col" class="filter-column">
                        <div class="filter-column-header">
                           <h3><i class="fas fa-university"></i> Department</h3>
                        </div>
                        <div class="filter-column-list"></div>
                    </div>
                    <div id="semester-col" class="filter-column disabled">
                        <div class="filter-column-header">
                           <button type="button" class="filter-back-btn" data-target="department"><i class="fas fa-arrow-left"></i></button>
                           <h3><i class="fas fa-graduation-cap"></i> Semester</h3>
                        </div>
                        <div class="filter-column-list"></div>
                    </div>
                    <div id="course-col" class="filter-column disabled">
                         <div class="filter-column-header">
                           <button type="button" class="filter-back-btn" data-target="semester"><i class="fas fa-arrow-left"></i></button>
                           <h3><i class="fas fa-book"></i> Course</h3>
                        </div>
                        <div class="filter-column-list"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Toast Container -->
    <div class="toast-container" id="toast-container"></div>
    
    <!-- Loading Spinner -->
    <div class="spinner-overlay" id="spinner-overlay">
        <div class="spinner"></div>
    </div>
    
    <!-- Page Transition -->
    <div class="page-transition" id="page-transition"></div>
    
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>
    <script>
        // Academic Data
        const academicData = {
            branches: {
                "CSE": {
                    "name": "Computer Science",
                    "color": "var(--cse-color)",
                    "icon": "fas fa-laptop-code",
                    "semesters": {
                        "1": [
                            {"code": "U23ENG101A", "name": "Communication Skills in English", "credits": 3},
                            {"code": "U23MAT102A", "name": "Linear Algebra and Calculus With MATLAB", "credits": 4},
                            {"code": "U23PHY103B", "name": "Engineering Physics", "credits": 3},
                            {"code": "U23PPR105", "name": "Problem Solving using Python Programming", "credits": 3},
                            {"code": "U23BEE106A", "name": "Basic Electrical and Electronics Engineering", "credits": 3},
                            {"code": "U23TAM101", "name": "Heritage of Tamils", "credits": 1},
                            {"code": "U23PHL110", "name": "Engineering Physics Lab", "credits": 1},
                            {"code": "U23BEEL113", "name": "Basic Electrical and Electronics Engineering Lab", "credits": 1},
                            {"code": "U23PPL112", "name": "Python Programming Lab", "credits": 1}
                        ],
                        "2": [
                            {"code": "U23ENG201A", "name": "Technical English", "credits": 2},
                            {"code": "U23MAT202B", "name": "Discrete Mathematics", "credits": 4},
                            {"code": "U23CHE204B", "name": "Chemistry For Computer Science", "credits": 3},
                            {"code": "U23CPR205B", "name": "Programming In C", "credits": 3},
                            {"code": "U23EGR207", "name": "Engineering Graphics", "credits": 3},
                            {"code": "U23EC203", "name": "Digital Principles And System Design", "credits": 3},
                            {"code": "U23CHL211", "name": "Chemistry Lab", "credits": 1},
                            {"code": "U23CPL212", "name": "C programming Lab", "credits": 1},
                            {"code": "U23TAM201", "name": "Tamils And Technology", "credits": 1}
                        ],
                        "3": [
                            {"code": "U23MAT301D", "name": "Probability and Statistics", "credits": 4},
                            {"code": "U23CS301", "name": "Data Structures", "credits": 3},
                            {"code": "U23CS302", "name": "Computer Architecture", "credits": 3},
                            {"code": "U23CS303", "name": "Object Oriented Programming", "credits": 3},
                            {"code": "U23CS304", "name": "Operating Systems", "credits": 3},
                            {"code": "U23CS305", "name": "Computer Information and Ethics", "credits": 3},
                            {"code": "U23CS306", "name": "Data Structures Lab", "credits": 1},
                            {"code": "U23CS307", "name": "Object Oriented Programming Lab", "credits": 1},
                            {"code": "U23GE301", "name": "Soft Skills and Aptitude-I", "credits": 1},
                            {"code": "Noc24-mg72", "name": "NPTEL:design Thinking-A Primer", "credits": 1}
                        ],
                        "4": [
                            {"code": "U23MAT401B", "name": "Numerical Methods", "credits": 4},
                            {"code": "U23CS401", "name": "Design And Analysis of Algorithms", "credits": 3},
                            {"code": "U23CS402", "name": "Software Engineering", "credits": 3},
                            {"code": "U23CS403", "name": "DataBase Management Systems", "credits": 3},
                            {"code": "U23CS404", "name": "Embedded System Design ", "credits": 3},
                            {"code": "U23CS405", "name": "Software Development Lab", "credits": 1},
                            {"code": "U23CS403", "name": "Database Management Systems Lab", "credits": 1}
                        ],
                        "5": [
                            {"code": "U23CS504", "name": "Machine Learning", "credits": 3},
                            {"code": "U23CS501", "name": "Computer Networks", "credits": 3},
                            {"code": "U23CS502", "name": "Artificial Intelligence", "credits": 3},
                            {"code": "U23CS503", "name": "Theory of Computation", "credits": 3},
                            {"code": "noc25-cs135", "name": "Elective NPTEL", "credits": 3},
                            {"code": " U23CS947 / U23CS903", "name": "Professional Elective ", "credits": 3},
                            {"code": "U23CS505", "name": "Computer Networks Laboratory", "credits": 2},
                            {"code": "U23CS506", "name": "Artificial Intelligence and Machine Learning Laboratory", "credits": 1},
                            {"code": "U23GE501", "name": "Soft Skills and Aptitude-III", "credits": 1}
                        ],
                        "6": [], "7": [], "8": []
                    }
                },
                "IT": {
                    "name": "Info. Technology",
                    "color": "var(--it-color)",
                    "icon": "fas fa-network-wired",
                    "semesters": {
                        "1": [
                            {"code": "U23IT101", "name": "Programming Fundamentals", "credits": 4},
                            {"code": "U23IT102", "name": "Discrete Mathematics", "credits": 4},
                            {"code": "U23IT103", "name": "Digital Systems", "credits": 3},
                            {"code": "U23IT104", "name": "Computer Organization", "credits": 3},
                            {"code": "U23IT105", "name": "Communication Skills", "credits": 2},
                            {"code": "U23IT106", "name": "Programming Lab", "credits": 1},
                            {"code": "U23IT107", "name": "Digital Systems Lab", "credits": 1}
                        ],
                        "2": [
                            {"code": "U23IT201", "name": "Data Structures", "credits": 4},
                            {"code": "U23IT202", "name": "Database Systems", "credits": 4},
                            {"code": "U23IT203", "name": "Operating Systems", "credits": 3},
                            {"code": "U23IT204", "name": "Computer Networks", "credits": 3},
                            {"code": "U23IT205", "name": "Web Technologies", "credits": 3},
                            {"code": "U23IT206", "name": "Data Structures Lab", "credits": 1},
                            {"code": "U23IT207", "name": "Web Technologies Lab", "credits": 1}
                        ],
                        "3": [], "4": [], "5": [], "6": [], "7": [], "8": []
                    }
                },
                "AIML": {
                    "name": "AI & Machine Learning",
                    "color": "var(--aiml-color)",
                    "icon": "fas fa-brain",
                    "semesters": {
                        "1": [
                            {"code": "U23EG107", "name": "Engineering Graphics", "credits": 3},
                            {"code": "U23ENG101A", "name": "Communication Skills in English", "credits": 3},
                            {"code": "U23MAT102A", "name": "Linear Algebra and Calculus with MATLAB", "credits": 4},
                            {"code": "U23PPR105", "name": "Problem Solving using Python Programming", "credits": 3},
                            {"code": "U23PHY103E", "name": "Engineering Physics", "credits": 3},
                            {"code": "U23PHL110", "name": "Engineering Physics Laboratory", "credits": 1},
                            {"code": "U23PPL112", "name": "Python Programming Laboratory", "credits": 1},
                            {"code": "U23TAM101", "name": "Heritage of Tamils", "credits": 1}
                        ],
                        "2": [
                            {"code": "U23ENG201A", "name": "Technical English", "credits": 2},
                            {"code": "U23MAT202D", "name": "Discrete Mathematics", "credits": 4},
                            {"code": "U23BEEE206B", "name": "Basics of Electrical and Electronics Engineering", "credits": 3},
                            {"code": "U23CPR205", "name": "Programming in C", "credits": 3},
                            {"code": "U23CHE204C", "name": "Applied Chemistry", "credits": 2},
                            {"code": "U23EC203", "name": "Digital Principles and System Design", "credits": 3},
                            {"code": "U23CPL212", "name": "C Programming Laboratory", "credits": 1},
                            {"code": "U23CHL211", "name": "Chemistry Laboratory", "credits": 1},
                            {"code": "U23BEEL213B", "name": "BEEE Laboratory", "credits": 1},
                            {"code": "U23TAM201", "name": "Tamils and Technology", "credits": 1}
                        ],
                        "3": [
                            {"code": "U23MAT301E", "name": "Applied Probability and Statistics-I", "credits": 4},
                            {"code": "U23CS301", "name": "Data Structures", "credits": 3},
                            {"code": "U23CS302", "name": "Computer Architecture", "credits": 3},
                            {"code": "U23CS303", "name": "Object Oriented Programming Using Java", "credits": 3},
                            {"code": "U23AML301", "name": "Data Visualization", "credits": 3},
                            {"code": "noc25-mg106", "name": "NPTEL: Design Thinking - A Primer", "credits": 1},
                            {"code": "U23CS306", "name": "Data Structures Laboratory", "credits": 1},
                            {"code": "U23CS307", "name": "Object Oriented Programming Using Java Laboratory", "credits": 1},
                            {"code": "U23AML302", "name": "Data Visualization Laboratory", "credits": 1},
                            {"code": "U23GE301", "name": "Soft Skills and Aptitude-I", "credits": 1}
                        ],
                        "4": [
                            {"code": "U23MAT401A", "name": "Applied Probability and Statistics-II", "credits": 4},
                            {"code": "U23CS403", "name": "Database Management Systems", "credits": 3},
                            {"code": "U23CS401", "name": "Design and Analysis of Algorithms", "credits": 3},
                            {"code": "U23AML401", "name": "Artificial Intelligence", "credits": 3},
                            {"code": "U23CSD402", "name": "Operating Systems", "credits": 3},
                            {"code": "U23AML402", "name": "Artificial Intelligence Lab", "credits": 1},
                            {"code": "U23CS405", "name": "Database Management Systems Lab", "credits": 1},
                            {"code": "U23GE401", "name": "Soft Skills and Aptitude-II", "credits": 1}
                        ],
                        "5": [
                            {"code": "U23CS504", "name": "Machine Learning", "credits": 3},
                            {"code": "U23CS501", "name": "Computer Networks", "credits": 3},
                            {"code": "U23CSD502", "name": "Software Engineering", "credits": 3},
                            {"code": "U23CS503", "name": "Theory of Computation", "credits": 3},
                            {"code": "noc25-cs135", "name": "Elective NPTEL", "credits": 3},
                            {"code": "U19CS903", "name": "Professional Elective - Agile Methodologies", "credits": 3},
                            {"code": "U23AML501", "name": "Machine Learning Laboratory", "credits": 2},
                            {"code": "U23CSD504", "name": "Software Development Laboratory", "credits": 1},
                            {"code": "U23GE501", "name": "Soft Skills and Aptitude-III", "credits": 1}
                        ],
                        "6": [
                            {"code": "U23CS601", "name": "Computer Vision", "credits": 3},
                            {"code": "U23CS602", "name": "Reinforcement Learning", "credits": 3},
                            {"code": "U23CS603", "name": "Robotics", "credits": 3},
                            {"code": "U23CS604", "name": "Cyber Security", "credits": 3},
                            {"code": "U23CS605", "name": "Blockchain Technology", "credits": 3},
                            {"code": "U23CS606", "name": "Elective III", "credits": 3},
                            {"code": "U23CS607", "name": "Project Work II", "credits": 3}
                        ],
                        "7": [
                            {"code": "U23CS701", "name": "Advanced Machine Learning", "credits": 3},
                            {"code": "U23CS702", "name": "AI Ethics and Governance", "credits": 3},
                            {"code": "U23CS703", "name": "Elective IV", "credits": 3},
                            {"code": "U23CS704", "name": "Project Work III", "credits": 3}
                        ],
                        "8": [
                            {"code": "U23CS801", "name": "Industry Internship", "credits": 6},
                            {"code": "U23CS802", "name": "Project Work IV", "credits": 6}
                        ]
                    }
                }
            }
        };
        
        document.addEventListener('DOMContentLoaded', () => {
            // Firebase setup
            const firebaseConfig = { 
                apiKey: "AIzaSyDCmvA9sFCSc5r4ZuFUJuGdO1LDoW7rKao", 
                authDomain: "student-portal-free.firebaseapp.com", 
                projectId: "student-portal-free", 
                storageBucket: "student-portal-free.appspot.com", 
                messagingSenderId: "272865877510", 
                appId: "1:272865877510:web:0875a2502ae55bbf9ead87" 
            };
            firebase.initializeApp(firebaseConfig);
            const auth = firebase.auth();
            const db = firebase.firestore();
            const storage = firebase.storage();
            
            // DOM Elements
            const uploadForm = document.getElementById('upload-form');
            const contentTypeSelector = document.getElementById('content-type-selector');
            const selectedContentType = document.getElementById('selected-content-type');
            const openContentTypeModalBtn = document.getElementById('open-content-type-modal-btn');
            const courseGroup = document.getElementById('course-group');
            const courseSelector = document.getElementById('course-selector');
            const selectedCourseDisplay = document.getElementById('selected-course-display');
            const openFilterBtn = document.getElementById('open-filter-modal-btn');
            const titleInput = document.getElementById('title');
            const fileUploadArea = document.getElementById('file-upload-area');
            const fileInput = document.getElementById('file-input');
            const filePreview = document.getElementById('file-preview');
            const fileName = document.getElementById('file-name');
            const fileSize = document.getElementById('file-size');
            const removeFileBtn = document.getElementById('remove-file');
            const uploadProgress = document.getElementById('upload-progress');
            const progressFill = document.getElementById('progress-fill');
            const progressText = document.getElementById('progress-text');
            const progressStatus = document.getElementById('progress-status');
            const storageOptions = document.querySelectorAll('.storage-option');
            const additionalFields = document.getElementById('additional-fields');
            const submitBtn = document.getElementById('submit-btn');
            const formMessage = document.getElementById('form-message');
            const logoutBtn = document.getElementById('logout-btn');
            const spinnerOverlay = document.getElementById('spinner-overlay');
            const pageTransition = document.getElementById('page-transition');
            const toastContainer = document.getElementById('toast-container');
            
            // Modal elements
            const contentTypeModal = document.getElementById('content-type-modal');
            const contentTypeModalCloseBtn = document.getElementById('content-type-modal-close-btn');
            const examTypeModal = document.getElementById('exam-type-modal');
            const examTypeModalCloseBtn = document.getElementById('exam-type-modal-close-btn');
            const filterModal = document.getElementById('filter-modal');
            const filterModalCloseBtn = document.getElementById('filter-modal-close-btn');
            const filterColumns = document.querySelector('.filter-columns');
            const deptCol = document.getElementById('department-col');
            const semCol = document.getElementById('semester-col');
            const courseCol = document.getElementById('course-col');
            
            // Progress steps
            const stepDept = document.getElementById('step-dept');
            const stepSem = document.getElementById('step-sem');
            const stepCourse = document.getElementById('step-course');
            
            // State management
            let selectedContentTypeValue = null;
            let selectedExamType = null;
            let selectedDept = { code: null, name: null };
            let selectedSem = { code: null, name: null };
            let selectedCourse = { code: null, name: null };
            let selectedFile = null;
            let selectedStorage = 'firebase';
            
            // Initialize the page
            function initializePage() {
                setupEventListeners();
                checkAuthentication();
            }
            
            // Setup event listeners
            function setupEventListeners() {
                // Content type selector
                contentTypeSelector.addEventListener('click', openContentTypeModal);
                openContentTypeModalBtn.addEventListener('click', openContentTypeModal);
                contentTypeModalCloseBtn.addEventListener('click', closeContentTypeModal);
                contentTypeModal.addEventListener('click', e => {
                    if (e.target === contentTypeModal) closeContentTypeModal();
                });
                
                // Content type options
                document.querySelectorAll('.content-type-option').forEach(option => {
                    option.addEventListener('click', handleContentTypeSelection);
                });
                
                // Exam type modal
                examTypeModalCloseBtn.addEventListener('click', closeExamTypeModal);
                examTypeModal.addEventListener('click', e => {
                    if (e.target === examTypeModal) closeExamTypeModal();
                });
                
                // Exam type options
                document.querySelectorAll('.exam-type-option').forEach(option => {
                    option.addEventListener('click', handleExamTypeSelection);
                });
                
                // Course selector modal
                openFilterBtn.addEventListener('click', openCourseSelector);
                filterModalCloseBtn.addEventListener('click', closeCourseSelector);
                filterModal.addEventListener('click', e => {
                    if (e.target === filterModal) closeCourseSelector();
                });
                
                // Course selection
                deptCol.addEventListener('click', handleDeptSelection);
                semCol.addEventListener('click', handleSemSelection);
                courseCol.addEventListener('click', handleCourseSelection);
                
                document.querySelectorAll('.filter-back-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        if (btn.dataset.target === 'department') {
                            filterColumns.classList.remove('show-semesters', 'show-courses');
                            updateProgressStep('dept');
                        } else if (btn.dataset.target === 'semester') {
                            filterColumns.classList.remove('show-courses');
                            updateProgressStep('sem');
                        }
                    });
                });
                
                // File upload
                fileUploadArea.addEventListener('click', () => fileInput.click());
                fileUploadArea.addEventListener('dragover', handleDragOver);
                fileUploadArea.addEventListener('dragleave', handleDragLeave);
                fileUploadArea.addEventListener('drop', handleDrop);
                fileInput.addEventListener('change', handleFileSelect);
                removeFileBtn.addEventListener('click', removeFile);
                
                // Storage options
                storageOptions.forEach(option => {
                    option.addEventListener('click', () => {
                        storageOptions.forEach(opt => opt.classList.remove('selected'));
                        option.classList.add('selected');
                        selectedStorage = option.dataset.storage;
                    });
                });
                
                // Form submission
                uploadForm.addEventListener('submit', handleFormSubmit);
                logoutBtn.addEventListener('click', handleLogout);
            }
            
            // Check authentication
            function checkAuthentication() {
                auth.onAuthStateChanged(user => {
                    if (!user) {
                        pageTransition.classList.add('active');
                        setTimeout(() => {
                            window.location.replace('/index.html');
                        }, 500);
                        return;
                    }
                    
                    db.collection('users').doc(user.uid).get().then(doc => {
                        if (!doc.exists || doc.data().role !== 'admin') {
                            pageTransition.classList.add('active');
                            setTimeout(() => {
                                window.location.replace('/studentdashboard.html');
                            }, 500);
                        }
                    }).catch(err => {
                        console.error('Error checking user role:', err);
                        showToast('Authentication error. Please try again.', 'error');
                        auth.signOut();
                    });
                });
            }
            
            // Open content type modal
            function openContentTypeModal() {
                contentTypeModal.classList.add('active');
            }
            
            // Close content type modal
            function closeContentTypeModal() {
                contentTypeModal.classList.remove('active');
            }
            
            // Handle content type selection
            function handleContentTypeSelection(e) {
                const option = e.currentTarget;
                const type = option.dataset.type;
                
                // Update UI
                document.querySelectorAll('.content-type-option').forEach(opt => {
                    opt.classList.remove('selected');
                });
                option.classList.add('selected');
                
                // Update state
                selectedContentTypeValue = type;
                
                // Update display
                const typeNames = {
                    'materials': 'Study Material',
                    'pyqs': 'PYQ / Question Bank',
                    'seminars': 'Seminar (YouTube)',
                    'quizzes': 'Quiz (Google Form)'
                };
                selectedContentType.innerHTML = `<strong>${typeNames[type]}</strong>`;
                
                // Close modal
                closeContentTypeModal();
                
                // Show/hide course selection based on content type
                if (type === 'materials' || type === 'pyqs') {
                    courseGroup.style.display = 'block';
                } else {
                    courseGroup.style.display = 'none';
                }
                
                // Handle additional fields based on content type
                updateAdditionalFields();
                
                // If PYQs, open exam type modal
                if (type === 'pyqs') {
                    setTimeout(() => {
                        examTypeModal.classList.add('active');
                    }, 300);
                }
            }
            
            // Update additional fields based on content type
            function updateAdditionalFields() {
                let fieldsHTML = '';
                
                switch (selectedContentTypeValue) {
                    case 'materials':
                        fieldsHTML = `
                            <div class="form-group">
                                <label for="description">
                                    <i class="fas fa-align-left"></i> Description
                                </label>
                                <textarea id="description" name="description" rows="3" placeholder="Enter a brief description of the material"></textarea>
                            </div>
                            <div class="form-group">
                                <label for="thumbnailURL">
                                    <i class="fas fa-image"></i> Thumbnail URL
                                </label>
                                <input type="url" id="thumbnailURL" name="thumbnailURL" placeholder="https://example.com/image.jpg">
                                <div id="thumbnail-preview" class="thumbnail-preview">
                                    <img id="thumbnail-img" src="" alt="Thumbnail preview">
                                    <button type="button" id="remove-thumbnail" class="remove-thumbnail">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="checkbox-group">
                                    <input type="checkbox" id="isPaid" name="isPaid">
                                    <label for="isPaid">Premium Content</label>
                                </div>
                            </div>
                        `;
                        break;
                    case 'pyqs':
                        fieldsHTML = `
                            <div class="form-group">
                                <label for="year">
                                    <i class="fas fa-calendar-alt"></i> Year
                                </label>
                                <input type="number" id="year" name="year" min="2020" max="2030" placeholder="2024">
                            </div>
                        `;
                        break;
                    case 'seminars':
                        fieldsHTML = `
                            <div class="form-group">
                                <label for="speaker">
                                    <i class="fas fa-user-tie"></i> Speaker Name
                                </label>
                                <input type="text" id="speaker" name="speaker" placeholder="Enter speaker name">
                            </div>
                            <div class="form-group">
                                <label for="youtubeURL">
                                    <i class="fab fa-youtube"></i> YouTube URL
                                </label>
                                <input type="url" id="youtubeURL" name="youtubeURL" placeholder="https://youtube.com/watch?v=...">
                            </div>
                        `;
                        break;
                    case 'quizzes':
                        fieldsHTML = `
                            <div class="form-group">
                                <label for="topic">
                                    <i class="fas fa-tag"></i> Quiz Topic
                                </label>
                                <input type="text" id="topic" name="topic" placeholder="Enter quiz topic">
                            </div>
                            <div class="form-group">
                                <label for="googleFormURL">
                                    <i class="fab fa-google"></i> Google Form URL
                                </label>
                                <input type="url" id="googleFormURL" name="googleFormURL" placeholder="https://forms.gle/...">
                            </div>
                        `;
                        break;
                }
                
                additionalFields.innerHTML = fieldsHTML;
                
                // Add event listeners for thumbnail preview if materials
                if (selectedContentTypeValue === 'materials') {
                    const thumbnailURL = document.getElementById('thumbnailURL');
                    const thumbnailPreview = document.getElementById('thumbnail-preview');
                    const thumbnailImg = document.getElementById('thumbnail-img');
                    const removeThumbnail = document.getElementById('remove-thumbnail');
                    
                    thumbnailURL.addEventListener('input', () => {
                        const url = thumbnailURL.value.trim();
                        if (url) {
                            thumbnailImg.src = url;
                            thumbnailImg.onload = function() {
                                thumbnailPreview.style.display = 'block';
                            };
                            thumbnailImg.onerror = function() {
                                thumbnailPreview.style.display = 'none';
                                showToast('Invalid image URL', 'error');
                            };
                        } else {
                            thumbnailPreview.style.display = 'none';
                        }
                    });
                    
                    removeThumbnail.addEventListener('click', () => {
                        thumbnailURL.value = '';
                        thumbnailPreview.style.display = 'none';
                    });
                }
            }
            
            // Open exam type modal
            function openExamTypeModal() {
                examTypeModal.classList.add('active');
            }
            
            // Close exam type modal
            function closeExamTypeModal() {
                examTypeModal.classList.remove('active');
            }
            
            // Handle exam type selection
            function handleExamTypeSelection(e) {
                const option = e.currentTarget;
                const examType = option.dataset.exam;
                
                // Update UI
                document.querySelectorAll('.exam-type-option').forEach(opt => {
                    opt.classList.remove('selected');
                });
                option.classList.add('selected');
                
                // Update state
                selectedExamType = examType;
                
                // Close modal
                closeExamTypeModal();
            }
            
            // Open course selector modal
            function openCourseSelector() {
                // Reset state
                selectedDept = { code: null, name: null };
                selectedSem = { code: null, name: null };
                selectedCourse = { code: null, name: null };
                
                // Reset UI
                filterColumns.classList.remove('show-semesters', 'show-courses');
                semCol.classList.add('disabled');
                courseCol.classList.add('disabled');
                semCol.querySelector('.filter-column-list').innerHTML = '';
                courseCol.querySelector('.filter-column-list').innerHTML = '';
                updateProgressStep('dept');
                
                // Populate departments
                populateDepartments();
                
                // Open modal
                filterModal.classList.add('active');
            }
            
            // Close course selector modal
            function closeCourseSelector() {
                filterModal.classList.remove('active');
            }
            
            // Update progress step
            function updateProgressStep(step) {
                // Reset all steps
                stepDept.classList.remove('active', 'completed');
                stepSem.classList.remove('active', 'completed');
                stepCourse.classList.remove('active', 'completed');
                
                // Set steps based on current step
                if (step === 'dept') {
                    stepDept.classList.add('active');
                } else if (step === 'sem') {
                    stepDept.classList.add('completed');
                    stepSem.classList.add('active');
                } else if (step === 'course') {
                    stepDept.classList.add('completed');
                    stepSem.classList.add('completed');
                    stepCourse.classList.add('active');
                }
            }
            
            // Populate departments
            function populateDepartments() {
                const deptList = deptCol.querySelector('.filter-column-list');
                deptList.innerHTML = '';
                
                Object.keys(academicData.branches).forEach(branchCode => {
                    const branch = academicData.branches[branchCode];
                    const item = document.createElement('div');
                    item.className = 'filter-item';
                    item.innerHTML = `<i class="${branch.icon}"></i> ${branch.name}`;
                    item.dataset.code = branchCode;
                    item.dataset.name = branch.name;
                    deptList.appendChild(item);
                });
            }
            
            // Populate semesters
            function populateSemesters() {
                const semList = semCol.querySelector('.filter-column-list');
                semList.innerHTML = '';
                
                const branchData = academicData.branches[selectedDept.code];
                Object.keys(branchData.semesters).forEach(sem => {
                    const item = document.createElement('div');
                    item.className = 'filter-item';
                    item.textContent = `Semester ${sem}`;
                    item.dataset.code = sem;
                    semList.appendChild(item);
                });
                
                semCol.classList.remove('disabled');
            }
            
            // Populate courses
            function populateCourses() {
                const courseList = courseCol.querySelector('.filter-column-list');
                courseList.innerHTML = '';
                
                const subjects = academicData.branches[selectedDept.code].semesters[selectedSem.code];
                if (subjects && subjects.length > 0) {
                    subjects.forEach(subject => {
                        const item = document.createElement('div');
                        item.className = 'filter-item';
                        item.textContent = `${subject.code} - ${subject.name}`;
                        item.dataset.code = subject.code;
                        item.dataset.name = subject.name;
                        courseList.appendChild(item);
                    });
                } else {
                    courseList.innerHTML = '<p style="padding: 12px 15px;">No courses found.</p>';
                }
                
                courseCol.classList.remove('disabled');
            }
            
            // Handle department selection
            function handleDeptSelection(e) {
                if (!e.target.classList.contains('filter-item')) return;
                
                selectedDept = { 
                    code: e.target.dataset.code, 
                    name: e.target.dataset.name 
                };
                
                updateSelectedUI(deptCol, e.target);
                updateProgressStep('sem');
                
                semCol.querySelector('.filter-column-list').innerHTML = '';
                courseCol.querySelector('.filter-column-list').innerHTML = '';
                semCol.classList.remove('disabled'); 
                courseCol.classList.add('disabled');
                
                populateSemesters();
                filterColumns.classList.add('show-semesters');
            }
            
            // Handle semester selection
            function handleSemSelection(e) {
                if (!e.target.classList.contains('filter-item')) return;
                
                selectedSem = { 
                    code: e.target.dataset.code, 
                    name: e.target.textContent 
                };
                
                updateSelectedUI(semCol, e.target);
                updateProgressStep('course');
                
                courseCol.querySelector('.filter-column-list').innerHTML = '';
                courseCol.classList.add('disabled');
                
                populateCourses();
                filterColumns.classList.add('show-courses');
            }
            
            // Handle course selection
            function handleCourseSelection(e) {
                if (!e.target.classList.contains('filter-item')) return;
                
                selectedCourse = { 
                    code: e.target.dataset.code, 
                    name: e.target.dataset.name 
                };
                
                updateSelectedUI(courseCol, e.target);
                
                // Close modal
                closeCourseSelector();
                
                // Update display
                if (selectedContentTypeValue === 'pyqs' && selectedExamType) {
                    selectedCourseDisplay.innerHTML = `<strong>${selectedCourse.code}</strong> - ${selectedCourse.name} (${selectedExamType})`;
                } else {
                    selectedCourseDisplay.innerHTML = `<strong>${selectedCourse.code}</strong> - ${selectedCourse.name}`;
                }
            }
            
            // Update selected UI
            function updateSelectedUI(column, selectedElement) {
                [...column.querySelectorAll('.filter-item')].forEach(item => {
                    item.classList.remove('selected');
                });
                selectedElement.classList.add('selected');
            }
            
            // Handle file drag over
            function handleDragOver(e) {
                e.preventDefault();
                fileUploadArea.classList.add('dragover');
            }
            
            // Handle file drag leave
            function handleDragLeave(e) {
                e.preventDefault();
                fileUploadArea.classList.remove('dragover');
            }
            
            // Handle file drop
            function handleDrop(e) {
                e.preventDefault();
                fileUploadArea.classList.remove('dragover');
                
                const files = e.dataTransfer.files;
                if (files.length > 0) {
                    handleFile(files[0]);
                }
            }
            
            // Handle file select
            function handleFileSelect(e) {
                const files = e.target.files;
                if (files.length > 0) {
                    handleFile(files[0]);
                }
            }
            
            // Handle file
            function handleFile(file) {
                selectedFile = file;
                
                // Update file preview
                fileName.textContent = file.name;
                fileSize.textContent = formatFileSize(file.size);
                filePreview.classList.add('show');
                
                // Reset file input
                fileInput.value = '';
            }
            
            // Format file size
            function formatFileSize(bytes) {
                if (bytes === 0) return '0 Bytes';
                const k = 1024;
                const sizes = ['Bytes', 'KB', 'MB', 'GB'];
                const i = Math.floor(Math.log(bytes) / Math.log(k));
                return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
            }
            
            // Remove file
            function removeFile() {
                selectedFile = null;
                filePreview.classList.remove('show');
                fileInput.value = '';
            }
            
            // Handle form submission
            async function handleFormSubmit(e) {
                e.preventDefault();
                
                // Validate form
                if (!validateForm()) {
                    return;
                }
                
                // Show loading state
                submitBtn.disabled = true;
                submitBtn.classList.add('loading');
                formMessage.classList.remove('show');
                
                try {
                    let downloadURL = '';
                    
                    // Handle file upload based on storage option
                    if (selectedFile) {
                        if (selectedStorage === 'firebase') {
                            // Upload to Firebase Storage
                            const storageRef = storage.ref(`${selectedContentTypeValue}/${selectedFile.name}`);
                            const uploadTask = storageRef.put(selectedFile);
                            
                            // Show progress
                            uploadProgress.classList.add('show');
                            
                            // Monitor upload progress
                            uploadTask.on('state_changed', 
                                (snapshot) => {
                                    const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
                                    progressFill.style.width = `${progress}%`;
                                    progressText.textContent = `${Math.round(progress)}%`;
                                    
                                    if (snapshot.state === 'running') {
                                        progressStatus.textContent = 'Uploading...';
                                    }
                                }, 
                                (error) => {
                                    console.error('Upload error:', error);
                                    showToast('Upload failed. Please try again.', 'error');
                                    resetFormState();
                                }, 
                                async () => {
                                    // Upload completed successfully
                                    downloadURL = await uploadTask.snapshot.ref.getDownloadURL();
                                    progressStatus.textContent = 'Upload complete!';
                                    await saveToDatabase(downloadURL);
                                }
                            );
                        } else if (selectedStorage === 'gdrive') {
                            // For Google Drive, we'll simulate the upload
                            // In a real implementation, you would use Google Drive API
                            showToast('Google Drive integration coming soon!', 'info');
                            resetFormState();
                            return;
                        }
                    } else {
                        // No file to upload, just save metadata
                        await saveToDatabase('');
                    }
                } catch (error) {
                    console.error('Error:', error);
                    showToast('An error occurred. Please try again.', 'error');
                    resetFormState();
                }
            }
            
            // Save to database
            async function saveToDatabase(downloadURL) {
                const collectionName = selectedContentTypeValue;
                const data = {
                    title: titleInput.value.trim(),
                    uploadedAt: firebase.firestore.FieldValue.serverTimestamp(),
                    uploadedBy: auth.currentUser.email,
                    storageLocation: selectedStorage
                };
                
                // Prepare data based on content type
                switch(collectionName) {
                    case 'materials':
                        data.department = selectedDept.code;
                        data.semester = selectedSem.code;
                        data.courseCode = selectedCourse.code;
                        data.downloadURL = downloadURL;
                        data.isPaid = document.getElementById('isPaid')?.checked || false;
                        data.thumbnailURL = document.getElementById('thumbnailURL')?.value.trim() || '';
                        data.description = document.getElementById('description')?.value.trim() || '';
                        break;
                    case 'pyqs':
                        data.department = selectedDept.code;
                        data.semester = selectedSem.code;
                        data.courseCode = selectedCourse.code;
                        data.examType = selectedExamType;
                        data.downloadURL = downloadURL;
                        data.year = Number(document.getElementById('year')?.value) || null;
                        break;
                    case 'seminars':
                        data.speaker = document.getElementById('speaker')?.value.trim() || '';
                        data.youtubeURL = document.getElementById('youtubeURL')?.value.trim() || '';
                        break;
                    case 'quizzes':
                        data.topic = document.getElementById('topic')?.value.trim() || '';
                        data.googleFormURL = document.getElementById('googleFormURL')?.value.trim() || '';
                        break;
                }
                
                // Add to Firestore
                await db.collection(collectionName).add(data);
                
                // Show success message
                showToast('Content uploaded successfully!', 'success');
                formMessage.textContent = 'Content uploaded successfully!';
                formMessage.className = 'message success show';
                
                // Reset form
                resetForm();
                resetFormState();
            }
            
            // Validate form
            function validateForm() {
                if (!selectedContentTypeValue) {
                    showToast('Please select a content type', 'error');
                    return false;
                }
                
                const title = titleInput.value.trim();
                if (!title) {
                    showToast('Please enter a title', 'error');
                    return false;
                }
                
                // Validate based on content type
                switch (selectedContentTypeValue) {
                    case 'materials':
                    case 'pyqs':
                        if (!selectedDept.code || !selectedSem.code || !selectedCourse.code) {
                            showToast('Please select a course', 'error');
                            return false;
                        }
                        
                        if (!selectedFile) {
                            showToast('Please select a file to upload', 'error');
                            return false;
                        }
                        
                        if (selectedContentTypeValue === 'pyqs' && !selectedExamType) {
                            showToast('Please select an exam type', 'error');
                            return false;
                        }
                        break;
                    
                    case 'seminars':
                        const speaker = document.getElementById('speaker')?.value.trim();
                        const youtubeURL = document.getElementById('youtubeURL')?.value.trim();
                        
                        if (!speaker) {
                            showToast('Please enter a speaker name', 'error');
                            return false;
                        }
                        
                        if (!youtubeURL) {
                            showToast('Please enter a YouTube URL', 'error');
                            return false;
                        }
                        break;
                    
                    case 'quizzes':
                        const topic = document.getElementById('topic')?.value.trim();
                        const googleFormURL = document.getElementById('googleFormURL')?.value.trim();
                        
                        if (!topic) {
                            showToast('Please enter a quiz topic', 'error');
                            return false;
                        }
                        
                        if (!googleFormURL) {
                            showToast('Please enter a Google Form URL', 'error');
                            return false;
                        }
                        break;
                }
                
                return true;
            }
            
            // Reset form
            function resetForm() {
                uploadForm.reset();
                selectedContentTypeValue = null;
                selectedExamType = null;
                selectedDept = { code: null, name: null };
                selectedSem = { code: null, name: null };
                selectedCourse = { code: null, name: null };
                selectedFile = null;
                selectedStorage = 'firebase';
                
                // Reset UI
                selectedContentType.innerHTML = '<strong>No content type selected</strong>';
                selectedCourseDisplay.innerHTML = '<strong>No course selected</strong>';
                courseGroup.style.display = 'none';
                filePreview.classList.remove('show');
                uploadProgress.classList.remove('show');
                additionalFields.innerHTML = '';
                
                // Reset content type options
                document.querySelectorAll('.content-type-option').forEach(opt => {
                    opt.classList.remove('selected');
                });
                
                // Reset exam type options
                document.querySelectorAll('.exam-type-option').forEach(opt => {
                    opt.classList.remove('selected');
                });
                
                // Reset storage options
                storageOptions.forEach(opt => opt.classList.remove('selected'));
                storageOptions[0].classList.add('selected');
            }
            
            // Reset form state
            function resetFormState() {
                submitBtn.disabled = false;
                submitBtn.classList.remove('loading');
                uploadProgress.classList.remove('show');
                progressFill.style.width = '0%';
                progressText.textContent = '0%';
                progressStatus.textContent = 'Uploading...';
            }
            
            // Handle logout
            function handleLogout() {
                spinnerOverlay.classList.add('active');
                
                auth.signOut()
                    .then(() => {
                        showToast('Logged out successfully', 'info');
                        pageTransition.classList.add('active');
                        setTimeout(() => {
                            window.location.replace('/index.html');
                        }, 500);
                    })
                    .catch(err => {
                        console.error('Logout error:', err);
                        showToast('Logout failed. Please try again.', 'error');
                        spinnerOverlay.classList.remove('active');
                    });
            }
            
            // Show toast notification
            function showToast(message, type = 'info') {
                const toast = document.createElement('div');
                toast.className = `toast ${type}`;
                
                let icon = 'fa-info-circle';
                if (type === 'success') icon = 'fa-check-circle';
                if (type === 'error') icon = 'fa-exclamation-circle';
                
                toast.innerHTML = `
                    <i class=\"fas ${icon}\"></i>
                    <div class=\"toast-content\">
                        <div class=\"toast-title\">${type.charAt(0).toUpperCase() + type.slice(1)}</div>
                        <div class=\"toast-message\">${message}</div>
                    </div>
                `;
                
                toastContainer.appendChild(toast);
                
                // Trigger animation
                setTimeout(() => {
                    toast.classList.add('show');
                }, 10);
                
                // Remove toast after 4 seconds
                setTimeout(() => {
                    toast.classList.remove('show');
                    setTimeout(() => {
                        toastContainer.removeChild(toast);
                    }, 300);
                }, 4000);
            }
            
            // Initialize page
            initializePage();
        });
    </script>
</body>
</html>

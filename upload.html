<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload Content | IB STUDIOZ Admin</title>
    
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cpath fill='%23FFD700' d='M50,2 A48,48 0 1,0 50,98 A48,48 0 1,0 50,2 Z' /%3E%3Cg fill='%230A0A0A'%3E%3Cpath d='M28,25 h10 v50 h-10 Z' /%3E%3Cpath d='M45,25 H60 A12.5,12.5 0 0,1 60,50 H45 Z M45,50 H63 A12.5,12.5 0 0,1 63,75 H45 Z' /%3E%3C/g%3E%3C/svg%3E">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <style>
        :root {
            --primary-glow: #FFD700; 
            --secondary-glow: #00A2FF; 
            --tertiary-glow: #FF6B6B;
            --dark-bg: #0A0A0A;
            --darker-bg: #050505;
            --card-bg: rgba(15, 15, 15, 0.95);
            --text-primary: #FFFFFF; 
            --text-secondary: #B0B0B0; 
            --text-tertiary: #808080;
            --border-primary: rgba(255, 215, 0, 0.3);
            --border-secondary: rgba(255, 255, 255, 0.1);
            --shadow-color: rgba(0, 0, 0, 0.7);
            --success: #00D4AA; 
            --danger: #FF4757; 
            --warning: #FFA502;
            --info: #3742FA;
            --glass-bg: rgba(255, 255, 255, 0.03);
            --glass-border: rgba(255, 255, 255, 0.08);
            --hover-bg: rgba(255, 255, 255, 0.05);
            
            /* Department Colors - Enhanced */
            --cse-color: #00D2FF;
            --it-color: #9B59B6;
            --ece-color: #FF6B6B;
            --eee-color: #F39C12;
            --mech-color: #34495E;
            --aiml-color: #00BFA5;
            --civil-color: #27AE60;
            --bme-color: #E91E63;
            --ft-color: #FF5722;
            --mct-color: #00BCD4;
            --csd-color: #FF9800;
            --ads-color: #795548;
            --efe-color: #607D8B;
            --exe-color: #009688;
        }
        
        * { 
            margin: 0; 
            padding: 0; 
            box-sizing: border-box; 
        }
        
        html { 
            scroll-behavior: smooth; 
            font-size: 16px;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; 
            background: var(--darker-bg);
            color: var(--text-primary); 
            line-height: 1.7;
            opacity: 0;
            animation: page-fade-in 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards;
            overflow-x: hidden;
            min-height: 100vh;
        }
        
        @keyframes page-fade-in { 
            to { opacity: 1; } 
        }
        
        /* Enhanced Background */
        .background-container { 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            z-index: -3;
            background: radial-gradient(ellipse at top, rgba(255, 215, 0, 0.03) 0%, transparent 70%),
                       radial-gradient(ellipse at bottom, rgba(0, 162, 255, 0.03) 0%, transparent 70%);
        }
        
        .aurora-layer { 
            position: absolute; 
            top: 0; 
            left: 0; 
            width: 120%; 
            height: 120%; 
            background: 
                radial-gradient(circle at 20% 30%, var(--primary-glow) 0%, transparent 25%), 
                radial-gradient(circle at 80% 70%, var(--secondary-glow) 0%, transparent 25%), 
                radial-gradient(circle at 60% 20%, var(--tertiary-glow) 0%, transparent 30%); 
            animation: aurora-morph 60s linear infinite alternate; 
            filter: blur(150px); 
            opacity: 0.15;
            will-change: transform;
        }
        
        @keyframes aurora-morph { 
            0% { transform: rotate(0deg) scale(1) translate(-10%, -10%); } 
            33% { transform: rotate(120deg) scale(1.3) translate(5%, 10%); }
            66% { transform: rotate(240deg) scale(0.8) translate(-5%, 5%); }
            100% { transform: rotate(360deg) scale(1.2) translate(10%, -5%); } 
        }
        
        .mesh-gradient {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.03;
            background-image: 
                conic-gradient(from 0deg at 50% 50%, 
                    var(--primary-glow) 0deg, 
                    var(--secondary-glow) 120deg, 
                    var(--tertiary-glow) 240deg, 
                    var(--primary-glow) 360deg);
            animation: mesh-rotate 45s linear infinite;
            z-index: -2;
        }
        
        @keyframes mesh-rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .noise-layer { 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            z-index: -1; 
            background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 800"><filter id="noise"><feTurbulence type="fractalNoise" baseFrequency="0.85" numOctaves="4" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(%23noise)" opacity="0.15"/></svg>'); 
            mix-blend-mode: overlay;
        }
        
        /* Enhanced Container */
        .container { 
            max-width: 900px; 
            margin: 0 auto; 
            padding: 20px; 
            position: relative;
        }
        
        /* Premium Header */
        .page-header { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            padding: 20px 35px; 
            margin: 25px 0 40px 0; 
            background: var(--glass-bg); 
            backdrop-filter: blur(25px) saturate(1.8); 
            -webkit-backdrop-filter: blur(25px) saturate(1.8);
            border-radius: 20px; 
            border: 1px solid var(--glass-border); 
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.1),
                0 0 0 1px rgba(255, 215, 0, 0.1);
            position: relative;
            overflow: hidden;
        }
        
        .page-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--primary-glow), transparent);
            opacity: 0.6;
        }
        
        .brand-logo { 
            display: flex; 
            align-items: center; 
            gap: 18px; 
            text-decoration: none; 
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .brand-logo:hover {
            transform: translateY(-2px);
        }
        
        .header-logo-svg { 
            width: 50px; 
            height: auto;
            filter: drop-shadow(0 0 8px rgba(255, 215, 0, 0.3));
            transition: filter 0.3s ease;
        }
        
        .brand-logo:hover .header-logo-svg {
            filter: drop-shadow(0 0 12px rgba(255, 215, 0, 0.5));
        }
        
        .brand-title { 
            font-size: 1.75rem; 
            font-weight: 800; 
            background: linear-gradient(135deg, #FFD700 0%, #00D2FF 50%, #FF6B6B 100%); 
            background-size: 300% 100%; 
            -webkit-background-clip: text; 
            background-clip: text; 
            color: transparent; 
            animation: premium-gradient-flow 8s ease-in-out infinite; 
            letter-spacing: -0.02em;
        }
        
        @keyframes premium-gradient-flow { 
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        
        /* Enhanced Buttons */
        .btn { 
            padding: 12px 24px; 
            border-radius: 12px; 
            font-size: 0.95rem; 
            font-weight: 600; 
            cursor: pointer; 
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); 
            text-decoration: none; 
            display: inline-flex;
            align-items: center;
            gap: 8px;
            border: none; 
            position: relative; 
            overflow: hidden;
            letter-spacing: 0.02em;
            white-space: nowrap;
        }
        
        .btn::before { 
            content: ""; 
            position: absolute; 
            top: 0; 
            left: -100%; 
            width: 100%; 
            height: 100%; 
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.15), transparent); 
            transition: left 0.6s ease; 
        }
        
        .btn:hover::before { 
            left: 100%; 
        }
        
        .btn-secondary { 
            background: var(--glass-bg); 
            border: 1px solid var(--glass-border); 
            color: var(--text-secondary);
            backdrop-filter: blur(10px);
        }
        
        .btn-secondary:hover { 
            background: var(--primary-glow); 
            color: var(--dark-bg); 
            border-color: var(--primary-glow); 
            box-shadow: 
                0 8px 25px rgba(255, 215, 0, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.2); 
            transform: translateY(-2px);
        }
        
        .btn-primary { 
            background: linear-gradient(135deg, var(--primary-glow) 0%, #FFE55C 100%); 
            color: var(--dark-bg); 
            font-weight: 700; 
            width: 100%; 
            justify-content: center;
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
        }
        
        .btn-primary:hover { 
            box-shadow: 0 8px 30px rgba(255, 215, 0, 0.5); 
            transform: translateY(-3px);
            background: linear-gradient(135deg, #FFE55C 0%, var(--primary-glow) 100%);
        }
        
        .btn-primary:disabled { 
            background: linear-gradient(135deg, var(--text-tertiary) 0%, #606060 100%); 
            cursor: not-allowed; 
            transform: none; 
            box-shadow: none;
        }
        
        /* Enhanced Page Title */
        .page-title { 
            text-align: center; 
            font-size: 3rem; 
            font-weight: 900; 
            margin-bottom: 50px; 
            color: var(--text-primary); 
            position: relative; 
            display: inline-block; 
            width: 100%;
            letter-spacing: -0.02em;
        }
        
        .page-title::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 120%;
            height: 120%;
            background: radial-gradient(ellipse, rgba(255, 215, 0, 0.08) 0%, transparent 70%);
            transform: translate(-50%, -50%);
            z-index: -1;
            filter: blur(30px);
        }
        
        .page-title::after { 
            content: ''; 
            position: absolute; 
            bottom: -15px; 
            left: 50%; 
            transform: translateX(-50%); 
            width: 120px; 
            height: 4px; 
            background: linear-gradient(90deg, var(--primary-glow) 0%, var(--secondary-glow) 50%, var(--tertiary-glow) 100%); 
            border-radius: 4px; 
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }
        
        /* Premium Form Container */
        .upload-form { 
            background: var(--card-bg); 
            backdrop-filter: blur(30px) saturate(1.8); 
            -webkit-backdrop-filter: blur(30px) saturate(1.8);
            border-radius: 24px; 
            padding: 50px; 
            border: 1px solid var(--glass-border); 
            box-shadow: 
                0 20px 60px rgba(0, 0, 0, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.1),
                0 0 0 1px rgba(255, 215, 0, 0.05); 
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .upload-form::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--primary-glow), var(--secondary-glow), var(--tertiary-glow));
            opacity: 0.6;
        }
        
        .upload-form:hover { 
            transform: translateY(-8px); 
            box-shadow: 
                0 25px 80px rgba(0, 0, 0, 0.6),
                inset 0 1px 0 rgba(255, 255, 255, 0.15),
                0 0 0 1px rgba(255, 215, 0, 0.1); 
        }
        
        /* Enhanced Form Groups */
        .form-group { 
            margin-bottom: 35px; 
            opacity: 0; 
            animation: slideInUp 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards; 
        }
        
        .form-group:nth-child(1) { animation-delay: 0.1s; }
        .form-group:nth-child(2) { animation-delay: 0.2s; }
        .form-group:nth-child(3) { animation-delay: 0.3s; }
        .form-group:nth-child(4) { animation-delay: 0.4s; }
        .form-group:nth-child(5) { animation-delay: 0.5s; }
        .form-group:nth-child(6) { animation-delay: 0.6s; }
        .form-group:nth-child(7) { animation-delay: 0.7s; }
        .form-group:nth-child(8) { animation-delay: 0.8s; }
        
        @keyframes slideInUp { 
            from { 
                opacity: 0; 
                transform: translateY(30px); 
            } 
            to { 
                opacity: 1; 
                transform: translateY(0); 
            } 
        }
        
        .form-group label { 
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px; 
            font-weight: 600; 
            font-size: 1.05rem;
            color: var(--text-primary); 
            transition: all 0.3s ease;
        }
        
        .form-group:hover label { 
            color: var(--primary-glow);
            transform: translateX(4px);
        }
        
        .form-group label i { 
            font-size: 1.2rem;
            color: var(--primary-glow);
            filter: drop-shadow(0 0 4px rgba(255, 215, 0, 0.3));
        }
        
        /* Enhanced Inputs */
        input, select, textarea { 
            width: 100%; 
            padding: 16px 20px; 
            border-radius: 12px; 
            border: 1px solid var(--glass-border); 
            background: var(--glass-bg); 
            color: var(--text-primary); 
            font-family: 'Inter', sans-serif; 
            font-size: 1rem; 
            font-weight: 500;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); 
            backdrop-filter: blur(10px);
        }
        
        input:focus, select:focus, textarea:focus { 
            outline: none; 
            border-color: var(--primary-glow); 
            background: rgba(255, 215, 0, 0.03);
            box-shadow: 
                0 0 0 3px rgba(255, 215, 0, 0.1),
                0 8px 25px rgba(0, 0, 0, 0.3); 
            transform: translateY(-2px);
        }
        
        input::placeholder, textarea::placeholder {
            color: var(--text-tertiary);
            font-weight: 400;
        }
        
        /* Premium Content Type Selector */
        .content-type-selector, .course-selector-bar {
            background: var(--glass-bg);
            backdrop-filter: blur(15px);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            padding: 16px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        
        .content-type-selector::before, .course-selector-bar::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 215, 0, 0.05), transparent);
            transition: left 0.6s ease;
        }
        
        .content-type-selector:hover::before, .course-selector-bar:hover::before {
            left: 100%;
        }
        
        .content-type-selector:hover, .course-selector-bar:hover { 
            border-color: var(--primary-glow); 
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }
        
        #selected-content-type, #selected-course-display { 
            color: var(--text-secondary);
            font-weight: 500;
        }
        
        #selected-content-type strong, #selected-course-display strong { 
            color: var(--text-primary); 
            font-weight: 700;
        }
        
        /* Enhanced File Upload Area */
        .file-upload-area {
            border: 2px dashed var(--glass-border);
            border-radius: 16px;
            padding: 50px 30px;
            text-align: center;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }
        
        .file-upload-area::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at center, rgba(255, 215, 0, 0.02) 0%, transparent 70%);
            opacity: 0;
            transition: opacity 0.4s ease;
        }
        
        .file-upload-area:hover::before {
            opacity: 1;
        }
        
        .file-upload-area:hover {
            border-color: var(--primary-glow);
            background: rgba(255, 215, 0, 0.03);
            transform: translateY(-4px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
        }
        
        .file-upload-area.dragover {
            border-color: var(--primary-glow);
            background: rgba(255, 215, 0, 0.05);
            transform: scale(1.02);
            box-shadow: 
                0 20px 50px rgba(0, 0, 0, 0.4),
                inset 0 0 50px rgba(255, 215, 0, 0.1);
        }
        
        .file-upload-icon {
            font-size: 4rem;
            color: var(--primary-glow);
            margin-bottom: 20px;
            filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.3));
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .file-upload-text {
            color: var(--text-secondary);
            font-size: 1.1rem;
            font-weight: 500;
            margin-bottom: 20px;
        }
        
        .file-upload-button {
            background: linear-gradient(135deg, var(--primary-glow) 0%, #FFE55C 100%);
            color: var(--dark-bg);
            padding: 12px 28px;
            border-radius: 10px;
            border: none;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.95rem;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
        }
        
        .file-upload-button:hover {
            box-shadow: 0 8px 25px rgba(255, 215, 0, 0.5);
            transform: translateY(-2px);
            background: linear-gradient(135deg, #FFE55C 0%, var(--primary-glow) 100%);
        }
        
        /* Enhanced Storage Options */
        .storage-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .storage-option {
            padding: 25px 20px;
            background: var(--glass-bg);
            backdrop-filter: blur(15px);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            text-align: center;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .storage-option::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, var(--primary-glow), var(--secondary-glow));
            transform: scaleX(0);
            transition: transform 0.4s ease;
        }
        
        .storage-option:hover {
            border-color: var(--primary-glow);
            transform: translateY(-4px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
        }
        
        .storage-option:hover::before {
            transform: scaleX(1);
        }
        
        .storage-option.selected {
            border-color: var(--primary-glow);
            background: rgba(255, 215, 0, 0.05);
            box-shadow: 
                0 10px 30px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 215, 0, 0.1);
        }
        
        .storage-option.selected::before {
            transform: scaleX(1);
        }
        
        .storage-option i {
            font-size: 2.5rem;
            color: var(--primary-glow);
            margin-bottom: 15px;
            filter: drop-shadow(0 0 8px rgba(255, 215, 0, 0.3));
        }
        
        .storage-option h4 {
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 8px;
            color: var(--text-primary);
        }
        
        .storage-option p {
            font-size: 0.9rem;
            color: var(--text-secondary);
            font-weight: 500;
        }
        
        /* Enhanced Modals */
        .modal-overlay { 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            background: rgba(0, 0, 0, 0.85); 
            backdrop-filter: blur(15px); 
            -webkit-backdrop-filter: blur(15px);
            display: flex; 
            justify-content: center; 
            align-items: center; 
            z-index: 1000; 
            opacity: 0; 
            pointer-events: none; 
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); 
        }
        
        .modal-overlay.active { 
            opacity: 1; 
            pointer-events: auto; 
        }
        
        .modal-content { 
            background: var(--card-bg); 
            backdrop-filter: blur(30px) saturate(1.8);
            -webkit-backdrop-filter: blur(30px) saturate(1.8);
            padding: 40px; 
            border-radius: 24px; 
            border: 1px solid var(--glass-border); 
            width: 90%; 
            max-width: 1000px; 
            max-height: 90vh; 
            display: flex; 
            flex-direction: column; 
            position: relative; 
            transform: scale(0.9) translateY(20px); 
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); 
            box-shadow: 
                0 25px 80px rgba(0, 0, 0, 0.6),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            overflow-y: auto;
        }
        
        .modal-overlay.active .modal-content { 
            transform: scale(1) translateY(0); 
        }
        
        .modal-close { 
            position: absolute; 
            top: 20px; 
            right: 25px; 
            background: var(--glass-bg); 
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            color: var(--text-primary); 
            font-size: 1.5rem;
            width: 45px;
            height: 45px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer; 
            z-index: 10; 
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .modal-close:hover {
            transform: rotate(90deg) scale(1.1);
            color: var(--danger);
            border-color: var(--danger);
            background: rgba(255, 71, 87, 0.1);
            box-shadow: 0 8px 25px rgba(255, 71, 87, 0.3);
        }
        
        .modal-header { 
            text-align: center; 
            margin-bottom: 30px; 
            position: relative;
        }
        
        .modal-description {
            color: var(--text-secondary);
            margin-bottom: 25px;
            font-size: 1.05rem;
            font-weight: 500;
        }
        
        /* Enhanced Content Type Grid */
        .content-type-grid, .exam-type-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }
        
        .content-type-option, .exam-type-option {
            background: var(--glass-bg);
            backdrop-filter: blur(15px);
            border: 1px solid var(--glass-border);
            border-radius: 18px;
            padding: 30px 25px;
            text-align: center;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .content-type-option::before, .exam-type-option::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, var(--primary-glow), var(--secondary-glow));
            transform: scaleX(0);
            transition: transform 0.4s ease;
        }
        
        .content-type-option:hover, .exam-type-option:hover {
            transform: translateY(-8px);
            border-color: var(--primary-glow);
            box-shadow: 
                0 20px 50px rgba(0, 0, 0, 0.4),
                inset 0 1px 0 rgba(255, 215, 0, 0.1);
        }
        
        .content-type-option:hover::before, .exam-type-option:hover::before {
            transform: scaleX(1);
        }
        
        .content-type-option.selected, .exam-type-option.selected {
            background: rgba(255, 215, 0, 0.08);
            border-color: var(--primary-glow);
            box-shadow: 
                0 15px 40px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 215, 0, 0.15);
        }
        
        .content-type-option.selected::before, .exam-type-option.selected::before {
            transform: scaleX(1);
        }
        
        .content-type-option i, .exam-type-option i {
            font-size: 3rem;
            color: var(--primary-glow);
            margin-bottom: 20px;
            filter: drop-shadow(0 0 12px rgba(255, 215, 0, 0.4));
            transition: all 0.3s ease;
        }
        
        .content-type-option:hover i, .exam-type-option:hover i {
            transform: scale(1.1);
            filter: drop-shadow(0 0 16px rgba(255, 215, 0, 0.6));
        }
        
        .content-type-option h3, .exam-type-option h3 {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 12px;
            color: var(--text-primary);
        }
        
        .content-type-option p, .exam-type-option p {
            color: var(--text-secondary);
            font-size: 0.95rem;
            font-weight: 500;
            line-height: 1.5;
        }
        
        /* Enhanced Filter Modal */
        .filter-columns-container { 
            overflow: hidden; 
            width: 100%; 
            border-radius: 16px;
            border: 1px solid var(--glass-border);
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
        }
        
        .filter-columns { 
            display: flex; 
            width: 300%; 
            transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1); 
        }
        
        .filter-column { 
            width: 100%; 
            padding: 25px; 
            display: flex; 
            flex-direction: column; 
        }
        
        .filter-column-header { 
            display: flex; 
            align-items: center; 
            margin-bottom: 20px; 
            padding-bottom: 15px;
            border-bottom: 1px solid var(--glass-border);
        }
        
        .filter-column-header h3 { 
            font-size: 1.3rem; 
            font-weight: 700;
            color: var(--primary-glow); 
            flex-grow: 1;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .filter-back-btn { 
            background: var(--glass-bg); 
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border); 
            color: var(--text-secondary); 
            padding: 8px 12px; 
            border-radius: 10px; 
            cursor: pointer; 
            margin-right: 15px; 
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .filter-back-btn:hover {
            background: var(--primary-glow);
            color: var(--dark-bg);
            border-color: var(--primary-glow);
            transform: translateX(-2px);
        }
        
        .filter-column-list { 
            height: 50vh; 
            overflow-y: auto; 
            padding-right: 15px; 
        }
        
        .filter-column-list::-webkit-scrollbar { 
            width: 8px; 
        }
        
        .filter-column-list::-webkit-scrollbar-track { 
            background: var(--glass-bg); 
            border-radius: 4px;
        }
        
        .filter-column-list::-webkit-scrollbar-thumb { 
            background: var(--glass-border); 
            border-radius: 4px;
            transition: background 0.3s ease;
        }
        
        .filter-column-list::-webkit-scrollbar-thumb:hover { 
            background: var(--primary-glow);
        }
        
        .filter-item { 
            padding: 16px 20px; 
            margin-bottom: 10px; 
            border-radius: 12px; 
            cursor: pointer; 
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
            font-size: 0.95rem; 
            font-weight: 500;
            background: var(--glass-bg);
            backdrop-filter: blur(5px);
            border: 1px solid transparent;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .filter-item:hover { 
            background: var(--hover-bg); 
            transform: translateX(8px);
            border-color: var(--glass-border);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .filter-item.selected { 
            background: rgba(255, 215, 0, 0.1); 
            color: var(--text-primary); 
            font-weight: 700; 
            border-color: var(--primary-glow);
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.2);
        }
        
        .filter-column.disabled { 
            opacity: 0.3; 
            pointer-events: none; 
        }
        
        .filter-columns.show-semesters { 
            transform: translateX(-33.333%); 
        }
        
        .filter-columns.show-courses { 
            transform: translateX(-66.666%); 
        }
        
        /* Progress Indicator */
        .progress-indicator {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 30px;
            gap: 20px;
        }
        
        .progress-step {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border: 2px solid var(--glass-border);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            font-weight: 700;
            font-size: 1.1rem;
        }
        
        .progress-step.active {
            background: var(--primary-glow);
            border-color: var(--primary-glow);
            color: var(--dark-bg);
            box-shadow: 
                0 0 20px rgba(255, 215, 0, 0.5),
                0 4px 15px rgba(0, 0, 0, 0.3);
            transform: scale(1.1);
        }
        
        .progress-step.completed {
            background: var(--success);
            border-color: var(--success);
            color: white;
            box-shadow: 0 0 15px rgba(0, 212, 170, 0.4);
        }
        
        .progress-step::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 100%;
            width: 20px;
            height: 3px;
            background: var(--glass-border);
            transform: translateY(-50%);
            border-radius: 2px;
        }
        
        .progress-step:last-child::after {
            display: none;
        }
        
        .progress-step.completed::after {
            background: var(--success);
        }
        
        /* Enhanced File Preview */
        .file-preview {
            margin-top: 25px;
            padding: 20px;
            background: var(--glass-bg);
            backdrop-filter: blur(15px);
            border-radius: 16px;
            border: 1px solid var(--glass-border);
            display: none;
            transition: all 0.4s ease;
        }
        
        .file-preview.show {
            display: block;
            animation: slideInUp 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .file-preview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .file-preview-name {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 1.05rem;
        }
        
        .file-preview-size {
            color: var(--text-secondary);
            font-size: 0.9rem;
            font-weight: 500;
            margin-top: 4px;
        }
        
        .file-preview-remove {
            background: var(--danger);
            color: white;
            border: none;
            border-radius: 10px;
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .file-preview-remove:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 15px rgba(255, 71, 87, 0.4);
        }
        
        /* Enhanced Upload Progress */
        .upload-progress {
            margin-top: 25px;
            display: none;
        }
        
        .upload-progress.show {
            display: block;
            animation: slideInUp 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .progress-bar {
            width: 100%;
            height: 12px;
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border-radius: 6px;
            overflow: hidden;
            margin-bottom: 15px;
            border: 1px solid var(--glass-border);
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-glow), var(--secondary-glow));
            border-radius: 6px;
            transition: width 0.3s ease;
            width: 0%;
            position: relative;
        }
        
        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: progress-shine 1.5s linear infinite;
        }
        
        @keyframes progress-shine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .progress-text {
            display: flex;
            justify-content: space-between;
            color: var(--text-secondary);
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        /* Enhanced Messages */
        .message { 
            text-align: center; 
            padding: 20px; 
            border-radius: 12px; 
            margin-top: 25px; 
            display: none; 
            font-weight: 600;
            font-size: 1.05rem;
            transform: translateY(15px);
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(15px);
        }
        
        .message.show { 
            display: block; 
            transform: translateY(0);
            opacity: 1;
        }
        
        .message.success { 
            background: rgba(0, 212, 170, 0.1); 
            border: 1px solid var(--success); 
            color: var(--success); 
            box-shadow: 0 4px 15px rgba(0, 212, 170, 0.2);
        }
        
        .message.error { 
            background: rgba(255, 71, 87, 0.1); 
            border: 1px solid var(--danger); 
            color: var(--danger); 
            box-shadow: 0 4px 15px rgba(255, 71, 87, 0.2);
        }
        
        /* Enhanced Toast Notifications */
        .toast-container {
            position: fixed;
            bottom: 25px;
            right: 25px;
            z-index: 2000;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .toast {
            background: var(--card-bg);
            backdrop-filter: blur(25px) saturate(1.8);
            -webkit-backdrop-filter: blur(25px) saturate(1.8);
            border-radius: 16px;
            padding: 20px 25px;
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            transform: translateX(120%);
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            max-width: 400px;
            min-width: 300px;
            border: 1px solid var(--glass-border);
        }
        
        .toast.show {
            transform: translateX(0);
            opacity: 1;
        }
        
        .toast.success {
            border-left: 4px solid var(--success);
        }
        
        .toast.error {
            border-left: 4px solid var(--danger);
        }
        
        .toast.info {
            border-left: 4px solid var(--info);
        }
        
        .toast i {
            font-size: 1.8rem;
            margin-right: 18px;
            filter: drop-shadow(0 0 8px rgba(255, 215, 0, 0.3));
        }
        
        .toast.success i {
            color: var(--success);
        }
        
        .toast.error i {
            color: var(--danger);
        }
        
        .toast.info i {
            color: var(--info);
        }
        
        .toast-content {
            flex: 1;
        }
        
        .toast-title {
            font-weight: 700;
            font-size: 1.05rem;
            margin-bottom: 6px;
            color: var(--text-primary);
        }
        
        .toast-message {
            font-size: 0.9rem;
            color: var(--text-secondary);
            font-weight: 500;
        }
        
        /* Enhanced Thumbnail Preview */
        .thumbnail-preview {
            margin-top: 15px;
            border-radius: 12px;
            overflow: hidden;
            display: none;
            max-height: 250px;
            position: relative;
            border: 1px solid var(--glass-border);
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
        }
        
        .thumbnail-preview img {
            width: 100%;
            height: auto;
            display: block;
        }
        
        .thumbnail-preview .remove-thumbnail {
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--glass-bg);
            backdrop-filter: blur(15px);
            color: var(--text-primary);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .thumbnail-preview .remove-thumbnail:hover {
            background: var(--danger);
            border-color: var(--danger);
            color: white;
            transform: scale(1.1);
        }
        
        /* Checkbox Enhancement */
        .checkbox-group { 
            display: flex; 
            align-items: center; 
            gap: 15px; 
            padding: 16px 20px;
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            border: 1px solid var(--glass-border);
            transition: all 0.3s ease;
        }
        
        .checkbox-group:hover {
            border-color: var(--primary-glow);
            background: rgba(255, 215, 0, 0.03);
        }
        
        .checkbox-group input[type="checkbox"] { 
            width: 20px;
            height: 20px;
            accent-color: var(--primary-glow);
            cursor: pointer;
        }
        
        .checkbox-group label {
            margin: 0;
            cursor: pointer;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        /* Loading States */
        .btn-primary .spinner { 
            display: none; 
            width: 20px; 
            height: 20px; 
            border: 2px solid var(--dark-bg); 
            border-top-color: transparent; 
            border-radius: 50%; 
            animation: spin 1s linear infinite; 
        }
        
        .btn-primary.loading .spinner { 
            display: block; 
        }
        
        .btn-primary.loading .btn-text { 
            display: none; 
        }
        
        @keyframes spin { 
            to { transform: rotate(360deg); } 
        }
        
        /* Spinner Overlay */
        .spinner-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 3000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .spinner-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .spinner {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            border-top-color: var(--primary-glow);
            animation: spin 1.2s ease-in-out infinite;
        }
        
        /* Page Transition */
        .page-transition {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--darker-bg);
            z-index: 9999;
            transform: translateY(-100%);
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .page-transition.active {
            transform: translateY(0);
        }
        
        /* Drive Link Helper */
        .drive-link-helper {
            margin-top: 15px;
            padding: 16px 20px;
            background: rgba(0, 162, 255, 0.05);
            border: 1px solid rgba(0, 162, 255, 0.2);
            border-radius: 12px;
            display: none;
        }
        
        .drive-link-helper.show {
            display: block;
            animation: slideInUp 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .drive-link-helper h4 {
            color: var(--secondary-glow);
            font-size: 1rem;
            font-weight: 700;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .drive-link-helper p {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 8px;
            line-height: 1.5;
        }
        
        .drive-link-helper ol {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-left: 20px;
            line-height: 1.6;
        }
        
        .drive-link-helper ol li {
            margin-bottom: 5px;
        }
        
        .drive-link-helper .highlight {
            color: var(--secondary-glow);
            font-weight: 600;
        }
        
        /* Mobile Responsiveness */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .page-header {
                padding: 16px 20px;
                margin: 20px 0 30px 0;
                flex-direction: column;
                gap: 15px;
            }
            
            .brand-title {
                font-size: 1.4rem;
            }
            
            .page-title {
                font-size: 2.2rem;
                margin-bottom: 35px;
            }
            
            .upload-form {
                padding: 30px 20px;
                border-radius: 20px;
            }
            
            .modal-content {
                width: 95%;
                max-height: 85vh;
                padding: 25px 20px;
                border-radius: 20px;
            }
            
            .content-type-grid, .exam-type-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .content-type-option, .exam-type-option {
                padding: 25px 20px;
            }
            
            .content-type-option i, .exam-type-option i {
                font-size: 2.5rem;
            }
            
            .storage-options {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .file-upload-area {
                padding: 35px 20px;
            }
            
            .file-upload-icon {
                font-size: 3rem;
            }
            
            .toast {
                min-width: 280px;
                max-width: calc(100vw - 40px);
            }
            
            .toast-container {
                right: 20px;
                left: 20px;
                bottom: 20px;
            }
        }
        
        @media (min-width: 768px) {
            .page-header { 
                flex-direction: row; 
            }
            
            .filter-columns-container { 
                overflow: visible; 
            }
            
            .filter-columns { 
                display: grid; 
                grid-template-columns: 1fr 1fr 1fr; 
                gap: 25px; 
                width: 100%; 
                transform: none !important; 
            }
            
            .filter-column { 
                width: auto; 
                border-right: 1px solid var(--glass-border); 
                padding: 25px 30px; 
            }
            
            .filter-column:last-child { 
                border-right: none; 
            }
            
            .filter-back-btn { 
                display: none; 
            }
        }
        
        /* Enhanced Animations */
        @keyframes glow-pulse {
            0%, 100% {
                box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
            }
            50% {
                box-shadow: 0 0 30px rgba(255, 215, 0, 0.6);
            }
        }
        
        .btn-primary:not(:disabled):hover {
            animation: glow-pulse 2s ease-in-out infinite;
        }
        
        /* Google Drive Integration Styles */
        .gdrive-upload-container {
            margin-top: 20px;
            padding: 20px;
            background: var(--glass-bg);
            backdrop-filter: blur(15px);
            border-radius: 16px;
            border: 1px solid var(--glass-border);
            display: none;
        }
        
        .gdrive-upload-container.show {
            display: block;
            animation: slideInUp 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .gdrive-upload-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .gdrive-upload-title {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .gdrive-upload-title i {
            color: var(--secondary-glow);
            font-size: 1.3rem;
        }
        
        .gdrive-upload-button {
            background: linear-gradient(135deg, var(--secondary-glow) 0%, #00A2FF 100%);
            color: white;
            border: none;
            border-radius: 10px;
            padding: 8px 16px;
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .gdrive-upload-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 162, 255, 0.4);
        }
        
        .gdrive-upload-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .gdrive-link-input {
            width: 100%;
            padding: 12px 15px;
            border-radius: 10px;
            border: 1px solid var(--glass-border);
            background: var(--glass-bg);
            color: var(--text-primary);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            margin-top: 15px;
            transition: all 0.3s ease;
        }
        
        .gdrive-link-input:focus {
            outline: none;
            border-color: var(--secondary-glow);
            background: rgba(0, 162, 255, 0.03);
            box-shadow: 0 0 0 3px rgba(0, 162, 255, 0.1);
        }
        
        .gdrive-link-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .gdrive-link-copy {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            color: var(--text-primary);
            border-radius: 8px;
            padding: 8px 12px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .gdrive-link-copy:hover {
            background: var(--secondary-glow);
            color: var(--dark-bg);
            border-color: var(--secondary-glow);
        }
        
        .gdrive-link-reset {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            color: var(--text-primary);
            border-radius: 8px;
            padding: 8px 12px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .gdrive-link-reset:hover {
            background: var(--danger);
            color: white;
            border-color: var(--danger);
        }
    </style>
</head>
<body>
    <div class="background-container">
        <div class="aurora-layer"></div>
        <div class="mesh-gradient"></div>
        <div class="noise-layer"></div>
    </div>
    
    <header class="page-header">
        <a href="/admindashboard.html" class="brand-logo">
            <svg class="header-logo-svg" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                <path fill="var(--primary-glow)" d="M50,2 A48,48 0 1,0 50,98 A48,48 0 1,0 50,2 Z" />
                <g fill="var(--dark-bg)">
                    <path d="M28,25 h10 v50 h-10 Z" />
                    <path d="M45,25 H60 A12.5,12.5 0 0,1 60,50 H45 Z M45,50 H63 A12.5,12.5 0 0,1 63,75 H45 Z" />
                </g>
            </svg>
            <h1 class="brand-title">IB STUDIOZ</h1>
        </a>
        <button id="logout-btn" class="btn btn-secondary">
            <i class="fas fa-sign-out-alt"></i> Logout
        </button>
    </header>
    
    <main class="container">
        <h1 class="page-title">Upload New Content</h1>
        
        <form id="upload-form" class="upload-form">
            <!-- Content Type Selection -->
            <div class="form-group">
                <label for="content-type-selector">
                    <i class="fas fa-layer-group"></i> Content Type
                </label>
                <div id="content-type-selector" class="content-type-selector">
                    <div id="selected-content-type">
                        <strong>No content type selected</strong>
                    </div>
                    <button type="button" id="open-content-type-modal-btn" class="btn btn-secondary">
                        <i class="fas fa-chevron-down"></i>
                    </button>
                </div>
            </div>
            
            <!-- Course Selection -->
            <div class="form-group" id="course-group" style="display: none;">
                <label for="course-selector">
                    <i class="fas fa-graduation-cap"></i> Course
                </label>
                <div id="course-selector" class="course-selector-bar">
                    <div id="selected-course-display">
                        <strong>No course selected</strong>
                    </div>
                    <button type="button" id="open-filter-modal-btn" class="btn btn-secondary">
                        <i class="fas fa-filter"></i> Select
                    </button>
                </div>
            </div>
            
            <!-- Title -->
            <div class="form-group">
                <label for="title">
                    <i class="fas fa-heading"></i> Title
                </label>
                <input type="text" id="title" name="title" placeholder="Enter content title" required>
            </div>
            
            <!-- File Upload Area -->
            <div class="form-group">
                <label>
                    <i class="fas fa-cloud-upload-alt"></i> Upload File
                </label>
                <div id="file-upload-area" class="file-upload-area">
                    <i class="fas fa-cloud-upload-alt file-upload-icon"></i>
                    <p class="file-upload-text">Drag and drop your file here or click to browse</p>
                    <button type="button" class="file-upload-button">Choose File</button>
                    <input type="file" id="file-input" style="display: none;">
                </div>
                
                <!-- File Preview -->
                <div id="file-preview" class="file-preview">
                    <div class="file-preview-header">
                        <div>
                            <div class="file-preview-name" id="file-name"></div>
                            <div class="file-preview-size" id="file-size"></div>
                        </div>
                        <button type="button" id="remove-file" class="file-preview-remove">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Upload Progress -->
                <div id="upload-progress" class="upload-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill"></div>
                    </div>
                    <div class="progress-text">
                        <span id="progress-text">0%</span>
                        <span id="progress-status">Uploading...</span>
                    </div>
                </div>
            </div>
            
            <!-- Storage Options -->
            <div class="form-group">
                <label>
                    <i class="fas fa-database"></i> Storage Location
                </label>
                <div class="storage-options">
                    <div class="storage-option selected" data-storage="firebase">
                        <i class="fas fa-fire"></i>
                        <h4>Firebase Storage</h4>
                        <p>Fast and reliable cloud storage</p>
                    </div>
                    <div class="storage-option" data-storage="gdrive">
                        <i class="fab fa-google-drive"></i>
                        <h4>Google Drive</h4>
                        <p>Integrated with Google Workspace</p>
                    </div>
                </div>
                
                <!-- Google Drive Upload Container -->
                <div id="gdrive-upload-container" class="gdrive-upload-container">
                    <div class="gdrive-upload-header">
                        <div class="gdrive-upload-title">
                            <i class="fab fa-google-drive"></i> Google Drive Upload
                        </div>
                        <button type="button" id="gdrive-upload-btn" class="gdrive-upload-button">
                            <i class="fas fa-upload"></i> Upload to Drive
                        </button>
                    </div>
                    <input type="text" id="gdrive-link-input" class="gdrive-link-input" placeholder="Google Drive shareable link will appear here" readonly>
                    <div class="gdrive-link-actions">
                        <button type="button" id="gdrive-link-copy" class="gdrive-link-copy">
                            <i class="fas fa-copy"></i> Copy Link
                        </button>
                        <button type="button" id="gdrive-link-reset" class="gdrive-link-reset">
                            <i class="fas fa-redo"></i> Reset
                        </button>
                    </div>
                </div>
                
                <!-- Drive Link Helper -->
                <div id="drive-link-helper" class="drive-link-helper">
                    <h4><i class="fab fa-google-drive"></i> How to get a Google Drive shareable link</h4>
                    <p>Follow these steps to get a shareable link for your file:</p>
                    <ol>
                        <li>Upload your file to <span class="highlight">Google Drive</span></li>
                        <li>Right-click on the file and select <span class="highlight">Share</span></li>
                        <li>Click on <span class="highlight">Get link</span> in the top-right corner</li>
                        <li>Change the restriction from "Restricted" to <span class="highlight">Anyone with the link</span></li>
                        <li>Copy the link and paste it in the input field above</li>
                    </ol>
                </div>
            </div>
            
            <!-- Additional Fields (shown based on content type) -->
            <div id="additional-fields"></div>
            
            <!-- Submit Button -->
            <div class="form-group">
                <button type="submit" id="submit-btn" class="btn btn-primary">
                    <span class="btn-text">Upload Content</span>
                    <div class="spinner"></div>
                </button>
            </div>
            
            <!-- Message -->
            <div id="form-message" class="message"></div>
        </form>
        
        <a href="/admindashboard.html" class="btn btn-secondary" style="width: 100%; text-align: center; margin-top: 20px;">
            <i class="fas fa-arrow-left"></i> Back to Dashboard
        </a>
    </main>
    
    <!-- Content Type Selection Modal -->
    <div id="content-type-modal" class="modal-overlay">
        <div class="modal-content">
            <button id="content-type-modal-close-btn" class="modal-close">&times;</button>
            <div class="modal-header">
                <h2 class="modal-title">Select Content Type</h2>
                <p class="modal-description">Choose the type of content you want to upload</p>
            </div>
            
            <div class="content-type-grid">
                <div class="content-type-option" data-type="materials">
                    <i class="fas fa-book-open"></i>
                    <h3>Study Material</h3>
                    <p>Notes, textbooks, and other learning resources</p>
                </div>
                <div class="content-type-option" data-type="pyqs">
                    <i class="fas fa-file-alt"></i>
                    <h3>PYQ / Question Bank</h3>
                    <p>Previous year questions and practice papers</p>
                </div>
                <div class="content-type-option" data-type="seminars">
                    <i class="fab fa-youtube"></i>
                    <h3>Seminar</h3>
                    <p>YouTube videos of seminars and talks</p>
                </div>
                <div class="content-type-option" data-type="quizzes">
                    <i class="fas fa-question-circle"></i>
                    <h3>Quiz</h3>
                    <p>Google Form quizzes and assessments</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Exam Type Selection Modal (for PYQs) -->
    <div id="exam-type-modal" class="modal-overlay">
        <div class="modal-content">
            <button id="exam-type-modal-close-btn" class="modal-close">&times;</button>
            <div class="modal-header">
                <h2 class="modal-title">Select Exam Type</h2>
                <p class="modal-description">Choose the type of exam for these questions</p>
            </div>
            
            <div class="exam-type-grid">
                <div class="exam-type-option" data-exam="CIE 1">
                    <i class="fas fa-clipboard-list"></i>
                    <h3>CIE 1</h3>
                    <p>Continuous Internal Examination 1</p>
                </div>
                <div class="exam-type-option" data-exam="CIE 2">
                    <i class="fas fa-clipboard-list"></i>
                    <h3>CIE 2</h3>
                    <p>Continuous Internal Examination 2</p>
                </div>
                <div class="exam-type-option" data-exam="CIE 3">
                    <i class="fas fa-clipboard-list"></i>
                    <h3>CIE 3</h3>
                    <p>Continuous Internal Examination 3</p>
                </div>
                <div class="exam-type-option" data-exam="Semester End">
                    <i class="fas fa-graduation-cap"></i>
                    <h3>Semester End Exam</h3>
                    <p>End of semester examination</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- FILTER SELECTION MODAL -->
    <div id="filter-modal" class="modal-overlay">
        <div class="modal-content">
            <button id="filter-modal-close-btn" class="modal-close">&times;</button>
            <div class="modal-header">
                <h2 class="modal-title">Select the Course</h2>
                <p class="modal-description">Choose the department, semester, and course for this material.</p>
                
                <div class="progress-indicator">
                    <div class="progress-step active" id="step-dept">1</div>
                    <div class="progress-step" id="step-sem">2</div>
                    <div class="progress-step" id="step-course">3</div>
                </div>
            </div>
            <div class="filter-columns-container">
                <div class="filter-columns">
                    <div id="department-col" class="filter-column">
                        <div class="filter-column-header">
                           <h3><i class="fas fa-university"></i> Department</h3>
                        </div>
                        <div class="filter-column-list"></div>
                    </div>
                    <div id="semester-col" class="filter-column disabled">
                        <div class="filter-column-header">
                           <button type="button" class="filter-back-btn" data-target="department"><i class="fas fa-arrow-left"></i></button>
                           <h3><i class="fas fa-graduation-cap"></i> Semester</h3>
                        </div>
                        <div class="filter-column-list"></div>
                    </div>
                    <div id="course-col" class="filter-column disabled">
                         <div class="filter-column-header">
                           <button type="button" class="filter-back-btn" data-target="semester"><i class="fas fa-arrow-left"></i></button>
                           <h3><i class="fas fa-book"></i> Course</h3>
                        </div>
                        <div class="filter-column-list"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Toast Container -->
    <div class="toast-container" id="toast-container"></div>
    
    <!-- Loading Spinner -->
    <div class="spinner-overlay" id="spinner-overlay">
        <div class="spinner"></div>
    </div>
    
    <!-- Page Transition -->
    <div class="page-transition" id="page-transition"></div>
    
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>
    <script>
        // Academic Data
        const academicData = {
            branches: {
                "CSE": {
                    "name": "Computer Science",
                    "color": "var(--cse-color)",
                    "icon": "fas fa-laptop-code",
                    "semesters": {
                        "1": [
                            {"code": "U23ENG101A", "name": "Communication Skills in English", "credits": 3},
                            {"code": "U23MAT102A", "name": "Linear Algebra and Calculus With MATLAB", "credits": 4},
                            {"code": "U23PHY103B", "name": "Engineering Physics", "credits": 3},
                            {"code": "U23PPR105", "name": "Problem Solving using Python Programming", "credits": 3},
                            {"code": "U23BEE106A", "name": "Basic Electrical and Electronics Engineering", "credits": 3},
                            {"code": "U23TAM101", "name": "Heritage of Tamils", "credits": 1},
                            {"code": "U23PHL110", "name": "Engineering Physics Lab", "credits": 1},
                            {"code": "U23BEEL113", "name": "Basic Electrical and Electronics Engineering Lab", "credits": 1},
                            {"code": "U23PPL112", "name": "Python Programming Lab", "credits": 1}
                        ],
                        "2": [
                            {"code": "U23ENG201A", "name": "Technical English", "credits": 2},
                            {"code": "U23MAT202B", "name": "Discrete Mathematics", "credits": 4},
                            {"code": "U23CHE204B", "name": "Chemistry For Computer Science", "credits": 3},
                            {"code": "U23CPR205B", "name": "Programming In C", "credits": 3},
                            {"code": "U23EGR207", "name": "Engineering Graphics", "credits": 3},
                            {"code": "U23EC203", "name": "Digital Principles And System Design", "credits": 3},
                            {"code": "U23CHL211", "name": "Chemistry Lab", "credits": 1},
                            {"code": "U23CPL212", "name": "C programming Lab", "credits": 1},
                            {"code": "U23TAM201", "name": "Tamils And Technology", "credits": 1}
                        ],
                        "3": [
                            {"code": "U23MAT301D", "name": "Probability and Statistics", "credits": 4},
                            {"code": "U23CS301", "name": "Data Structures", "credits": 3},
                            {"code": "U23CS302", "name": "Computer Architecture", "credits": 3},
                            {"code": "U23CS303", "name": "Object Oriented Programming", "credits": 3},
                            {"code": "U23CS304", "name": "Operating Systems", "credits": 3},
                            {"code": "U23CS305", "name": "Computer Information and Ethics", "credits": 3},
                            {"code": "U23CS306", "name": "Data Structures Lab", "credits": 1},
                            {"code": "U23CS307", "name": "Object Oriented Programming Lab", "credits": 1},
                            {"code": "U23GE301", "name": "Soft Skills and Aptitude-I", "credits": 1},
                            {"code": "Noc24-mg72", "name": "NPTEL:design Thinking-A Primer", "credits": 1}
                        ],
                        "4": [
                            {"code": "U23MAT401B", "name": "Numerical Methods", "credits": 4},
                            {"code": "U23CS401", "name": "Design And Analysis of Algorithms", "credits": 3},
                            {"code": "U23CS402", "name": "Software Engineering", "credits": 3},
                            {"code": "U23CS403", "name": "DataBase Management Systems", "credits": 3},
                            {"code": "U23CS404", "name": "Embedded System Design ", "credits": 3},
                            {"code": "U23CS405", "name": "Software Development Lab", "credits": 1},
                            {"code": "U23CS403", "name": "Database Management Systems Lab", "credits": 1}
                        ],
                        "5": [
                            {"code": "U23CS504", "name": "Machine Learning", "credits": 3},
                            {"code": "U23CS501", "name": "Computer Networks", "credits": 3},
                            {"code": "U23CS502", "name": "Artificial Intelligence", "credits": 3},
                            {"code": "U23CS503", "name": "Theory of Computation", "credits": 3},
                            {"code": "noc25-cs135", "name": "Elective NPTEL", "credits": 3},
                            {"code": " U23CS947 / U23CS903", "name": "Professional Elective ", "credits": 3},
                            {"code": "U23CS505", "name": "Computer Networks Laboratory", "credits": 2},
                            {"code": "U23CS506", "name": "Artificial Intelligence and Machine Learning Laboratory", "credits": 1},
                            {"code": "U23GE501", "name": "Soft Skills and Aptitude-III", "credits": 1}
                        ],
                        "6": [], "7": [], "8": []
                    }
                },
                "IT": {
                    "name": "Info. Technology",
                    "color": "var(--it-color)",
                    "icon": "fas fa-network-wired",
                    "semesters": {
                        "1": [
                            {"code": "U23IT101", "name": "Programming Fundamentals", "credits": 4},
                            {"code": "U23IT102", "name": "Discrete Mathematics", "credits": 4},
                            {"code": "U23IT103", "name": "Digital Systems", "credits": 3},
                            {"code": "U23IT104", "name": "Computer Organization", "credits": 3},
                            {"code": "U23IT105", "name": "Communication Skills", "credits": 2},
                            {"code": "U23IT106", "name": "Programming Lab", "credits": 1},
                            {"code": "U23IT107", "name": "Digital Systems Lab", "credits": 1}
                        ],
                        "2": [
                            {"code": "U23IT201", "name": "Data Structures", "credits": 4},
                            {"code": "U23IT202", "name": "Database Systems", "credits": 4},
                            {"code": "U23IT203", "name": "Operating Systems", "credits": 3},
                            {"code": "U23IT204", "name": "Computer Networks", "credits": 3},
                            {"code": "U23IT205", "name": "Web Technologies", "credits": 3},
                            {"code": "U23IT206", "name": "Data Structures Lab", "credits": 1},
                            {"code": "U23IT207", "name": "Web Technologies Lab", "credits": 1}
                        ],
                        "3": [], "4": [], "5": [], "6": [], "7": [], "8": []
                    }
                },
                "ECE": {
                    "name": "Electronics & Comm",
                    "color": "var(--ece-color)",
                    "icon": "fas fa-satellite-dish",
                    "semesters": {
                        "1": [
                            {"code": "U23EC101", "name": "Basic Electronics", "credits": 4},
                            {"code": "U23EC102", "name": "Circuit Theory", "credits": 4},
                            {"code": "U23EC103", "name": "Engineering Mathematics", "credits": 4},
                            {"code": "U23EC104", "name": "Programming in C", "credits": 3},
                            {"code": "U23EC105", "name": "Communication Skills", "credits": 2},
                            {"code": "U23EC106", "name": "Electronics Lab", "credits": 1},
                            {"code": "U23EC107", "name": "Programming Lab", "credits": 1}
                        ],
                        "2": [
                            {"code": "U23EC201", "name": "Analog Electronics", "credits": 4},
                            {"code": "U23EC202", "name": "Digital Electronics", "credits": 4},
                            {"code": "U23EC203", "name": "Signals and Systems", "credits": 4},
                            {"code": "U23EC204", "name": "Electromagnetic Theory", "credits": 3},
                            {"code": "U23EC205", "name": "Data Structures", "credits": 3},
                            {"code": "U23EC206", "name": "Analog Electronics Lab", "credits": 1},
                            {"code": "U23EC207", "name": "Digital Electronics Lab", "credits": 1}
                        ],
                        "3": [], "4": [], "5": [], "6": [], "7": [], "8": []
                    }
                },
                "EEE": {
                    "name": "Electrical & Electronics",
                    "color": "var(--eee-color)",
                    "icon": "fas fa-bolt",
                    "semesters": {
                        "1": [
                            {"code": "U23EE101", "name": "Basic Electrical Engineering", "credits": 4},
                            {"code": "U23EE102", "name": "Engineering Mathematics", "credits": 4},
                            {"code": "U23EE103", "name": "Electronics Engineering", "credits": 3},
                            {"code": "U23EE104", "name": "Programming in C", "credits": 3},
                            {"code": "U23EE105", "name": "Communication Skills", "credits": 2},
                            {"code": "U23EE106", "name": "Electrical Lab", "credits": 1},
                            {"code": "U23EE107", "name": "Programming Lab", "credits": 1}
                        ],
                        "2": [
                            {"code": "U23EE201", "name": "Circuit Theory", "credits": 4},
                            {"code": "U23EE202", "name": "Electromagnetic Theory", "credits": 4},
                            {"code": "U23EE203", "name": "Digital Electronics", "credits": 4},
                            {"code": "U23EE204", "name": "Electrical Machines", "credits": 3},
                            {"code": "U23EE205", "name": "Data Structures", "credits": 3},
                            {"code": "U23EE206", "name": "Circuit Theory Lab", "credits": 1},
                            {"code": "U23EE207", "name": "Digital Electronics Lab", "credits": 1}
                        ],
                        "3": [], "4": [], "5": [], "6": [], "7": [], "8": []
                    }
                },
                "MECH": {
                    "name": "Mechanical",
                    "color": "var(--mech-color)",
                    "icon": "fas fa-cogs",
                    "semesters": {
                        "1": [
                            {"code": "U23ME101", "name": "Engineering Mechanics", "credits": 4},
                            {"code": "U23ME102", "name": "Engineering Graphics", "credits": 4},
                            {"code": "U23ME103", "name": "Engineering Mathematics", "credits": 4},
                            {"code": "U23ME104", "name": "Basic Electrical Engineering", "credits": 3},
                            {"code": "U23ME105", "name": "Communication Skills", "credits": 2},
                            {"code": "U23ME106", "name": "Workshop Practice", "credits": 1},
                            {"code": "U23ME107", "name": "Engineering Graphics Lab", "credits": 1}
                        ],
                        "2": [
                            {"code": "U23ME201", "name": "Thermodynamics", "credits": 4},
                            {"code": "U23ME202", "name": "Mechanics of Materials", "credits": 4},
                            {"code": "U23ME203", "name": "Manufacturing Technology", "credits": 4},
                            {"code": "U23ME204", "name": "Fluid Mechanics", "credits": 3},
                            {"code": "U23ME205", "name": "Computer Programming", "credits": 3},
                            {"code": "U23ME206", "name": "Thermodynamics Lab", "credits": 1},
                            {"code": "U23ME207", "name": "Manufacturing Technology Lab", "credits": 1}
                        ],
                        "3": [], "4": [], "5": [], "6": [], "7": [], "8": []
                    }
                },
                "AIML": {
                    "name": "AI & Machine Learning",
                    "color": "var(--aiml-color)",
                    "icon": "fas fa-brain",
                    "semesters": {
                        "1": [
                            {"code": "U23EG107", "name": "Engineering Graphics", "credits": 3},
                            {"code": "U23ENG101A", "name": "Communication Skills in English", "credits": 3},
                            {"code": "U23MAT102A", "name": "Linear Algebra and Calculus with MATLAB", "credits": 4},
                            {"code": "U23PPR105", "name": "Problem Solving using Python Programming", "credits": 3},
                            {"code": "U23PHY103E", "name": "Engineering Physics", "credits": 3},
                            {"code": "U23PHL110", "name": "Engineering Physics Laboratory", "credits": 1},
                            {"code": "U23PPL112", "name": "Python Programming Laboratory", "credits": 1},
                            {"code": "U23TAM101", "name": "Heritage of Tamils", "credits": 1}
                        ],
                        "2": [
                            {"code": "U23ENG201A", "name": "Technical English", "credits": 2},
                            {"code": "U23MAT202D", "name": "Discrete Mathematics", "credits": 4},
                            {"code": "U23BEEE206B", "name": "Basics of Electrical and Electronics Engineering", "credits": 3},
                            {"code": "U23CPR205", "name": "Programming in C", "credits": 3},
                            {"code": "U23CHE204C", "name": "Applied Chemistry", "credits": 2},
                            {"code": "U23EC203", "name": "Digital Principles and System Design", "credits": 3},
                            {"code": "U23CPL212", "name": "C Programming Laboratory", "credits": 1},
                            {"code": "U23CHL211", "name": "Chemistry Laboratory", "credits": 1},
                            {"code": "U23BEEL213B", "name": "BEEE Laboratory", "credits": 1},
                            {"code": "U23TAM201", "name": "Tamils and Technology", "credits": 1}
                        ],
                        "3": [
                            {"code": "U23MAT301E", "name": "Applied Probability and Statistics-I", "credits": 4},
                            {"code": "U23CS301", "name": "Data Structures", "credits": 3},
                            {"code": "U23CS302", "name": "Computer Architecture", "credits": 3},
                            {"code": "U23CS303", "name": "Object Oriented Programming Using Java", "credits": 3},
                            {"code": "U23AML301", "name": "Data Visualization", "credits": 3},
                            {"code": "noc25-mg106", "name": "NPTEL: Design Thinking - A Primer", "credits": 1},
                            {"code": "U23CS306", "name": "Data Structures Laboratory", "credits": 1},
                            {"code": "U23CS307", "name": "Object Oriented Programming Using Java Laboratory", "credits": 1},
                            {"code": "U23AML302", "name": "Data Visualization Laboratory", "credits": 1},
                            {"code": "U23GE301", "name": "Soft Skills and Aptitude-I", "credits": 1}
                        ],
                        "4": [
                            {"code": "U23MAT401A", "name": "Applied Probability and Statistics-II", "credits": 4},
                            {"code": "U23CS403", "name": "Database Management Systems", "credits": 3},
                            {"code": "U23CS401", "name": "Design and Analysis of Algorithms", "credits": 3},
                            {"code": "U23AML401", "name": "Artificial Intelligence", "credits": 3},
                            {"code": "U23CSD402", "name": "Operating Systems", "credits": 3},
                            {"code": "U23AML402", "name": "Artificial Intelligence Lab", "credits": 1},
                            {"code": "U23CS405", "name": "Database Management Systems Lab", "credits": 1},
                            {"code": "U23GE401", "name": "Soft Skills and Aptitude-II", "credits": 1}
                        ],
                        "5": [
                            {"code": "U23CS504", "name": "Machine Learning", "credits": 3},
                            {"code": "U23CS501", "name": "Computer Networks", "credits": 3},
                            {"code": "U23CSD502", "name": "Software Engineering", "credits": 3},
                            {"code": "U23CS503", "name": "Theory of Computation", "credits": 3},
                            {"code": "noc25-cs135", "name": "Elective NPTEL", "credits": 3},
                            {"code": "U19CS903", "name": "Professional Elective - Agile Methodologies", "credits": 3},
                            {"code": "U23AML501", "name": "Machine Learning Laboratory", "credits": 2},
                            {"code": "U23CSD504", "name": "Software Development Laboratory", "credits": 1},
                            {"code": "U23GE501", "name": "Soft Skills and Aptitude-III", "credits": 1}
                        ],
                        "6": [
                            {"code": "U23CS601", "name": "Computer Vision", "credits": 3},
                            {"code": "U23CS602", "name": "Reinforcement Learning", "credits": 3},
                            {"code": "U23CS603", "name": "Robotics", "credits": 3},
                            {"code": "U23CS604", "name": "Cyber Security", "credits": 3},
                            {"code": "U23CS605", "name": "Blockchain Technology", "credits": 3},
                            {"code": "U23CS606", "name": "Elective III", "credits": 3},
                            {"code": "U23CS607", "name": "Project Work II", "credits": 3}
                        ],
                        "7": [
                            {"code": "U23CS701", "name": "Advanced Machine Learning", "credits": 3},
                            {"code": "U23CS702", "name": "AI Ethics and Governance", "credits": 3},
                            {"code": "U23CS703", "name": "Elective IV", "credits": 3},
                            {"code": "U23CS704", "name": "Project Work III", "credits": 3}
                        ],
                        "8": [
                            {"code": "U23CS801", "name": "Industry Internship", "credits": 6},
                            {"code": "U23CS802", "name": "Project Work IV", "credits": 6}
                        ]
                    }
                },
                "CIVIL": {
                    "name": "Civil Engineering",
                    "color": "var(--civil-color)",
                    "icon": "fas fa-building",
                    "semesters": {
                        "1": [
                            {"code": "U23CE101", "name": "Engineering Mechanics", "credits": 4},
                            {"code": "U23CE102", "name": "Engineering Graphics", "credits": 4},
                            {"code": "U23CE103", "name": "Engineering Mathematics", "credits": 4},
                            {"code": "U23CE104", "name": "Basic Civil Engineering", "credits": 3},
                            {"code": "U23CE105", "name": "Communication Skills", "credits": 2},
                            {"code": "U23CE106", "name": "Surveying", "credits": 1},
                            {"code": "U23CE107", "name": "Engineering Graphics Lab", "credits": 1}
                        ],
                        "2": [
                            {"code": "U23CE201", "name": "Building Materials", "credits": 4},
                            {"code": "U23CE202", "name": "Structural Analysis", "credits": 4},
                            {"code": "U23CE203", "name": "Fluid Mechanics", "credits": 4},
                            {"code": "U23CE204", "name": "Surveying", "credits": 3},
                            {"code": "U23CE205", "name": "Computer Programming", "credits": 3},
                            {"code": "U23CE206", "name": "Building Materials Lab", "credits": 1},
                            {"code": "U23CE207", "name": "Surveying Lab", "credits": 1}
                        ]
                    }
                },
                "BME": {
                    "name": "Bio Medical",
                    "color": "var(--bme-color)",
                    "icon": "fas fa-heartbeat",
                    "semesters": {
                        "1": [
                            {"code": "U23BM101", "name": "Human Anatomy", "credits": 4},
                            {"code": "U23BM102", "name": "Engineering Mathematics", "credits": 4},
                            {"code": "U23BM103", "name": "Basic Electronics", "credits": 3},
                            {"code": "U23BM104", "name": "Programming in C", "credits": 3},
                            {"code": "U23BM105", "name": "Communication Skills", "credits": 2},
                            {"code": "U23BM106", "name": "Human Anatomy Lab", "credits": 1},
                            {"code": "U23BM107", "name": "Programming Lab", "credits": 1}
                        ],
                        "2": [
                            {"code": "U23BM201", "name": "Human Physiology", "credits": 4},
                            {"code": "U23BM202", "name": "Biochemistry", "credits": 4},
                            {"code": "U23BM203", "name": "Medical Electronics", "credits": 4},
                            {"code": "U23BM204", "name": "Biomechanics", "credits": 3},
                            {"code": "U23BM205", "name": "Data Structures", "credits": 3},
                            {"code": "U23BM206", "name": "Human Physiology Lab", "credits": 1},
                            {"code": "U23BM207", "name": "Medical Electronics Lab", "credits": 1}
                        ]
                    }
                },
                "FT": {
                    "name": "Fashion Technology",
                    "color": "var(--ft-color)",
                    "icon": "fas fa-tshirt",
                    "semesters": {
                        "1": [
                            {"code": "U23FT101", "name": "Fiber Science", "credits": 4},
                            {"code": "U23FT102", "name": "Textile Chemistry", "credits": 4},
                            {"code": "U23FT103", "name": "Fashion Illustration", "credits": 3},
                            {"code": "U23FT104", "name": "Pattern Making", "credits": 3},
                            {"code": "U23FT105", "name": "Communication Skills", "credits": 2},
                            {"code": "U23FT106", "name": "Textile Chemistry Lab", "credits": 1},
                            {"code": "U23FT107", "name": "Pattern Making Lab", "credits": 1}
                        ],
                        "2": [
                            {"code": "U23FT201", "name": "Textile Processing", "credits": 4},
                            {"code": "U23FT202", "name": "Apparel Manufacturing", "credits": 4},
                            {"code": "U23FT203", "name": "Fashion Design", "credits": 4},
                            {"code": "U23FT204", "name": "Garment Construction", "credits": 3},
                            {"code": "U23FT205", "name": "Computer Applications", "credits": 3},
                            {"code": "U23FT206", "name": "Apparel Manufacturing Lab", "credits": 1},
                            {"code": "U23FT207", "name": "Garment Construction Lab", "credits": 1}
                        ]
                    }
                },
                "MCT": {
                    "name": "Mechatronics",
                    "color": "var(--mct-color)",
                    "icon": "fas fa-robot",
                    "semesters": {
                        "1": [
                            {"code": "U23MT101", "name": "Engineering Mechanics", "credits": 4},
                            {"code": "U23MT102", "name": "Engineering Graphics", "credits": 4},
                            {"code": "U23MT103", "name": "Engineering Mathematics", "credits": 4},
                            {"code": "U23MT104", "name": "Basic Electronics", "credits": 3},
                            {"code": "U23MT105", "name": "Communication Skills", "credits": 2},
                            {"code": "U23MT106", "name": "Workshop Practice", "credits": 1},
                            {"code": "U23MT107", "name": "Engineering Graphics Lab", "credits": 1}
                        ],
                        "2": [
                            {"code": "U23MT201", "name": "Thermodynamics", "credits": 4},
                            {"code": "U23MT202", "name": "Mechanics of Materials", "credits": 4},
                            {"code": "U23MT203", "name": "Digital Electronics", "credits": 4},
                            {"code": "U23MT204", "name": "Fluid Mechanics", "credits": 3},
                            {"code": "U23MT205", "name": "Computer Programming", "credits": 3},
                            {"code": "U23MT206", "name": "Thermodynamics Lab", "credits": 1},
                            {"code": "U23MT207", "name": "Digital Electronics Lab", "credits": 1}
                        ]
                    }
                },
                "CSD": {
                    "name": "CS & Design",
                    "color": "var(--csd-color)",
                    "icon": "fas fa-paint-brush",
                    "semesters": {
                        "1": [
                            {"code": "U23CD101", "name": "Design Fundamentals", "credits": 4},
                            {"code": "U23CD102", "name": "Programming Basics", "credits": 4},
                            {"code": "U23CD103", "name": "Visual Communication", "credits": 3},
                            {"code": "U23CD104", "name": "Mathematics for Design", "credits": 3},
                            {"code": "U23CD105", "name": "Communication Skills", "credits": 2},
                            {"code": "U23CD106", "name": "Design Studio", "credits": 1},
                            {"code": "U23CD107", "name": "Programming Lab", "credits": 1}
                        ],
                        "2": [
                            {"code": "U23CD201", "name": "User Interface Design", "credits": 4},
                            {"code": "U23CD202", "name": "Data Structures", "credits": 4},
                            {"code": "U23CD203", "name": "Web Design", "credits": 4},
                            {"code": "U23CD204", "name": "Digital Illustration", "credits": 3},
                            {"code": "U23CD205", "name": "Human-Computer Interaction", "credits": 3},
                            {"code": "U23CD206", "name": "UI Design Lab", "credits": 1},
                            {"code": "U23CD207", "name": "Web Design Lab", "credits": 1}
                        ]
                    }
                },
                "ADS": {
                    "name": "AI & Data Science",
                    "color": "var(--ads-color)",
                    "icon": "fas fa-database",
                    "semesters": {
                        "1": [
                            {"code": "U23DS101", "name": "Programming Fundamentals", "credits": 4},
                            {"code": "U23DS102", "name": "Linear Algebra", "credits": 4},
                            {"code": "U23DS103", "name": "Statistics Basics", "credits": 3},
                            {"code": "U23DS104", "name": "Computational Thinking", "credits": 3},
                            {"code": "U23DS105", "name": "Communication Skills", "credits": 2},
                            {"code": "U23DS106", "name": "Programming Lab", "credits": 1},
                            {"code": "U23DS107", "name": "Statistics Lab", "credits": 1}
                        ],
                        "2": [
                            {"code": "U23DS201", "name": "Data Structures", "credits": 4},
                            {"code": "U23DS202", "name": "Probability and Statistics", "credits": 4},
                            {"code": "U23DS203", "name": "Database Systems", "credits": 4},
                            {"code": "U23DS204", "name": "Data Visualization", "credits": 3},
                            {"code": "U23DS205", "name": "Python Programming", "credits": 3},
                            {"code": "U23DS206", "name": "Data Structures Lab", "credits": 1},
                            {"code": "U23DS207", "name": "Database Lab", "credits": 1}
                        ]
                    }
                },
                "EFE": {
                    "name": "Electrical & Computer",
                    "color": "var(--efe-color)",
                    "icon": "fas fa-microchip",
                    "semesters": {
                        "1": [
                            {"code": "U23EF101", "name": "Circuit Theory", "credits": 4},
                            {"code": "U23EF102", "name": "Programming Fundamentals", "credits": 4},
                            {"code": "U23EF103", "name": "Digital Electronics", "credits": 3},
                            {"code": "U23EF104", "name": "Engineering Mathematics", "credits": 3},
                            {"code": "U23EF105", "name": "Communication Skills", "credits": 2},
                            {"code": "U23EF106", "name": "Circuit Theory Lab", "credits": 1},
                            {"code": "U23EF107", "name": "Programming Lab", "credits": 1}
                        ],
                        "2": [
                            {"code": "U23EF201", "name": "Signals and Systems", "credits": 4},
                            {"code": "U23EF202", "name": "Data Structures", "credits": 4},
                            {"code": "U23EF203", "name": "Analog Electronics", "credits": 4},
                            {"code": "U23EF204", "name": "Electromagnetic Theory", "credits": 3},
                            {"code": "U23EF205", "name": "Computer Organization", "credits": 3},
                            {"code": "U23EF206", "name": "Analog Electronics Lab", "credits": 1},
                            {"code": "U23EF207", "name": "Data Structures Lab", "credits": 1}
                        ]
                    }
                },
                "EXE": {
                    "name": "Electronics & Computer",
                    "color": "var(--exe-color)",
                    "icon": "fas fa-desktop",
                    "semesters": {
                        "1": [
                            {"code": "U23EX101", "name": "Basic Electronics", "credits": 4},
                            {"code": "U23EX102", "name": "Programming Fundamentals", "credits": 4},
                            {"code": "U23EX103", "name": "Digital Logic Design", "credits": 3},
                            {"code": "U23EX104", "name": "Engineering Mathematics", "credits": 3},
                            {"code": "U23EX105", "name": "Communication Skills", "credits": 2},
                            {"code": "U23EX106", "name": "Electronics Lab", "credits": 1},
                            {"code": "U23EX107", "name": "Programming Lab", "credits": 1}
                        ],
                        "2": [
                            {"code": "U23EX201", "name": "Data Structures", "credits": 4},
                            {"code": "U23EX202", "name": "Analog Electronics", "credits": 4},
                            {"code": "U23EX203", "name": "Computer Organization", "credits": 4},
                            {"code": "U23EX204", "name": "Signals and Systems", "credits": 3},
                            {"code": "U23EX205", "name": "Database Systems", "credits": 3},
                            {"code": "U23EX206", "name": "Analog Electronics Lab", "credits": 1},
                            {"code": "U23EX207", "name": "Data Structures Lab", "credits": 1}
                        ]
                    }
                }
            }
        };
        
        document.addEventListener('DOMContentLoaded', () => {
            // Firebase setup
            const firebaseConfig = { 
                apiKey: "AIzaSyDCmvA9sFCSc5r4ZuFUJuGdO1LDoW7rKao", 
                authDomain: "student-portal-free.firebaseapp.com", 
                projectId: "student-portal-free", 
                storageBucket: "student-portal-free.appspot.com", 
                messagingSenderId: "272865877510", 
                appId: "1:272865877510:web:0875a2502ae55bbf9ead87" 
            };
            firebase.initializeApp(firebaseConfig);
            const auth = firebase.auth();
            const db = firebase.firestore();
            const storage = firebase.storage();
            
            // DOM Elements
            const uploadForm = document.getElementById('upload-form');
            const contentTypeSelector = document.getElementById('content-type-selector');
            const selectedContentType = document.getElementById('selected-content-type');
            const openContentTypeModalBtn = document.getElementById('open-content-type-modal-btn');
            const courseGroup = document.getElementById('course-group');
            const courseSelector = document.getElementById('course-selector');
            const selectedCourseDisplay = document.getElementById('selected-course-display');
            const openFilterBtn = document.getElementById('open-filter-modal-btn');
            const titleInput = document.getElementById('title');
            const fileUploadArea = document.getElementById('file-upload-area');
            const fileInput = document.getElementById('file-input');
            const filePreview = document.getElementById('file-preview');
            const fileName = document.getElementById('file-name');
            const fileSize = document.getElementById('file-size');
            const removeFileBtn = document.getElementById('remove-file');
            const uploadProgress = document.getElementById('upload-progress');
            const progressFill = document.getElementById('progress-fill');
            const progressText = document.getElementById('progress-text');
            const progressStatus = document.getElementById('progress-status');
            const storageOptions = document.querySelectorAll('.storage-option');
            const additionalFields = document.getElementById('additional-fields');
            const submitBtn = document.getElementById('submit-btn');
            const formMessage = document.getElementById('form-message');
            const logoutBtn = document.getElementById('logout-btn');
            const spinnerOverlay = document.getElementById('spinner-overlay');
            const pageTransition = document.getElementById('page-transition');
            const toastContainer = document.getElementById('toast-container');
            
            // Google Drive Elements
            const gdriveUploadContainer = document.getElementById('gdrive-upload-container');
            const gdriveUploadBtn = document.getElementById('gdrive-upload-btn');
            const gdriveLinkInput = document.getElementById('gdrive-link-input');
            const gdriveLinkCopy = document.getElementById('gdrive-link-copy');
            const gdriveLinkReset = document.getElementById('gdrive-link-reset');
            const driveLinkHelper = document.getElementById('drive-link-helper');
            
            // Modal elements
            const contentTypeModal = document.getElementById('content-type-modal');
            const contentTypeModalCloseBtn = document.getElementById('content-type-modal-close-btn');
            const examTypeModal = document.getElementById('exam-type-modal');
            const examTypeModalCloseBtn = document.getElementById('exam-type-modal-close-btn');
            const filterModal = document.getElementById('filter-modal');
            const filterModalCloseBtn = document.getElementById('filter-modal-close-btn');
            const filterColumns = document.querySelector('.filter-columns');
            const deptCol = document.getElementById('department-col');
            const semCol = document.getElementById('semester-col');
            const courseCol = document.getElementById('course-col');
            
            // Progress steps
            const stepDept = document.getElementById('step-dept');
            const stepSem = document.getElementById('step-sem');
            const stepCourse = document.getElementById('step-course');
            
            // State management
            let selectedContentTypeValue = null;
            let selectedExamType = null;
            let selectedDept = { code: null, name: null };
            let selectedSem = { code: null, name: null };
            let selectedCourse = { code: null, name: null };
            let selectedFile = null;
            let selectedStorage = 'firebase';
            let gdriveLink = '';
            
            // Initialize the page
            function initializePage() {
                setupEventListeners();
                checkAuthentication();
            }
            
            // Setup event listeners
            function setupEventListeners() {
                // Content type selector
                contentTypeSelector.addEventListener('click', openContentTypeModal);
                openContentTypeModalBtn.addEventListener('click', openContentTypeModal);
                contentTypeModalCloseBtn.addEventListener('click', closeContentTypeModal);
                contentTypeModal.addEventListener('click', e => {
                    if (e.target === contentTypeModal) closeContentTypeModal();
                });
                
                // Content type options
                document.querySelectorAll('.content-type-option').forEach(option => {
                    option.addEventListener('click', handleContentTypeSelection);
                });
                
                // Exam type modal
                examTypeModalCloseBtn.addEventListener('click', closeExamTypeModal);
                examTypeModal.addEventListener('click', e => {
                    if (e.target === examTypeModal) closeExamTypeModal();
                });
                
                // Exam type options
                document.querySelectorAll('.exam-type-option').forEach(option => {
                    option.addEventListener('click', handleExamTypeSelection);
                });
                
                // Course selector modal
                openFilterBtn.addEventListener('click', openCourseSelector);
                filterModalCloseBtn.addEventListener('click', closeCourseSelector);
                filterModal.addEventListener('click', e => {
                    if (e.target === filterModal) closeCourseSelector();
                });
                
                // Course selection
                deptCol.addEventListener('click', handleDeptSelection);
                semCol.addEventListener('click', handleSemSelection);
                courseCol.addEventListener('click', handleCourseSelection);
                
                document.querySelectorAll('.filter-back-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        if (btn.dataset.target === 'department') {
                            filterColumns.classList.remove('show-semesters', 'show-courses');
                            updateProgressStep('dept');
                        } else if (btn.dataset.target === 'semester') {
                            filterColumns.classList.remove('show-courses');
                            updateProgressStep('sem');
                        }
                    });
                });
                
                // File upload
                fileUploadArea.addEventListener('click', () => fileInput.click());
                fileUploadArea.addEventListener('dragover', handleDragOver);
                fileUploadArea.addEventListener('dragleave', handleDragLeave);
                fileUploadArea.addEventListener('drop', handleDrop);
                fileInput.addEventListener('change', handleFileSelect);
                removeFileBtn.addEventListener('click', removeFile);
                
                // Storage options
                storageOptions.forEach(option => {
                    option.addEventListener('click', () => {
                        storageOptions.forEach(opt => opt.classList.remove('selected'));
                        option.classList.add('selected');
                        selectedStorage = option.dataset.storage;
                        
                        // Show/hide Google Drive container
                        if (selectedStorage === 'gdrive') {
                            gdriveUploadContainer.classList.add('show');
                            driveLinkHelper.classList.add('show');
                        } else {
                            gdriveUploadContainer.classList.remove('show');
                            driveLinkHelper.classList.remove('show');
                        }
                    });
                });
                
                // Google Drive functionality
                gdriveUploadBtn.addEventListener('click', handleGoogleDriveUpload);
                gdriveLinkCopy.addEventListener('click', copyGoogleDriveLink);
                gdriveLinkReset.addEventListener('click', resetGoogleDriveLink);
                
                // Form submission
                uploadForm.addEventListener('submit', handleFormSubmit);
                logoutBtn.addEventListener('click', handleLogout);
            }
            
            // Check authentication
            function checkAuthentication() {
                auth.onAuthStateChanged(user => {
                    if (!user) {
                        pageTransition.classList.add('active');
                        setTimeout(() => {
                            window.location.replace('/index.html');
                        }, 500);
                        return;
                    }
                    
                    db.collection('users').doc(user.uid).get().then(doc => {
                        if (!doc.exists || doc.data().role !== 'admin') {
                            pageTransition.classList.add('active');
                            setTimeout(() => {
                                window.location.replace('/studentdashboard.html');
                            }, 500);
                        }
                    }).catch(err => {
                        console.error('Error checking user role:', err);
                        showToast('Authentication error. Please try again.', 'error');
                        auth.signOut();
                    });
                });
            }
            
            // Open content type modal
            function openContentTypeModal() {
                contentTypeModal.classList.add('active');
            }
            
            // Close content type modal
            function closeContentTypeModal() {
                contentTypeModal.classList.remove('active');
            }
            
            // Handle content type selection
            function handleContentTypeSelection(e) {
                const option = e.currentTarget;
                const type = option.dataset.type;
                
                // Update UI
                document.querySelectorAll('.content-type-option').forEach(opt => {
                    opt.classList.remove('selected');
                });
                option.classList.add('selected');
                
                // Update state
                selectedContentTypeValue = type;
                
                // Update display
                const typeNames = {
                    'materials': 'Study Material',
                    'pyqs': 'PYQ / Question Bank',
                    'seminars': 'Seminar (YouTube)',
                    'quizzes': 'Quiz (Google Form)'
                };
                selectedContentType.innerHTML = `<strong>${typeNames[type]}</strong>`;
                
                // Close modal
                closeContentTypeModal();
                
                // Show/hide course selection based on content type
                if (type === 'materials' || type === 'pyqs') {
                    courseGroup.style.display = 'block';
                } else {
                    courseGroup.style.display = 'none';
                }
                
                // Handle additional fields based on content type
                updateAdditionalFields();
                
                // If PYQs, open exam type modal
                if (type === 'pyqs') {
                    setTimeout(() => {
                        examTypeModal.classList.add('active');
                    }, 300);
                }
            }
            
            // Update additional fields based on content type
            function updateAdditionalFields() {
                let fieldsHTML = '';
                
                switch (selectedContentTypeValue) {
                    case 'materials':
                        fieldsHTML = `
                            <div class="form-group">
                                <label for="description">
                                    <i class="fas fa-align-left"></i> Description
                                </label>
                                <textarea id="description" name="description" rows="3" placeholder="Enter a brief description of the material"></textarea>
                            </div>
                            <div class="form-group">
                                <label for="thumbnailURL">
                                    <i class="fas fa-image"></i> Thumbnail URL
                                </label>
                                <input type="url" id="thumbnailURL" name="thumbnailURL" placeholder="https://example.com/image.jpg">
                                <div id="thumbnail-preview" class="thumbnail-preview">
                                    <img id="thumbnail-img" src="" alt="Thumbnail preview">
                                    <button type="button" id="remove-thumbnail" class="remove-thumbnail">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="checkbox-group">
                                    <input type="checkbox" id="isPaid" name="isPaid">
                                    <label for="isPaid">Premium Content</label>
                                </div>
                            </div>
                        `;
                        break;
                    case 'pyqs':
                        fieldsHTML = `
                            <div class="form-group">
                                <label for="year">
                                    <i class="fas fa-calendar-alt"></i> Year
                                </label>
                                <input type="number" id="year" name="year" min="2020" max="2030" placeholder="2024">
                            </div>
                        `;
                        break;
                    case 'seminars':
                        fieldsHTML = `
                            <div class="form-group">
                                <label for="speaker">
                                    <i class="fas fa-user-tie"></i> Speaker Name
                                </label>
                                <input type="text" id="speaker" name="speaker" placeholder="Enter speaker name">
                            </div>
                            <div class="form-group">
                                <label for="youtubeURL">
                                    <i class="fab fa-youtube"></i> YouTube URL
                                </label>
                                <input type="url" id="youtubeURL" name="youtubeURL" placeholder="https://youtube.com/watch?v=...">
                            </div>
                        `;
                        break;
                    case 'quizzes':
                        fieldsHTML = `
                            <div class="form-group">
                                <label for="topic">
                                    <i class="fas fa-tag"></i> Quiz Topic
                                </label>
                                <input type="text" id="topic" name="topic" placeholder="Enter quiz topic">
                            </div>
                            <div class="form-group">
                                <label for="googleFormURL">
                                    <i class="fab fa-google"></i> Google Form URL
                                </label>
                                <input type="url" id="googleFormURL" name="googleFormURL" placeholder="https://forms.gle/...">
                            </div>
                        `;
                        break;
                }
                
                additionalFields.innerHTML = fieldsHTML;
                
                // Add event listeners for thumbnail preview if materials
                if (selectedContentTypeValue === 'materials') {
                    const thumbnailURL = document.getElementById('thumbnailURL');
                    const thumbnailPreview = document.getElementById('thumbnail-preview');
                    const thumbnailImg = document.getElementById('thumbnail-img');
                    const removeThumbnail = document.getElementById('remove-thumbnail');
                    
                    thumbnailURL.addEventListener('input', () => {
                        const url = thumbnailURL.value.trim();
                        if (url) {
                            thumbnailImg.src = url;
                            thumbnailImg.onload = function() {
                                thumbnailPreview.style.display = 'block';
                            };
                            thumbnailImg.onerror = function() {
                                thumbnailPreview.style.display = 'none';
                                showToast('Invalid image URL', 'error');
                            };
                        } else {
                            thumbnailPreview.style.display = 'none';
                        }
                    });
                    
                    removeThumbnail.addEventListener('click', () => {
                        thumbnailURL.value = '';
                        thumbnailPreview.style.display = 'none';
                    });
                }
            }
            
            // Open exam type modal
            function openExamTypeModal() {
                examTypeModal.classList.add('active');
            }
            
            // Close exam type modal
            function closeExamTypeModal() {
                examTypeModal.classList.remove('active');
            }
            
            // Handle exam type selection
            function handleExamTypeSelection(e) {
                const option = e.currentTarget;
                const examType = option.dataset.exam;
                
                // Update UI
                document.querySelectorAll('.exam-type-option').forEach(opt => {
                    opt.classList.remove('selected');
                });
                option.classList.add('selected');
                
                // Update state
                selectedExamType = examType;
                
                // Close modal
                closeExamTypeModal();
            }
            
            // Open course selector modal
            function openCourseSelector() {
                // Reset state
                selectedDept = { code: null, name: null };
                selectedSem = { code: null, name: null };
                selectedCourse = { code: null, name: null };
                
                // Reset UI
                filterColumns.classList.remove('show-semesters', 'show-courses');
                semCol.classList.add('disabled');
                courseCol.classList.add('disabled');
                semCol.querySelector('.filter-column-list').innerHTML = '';
                courseCol.querySelector('.filter-column-list').innerHTML = '';
                updateProgressStep('dept');
                
                // Populate departments
                populateDepartments();
                
                // Open modal
                filterModal.classList.add('active');
            }
            
            // Close course selector modal
            function closeCourseSelector() {
                filterModal.classList.remove('active');
            }
            
            // Update progress step
            function updateProgressStep(step) {
                // Reset all steps
                stepDept.classList.remove('active', 'completed');
                stepSem.classList.remove('active', 'completed');
                stepCourse.classList.remove('active', 'completed');
                
                // Set steps based on current step
                if (step === 'dept') {
                    stepDept.classList.add('active');
                } else if (step === 'sem') {
                    stepDept.classList.add('completed');
                    stepSem.classList.add('active');
                } else if (step === 'course') {
                    stepDept.classList.add('completed');
                    stepSem.classList.add('completed');
                    stepCourse.classList.add('active');
                }
            }
            
            // Populate departments
            function populateDepartments() {
                const deptList = deptCol.querySelector('.filter-column-list');
                deptList.innerHTML = '';
                
                Object.keys(academicData.branches).forEach(branchCode => {
                    const branch = academicData.branches[branchCode];
                    const item = document.createElement('div');
                    item.className = 'filter-item';
                    item.innerHTML = `<i class="${branch.icon}"></i> ${branch.name}`;
                    item.dataset.code = branchCode;
                    item.dataset.name = branch.name;
                    deptList.appendChild(item);
                });
            }
            
            // Populate semesters
            function populateSemesters() {
                const semList = semCol.querySelector('.filter-column-list');
                semList.innerHTML = '';
                
                const branchData = academicData.branches[selectedDept.code];
                Object.keys(branchData.semesters).forEach(sem => {
                    const item = document.createElement('div');
                    item.className = 'filter-item';
                    item.textContent = `Semester ${sem}`;
                    item.dataset.code = sem;
                    semList.appendChild(item);
                });
                
                semCol.classList.remove('disabled');
            }
            
            // Populate courses
            function populateCourses() {
                const courseList = courseCol.querySelector('.filter-column-list');
                courseList.innerHTML = '';
                
                const subjects = academicData.branches[selectedDept.code].semesters[selectedSem.code];
                if (subjects && subjects.length > 0) {
                    subjects.forEach(subject => {
                        const item = document.createElement('div');
                        item.className = 'filter-item';
                        item.textContent = `${subject.code} - ${subject.name}`;
                        item.dataset.code = subject.code;
                        item.dataset.name = subject.name;
                        courseList.appendChild(item);
                    });
                } else {
                    courseList.innerHTML = '<p style="padding: 12px 15px;">No courses found.</p>';
                }
                
                courseCol.classList.remove('disabled');
            }
            
            // Handle department selection
            function handleDeptSelection(e) {
                if (!e.target.classList.contains('filter-item')) return;
                
                selectedDept = { 
                    code: e.target.dataset.code, 
                    name: e.target.dataset.name 
                };
                
                updateSelectedUI(deptCol, e.target);
                updateProgressStep('sem');
                
                semCol.querySelector('.filter-column-list').innerHTML = '';
                courseCol.querySelector('.filter-column-list').innerHTML = '';
                semCol.classList.remove('disabled'); 
                courseCol.classList.add('disabled');
                
                populateSemesters();
                filterColumns.classList.add('show-semesters');
            }
            
            // Handle semester selection
            function handleSemSelection(e) {
                if (!e.target.classList.contains('filter-item')) return;
                
                selectedSem = { 
                    code: e.target.dataset.code, 
                    name: e.target.textContent 
                };
                
                updateSelectedUI(semCol, e.target);
                updateProgressStep('course');
                
                courseCol.querySelector('.filter-column-list').innerHTML = '';
                courseCol.classList.add('disabled');
                
                populateCourses();
                filterColumns.classList.add('show-courses');
            }
            
            // Handle course selection
            function handleCourseSelection(e) {
                if (!e.target.classList.contains('filter-item')) return;
                
                selectedCourse = { 
                    code: e.target.dataset.code, 
                    name: e.target.dataset.name 
                };
                
                updateSelectedUI(courseCol, e.target);
                
                // Close modal
                closeCourseSelector();
                
                // Update display
                if (selectedContentTypeValue === 'pyqs' && selectedExamType) {
                    selectedCourseDisplay.innerHTML = `<strong>${selectedCourse.code}</strong> - ${selectedCourse.name} (${selectedExamType})`;
                } else {
                    selectedCourseDisplay.innerHTML = `<strong>${selectedCourse.code}</strong> - ${selectedCourse.name}`;
                }
            }
            
            // Update selected UI
            function updateSelectedUI(column, selectedElement) {
                [...column.querySelectorAll('.filter-item')].forEach(item => {
                    item.classList.remove('selected');
                });
                selectedElement.classList.add('selected');
            }
            
            // Handle file drag over
            function handleDragOver(e) {
                e.preventDefault();
                fileUploadArea.classList.add('dragover');
            }
            
            // Handle file drag leave
            function handleDragLeave(e) {
                e.preventDefault();
                fileUploadArea.classList.remove('dragover');
            }
            
            // Handle file drop
            function handleDrop(e) {
                e.preventDefault();
                fileUploadArea.classList.remove('dragover');
                
                const files = e.dataTransfer.files;
                if (files.length > 0) {
                    handleFile(files[0]);
                }
            }
            
            // Handle file select
            function handleFileSelect(e) {
                const files = e.target.files;
                if (files.length > 0) {
                    handleFile(files[0]);
                }
            }
            
            // Handle file
            function handleFile(file) {
                selectedFile = file;
                
                // Update file preview
                fileName.textContent = file.name;
                fileSize.textContent = formatFileSize(file.size);
                filePreview.classList.add('show');
                
                // Reset file input
                fileInput.value = '';
            }
            
            // Format file size
            function formatFileSize(bytes) {
                if (bytes === 0) return '0 Bytes';
                const k = 1024;
                const sizes = ['Bytes', 'KB', 'MB', 'GB'];
                const i = Math.floor(Math.log(bytes) / Math.log(k));
                return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
            }
            
            // Remove file
            function removeFile() {
                selectedFile = null;
                filePreview.classList.remove('show');
                fileInput.value = '';
            }
            
            // Handle Google Drive upload
            function handleGoogleDriveUpload() {
                // In a real implementation, this would open the Google Drive API picker
                // For this demo, we'll show a prompt for the user to manually enter the link
                const link = prompt('Please enter the Google Drive shareable link:');
                if (link) {
                    // Validate that it's a Google Drive link
                    if (link.includes('drive.google.com')) {
                        gdriveLink = link;
                        gdriveLinkInput.value = link;
                        showToast('Google Drive link added successfully!', 'success');
                    } else {
                        showToast('Please enter a valid Google Drive link', 'error');
                    }
                }
            }
            
            // Copy Google Drive link
            function copyGoogleDriveLink() {
                if (gdriveLink) {
                    navigator.clipboard.writeText(gdriveLink).then(() => {
                        showToast('Link copied to clipboard!', 'success');
                    }).catch(err => {
                        showToast('Failed to copy link', 'error');
                    });
                }
            }
            
            // Reset Google Drive link
            function resetGoogleDriveLink() {
                gdriveLink = '';
                gdriveLinkInput.value = '';
                showToast('Link reset', 'info');
            }
            
            // Handle form submission
            async function handleFormSubmit(e) {
                e.preventDefault();
                
                // Validate form
                if (!validateForm()) {
                    return;
                }
                
                // Show loading state
                submitBtn.disabled = true;
                submitBtn.classList.add('loading');
                formMessage.classList.remove('show');
                
                try {
                    let downloadURL = '';
                    
                    // Handle file upload based on storage option
                    if (selectedStorage === 'firebase' && selectedFile) {
                        // Upload to Firebase Storage
                        const storageRef = storage.ref(`${selectedContentTypeValue}/${selectedFile.name}`);
                        const uploadTask = storageRef.put(selectedFile);
                        
                        // Show progress
                        uploadProgress.classList.add('show');
                        
                        // Monitor upload progress
                        uploadTask.on('state_changed', 
                            (snapshot) => {
                                const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
                                progressFill.style.width = `${progress}%`;
                                progressText.textContent = `${Math.round(progress)}%`;
                                
                                if (snapshot.state === 'running') {
                                    progressStatus.textContent = 'Uploading...';
                                }
                            }, 
                            (error) => {
                                console.error('Upload error:', error);
                                showToast('Upload failed. Please try again.', 'error');
                                resetFormState();
                            }, 
                            async () => {
                                // Upload completed successfully
                                downloadURL = await uploadTask.snapshot.ref.getDownloadURL();
                                progressStatus.textContent = 'Upload complete!';
                                await saveToDatabase(downloadURL);
                            }
                        );
                    } else if (selectedStorage === 'gdrive') {
                        // For Google Drive, use the provided link
                        if (gdriveLink) {
                            downloadURL = gdriveLink;
                            await saveToDatabase(downloadURL);
                        } else {
                            showToast('Please provide a Google Drive link', 'error');
                            resetFormState();
                            return;
                        }
                    } else {
                        // No file to upload, just save metadata
                        await saveToDatabase('');
                    }
                } catch (error) {
                    console.error('Error:', error);
                    showToast('An error occurred. Please try again.', 'error');
                    resetFormState();
                }
            }
            
            // Save to database
            async function saveToDatabase(downloadURL) {
                const collectionName = selectedContentTypeValue;
                const data = {
                    title: titleInput.value.trim(),
                    uploadedAt: firebase.firestore.FieldValue.serverTimestamp(),
                    uploadedBy: auth.currentUser.email,
                    storageLocation: selectedStorage
                };
                
                // Prepare data based on content type
                switch(collectionName) {
                    case 'materials':
                        data.department = selectedDept.code;
                        data.semester = selectedSem.code;
                        data.courseCode = selectedCourse.code;
                        data.downloadURL = downloadURL;
                        data.isPaid = document.getElementById('isPaid')?.checked || false;
                        data.thumbnailURL = document.getElementById('thumbnailURL')?.value.trim() || '';
                        data.description = document.getElementById('description')?.value.trim() || '';
                        break;
                    case 'pyqs':
                        data.department = selectedDept.code;
                        data.semester = selectedSem.code;
                        data.courseCode = selectedCourse.code;
                        data.examType = selectedExamType;
                        data.downloadURL = downloadURL;
                        data.year = Number(document.getElementById('year')?.value) || null;
                        break;
                    case 'seminars':
                        data.speaker = document.getElementById('speaker')?.value.trim() || '';
                        data.youtubeURL = document.getElementById('youtubeURL')?.value.trim() || '';
                        break;
                    case 'quizzes':
                        data.topic = document.getElementById('topic')?.value.trim() || '';
                        data.googleFormURL = document.getElementById('googleFormURL')?.value.trim() || '';
                        break;
                }
                
                // Add to Firestore
                await db.collection(collectionName).add(data);
                
                // Show success message
                showToast('Content uploaded successfully!', 'success');
                formMessage.textContent = 'Content uploaded successfully!';
                formMessage.className = 'message success show';
                
                // Reset form
                resetForm();
                resetFormState();
            }
            
            // Validate form
            function validateForm() {
                if (!selectedContentTypeValue) {
                    showToast('Please select a content type', 'error');
                    return false;
                }
                
                const title = titleInput.value.trim();
                if (!title) {
                    showToast('Please enter a title', 'error');
                    return false;
                }
                
                // Validate based on content type
                switch (selectedContentTypeValue) {
                    case 'materials':
                    case 'pyqs':
                        if (!selectedDept.code || !selectedSem.code || !selectedCourse.code) {
                            showToast('Please select a course', 'error');
                            return false;
                        }
                        
                        if (selectedStorage === 'firebase' && !selectedFile) {
                            showToast('Please select a file to upload', 'error');
                            return false;
                        }
                        
                        if (selectedStorage === 'gdrive' && !gdriveLink) {
                            showToast('Please provide a Google Drive link', 'error');
                            return false;
                        }
                        
                        if (selectedContentTypeValue === 'pyqs' && !selectedExamType) {
                            showToast('Please select an exam type', 'error');
                            return false;
                        }
                        break;
                    
                    case 'seminars':
                        const speaker = document.getElementById('speaker')?.value.trim();
                        const youtubeURL = document.getElementById('youtubeURL')?.value.trim();
                        
                        if (!speaker) {
                            showToast('Please enter a speaker name', 'error');
                            return false;
                        }
                        
                        if (!youtubeURL) {
                            showToast('Please enter a YouTube URL', 'error');
                            return false;
                        }
                        break;
                    
                    case 'quizzes':
                        const topic = document.getElementById('topic')?.value.trim();
                        const googleFormURL = document.getElementById('googleFormURL')?.value.trim();
                        
                        if (!topic) {
                            showToast('Please enter a quiz topic', 'error');
                            return false;
                        }
                        
                        if (!googleFormURL) {
                            showToast('Please enter a Google Form URL', 'error');
                            return false;
                        }
                        break;
                }
                
                return true;
            }
            
            // Reset form
            function resetForm() {
                uploadForm.reset();
                selectedContentTypeValue = null;
                selectedExamType = null;
                selectedDept = { code: null, name: null };
                selectedSem = { code: null, name: null };
                selectedCourse = { code: null, name: null };
                selectedFile = null;
                selectedStorage = 'firebase';
                gdriveLink = '';
                
                // Reset UI
                selectedContentType.innerHTML = '<strong>No content type selected</strong>';
                selectedCourseDisplay.innerHTML = '<strong>No course selected</strong>';
                courseGroup.style.display = 'none';
                filePreview.classList.remove('show');
                uploadProgress.classList.remove('show');
                additionalFields.innerHTML = '';
                gdriveUploadContainer.classList.remove('show');
                driveLinkHelper.classList.remove('show');
                
                // Reset content type options
                document.querySelectorAll('.content-type-option').forEach(opt => {
                    opt.classList.remove('selected');
                });
                
                // Reset exam type options
                document.querySelectorAll('.exam-type-option').forEach(opt => {
                    opt.classList.remove('selected');
                });
                
                // Reset storage options
                storageOptions.forEach(opt => opt.classList.remove('selected'));
                storageOptions[0].classList.add('selected');
            }
            
            // Reset form state
            function resetFormState() {
                submitBtn.disabled = false;
                submitBtn.classList.remove('loading');
                uploadProgress.classList.remove('show');
                progressFill.style.width = '0%';
                progressText.textContent = '0%';
                progressStatus.textContent = 'Uploading...';
            }
            
            // Handle logout
            function handleLogout() {
                spinnerOverlay.classList.add('active');
                
                auth.signOut()
                    .then(() => {
                        showToast('Logged out successfully', 'info');
                        pageTransition.classList.add('active');
                        setTimeout(() => {
                            window.location.replace('/index.html');
                        }, 500);
                    })
                    .catch(err => {
                        console.error('Logout error:', err);
                        showToast('Logout failed. Please try again.', 'error');
                        spinnerOverlay.classList.remove('active');
                    });
            }
            
            // Show toast notification
            function showToast(message, type = 'info') {
                const toast = document.createElement('div');
                toast.className = `toast ${type}`;
                
                let icon = 'fa-info-circle';
                if (type === 'success') icon = 'fa-check-circle';
                if (type === 'error') icon = 'fa-exclamation-circle';
                
                toast.innerHTML = `
                    <i class=\"fas ${icon}\"></i>
                    <div class=\"toast-content\">
                        <div class=\"toast-title\">${type.charAt(0).toUpperCase() + type.slice(1)}</div>
                        <div class=\"toast-message\">${message}</div>
                    </div>
                `;
                
                toastContainer.appendChild(toast);
                
                // Trigger animation
                setTimeout(() => {
                    toast.classList.add('show');
                }, 10);
                
                // Remove toast after 4 seconds
                setTimeout(() => {
                    toast.classList.remove('show');
                    setTimeout(() => {
                        toastContainer.removeChild(toast);
                    }, 300);
                }, 4000);
            }
            
            // Initialize page
            initializePage();
        });
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Dashboard | IB STUDIOZ</title>
    
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cpath fill='%23FFD700' d='M50,2 A48,48 0 1,0 50,98 A48,48 0 1,0 50,2 Z' /%3E%3Cg fill='%230A0A0A'%3E%3Cpath d='M28,25 h10 v50 h-10 Z' /%3E%3Cpath d='M45,25 H60 A12.5,12.5 0 0,1 60,50 H45 Z M45,50 H63 A12.5,12.5 0 0,1 63,75 H45 Z' /%3E%3C/g%3E%3C/svg%3E">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-glow: #FFD700; --secondary-glow: #00A2FF; --accent-glow: #FF6B6B; --dark-bg: #0A0A0A;
            --text-primary: #F0F0F0; --text-secondary: #A0A0A0; --text-muted: #666; --card-bg: rgba(22, 22, 22, 0.8);
            --border-color: rgba(255, 215, 0, 0.2); --shadow-color: rgba(0, 0, 0, 0.5);
            --danger: #e74c3c; --success: #2ecc71; --info: #3498db; --details: #9b59b6; --warning: #f39c12;
            --glass-bg: rgba(255, 255, 255, 0.05); --glass-border: rgba(255, 255, 255, 0.1);
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Inter', sans-serif; background-color: var(--dark-bg);
            color: var(--text-primary); line-height: 1.6; min-height: 100vh;
            opacity: 0; animation: page-fade-in 0.8s ease-out forwards;
        }
        @keyframes page-fade-in { to { opacity: 1; } }
        
        /* Enhanced Background */
        .background-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -2; overflow: hidden; }
        .aurora-layer { position: absolute; top: 0; left: 0; width: 120%; height: 120%; 
            background: 
                radial-gradient(circle at 10% 20%, var(--primary-glow) 0%, transparent 25%), 
                radial-gradient(circle at 80% 30%, var(--secondary-glow) 0%, transparent 30%), 
                radial-gradient(circle at 50% 80%, var(--accent-glow) 0%, transparent 25%),
                radial-gradient(circle at 20% 70%, var(--details) 0%, transparent 35%); 
            animation: aurora-morph 60s linear infinite alternate; 
            filter: blur(140px); opacity: 0.15; 
        }
        @keyframes aurora-morph { 
            0% { transform: rotate(0deg) scale(1.2); } 
            50% { transform: rotate(180deg) scale(1.5); } 
            100% { transform: rotate(360deg) scale(1.8); } 
        }
        .noise-layer { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; 
            background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 800"><filter id="noise"><feTurbulence type="fractalNoise" baseFrequency="0.65" numOctaves="3" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(%23noise)"/></svg>'); 
            opacity: 0.02; 
        }
        
        /* Enhanced Header */
        .page-header { 
            display: flex; justify-content: space-between; align-items: center; 
            padding: 20px 40px; margin: 20px; 
            background: var(--glass-bg); backdrop-filter: blur(25px); 
            border-radius: 20px; border: 1px solid var(--glass-border); 
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
            position: relative; overflow: hidden;
        }
        .page-header::before {
            content: ''; position: absolute; top: 0; left: 0; right: 0; height: 1px;
            background: linear-gradient(90deg, transparent, var(--primary-glow), transparent);
            opacity: 0.5;
        }
        .brand-logo { display: flex; align-items: center; gap: 15px; text-decoration: none; }
        .header-logo-svg { width: 50px; height: auto; filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.3)); }
        .brand-title { 
            position: relative; font-size: 1.6rem; font-weight: 800; 
            background: linear-gradient(135deg, #ff00ff, #00ffea, #ffdd00, #ff6b6b, #ff00ff); 
            background-size: 400% 100%; -webkit-background-clip: text; background-clip: text; 
            color: transparent; animation: rgb-text-flow 8s linear infinite; 
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
        }
        @keyframes rgb-text-flow { to { background-position: 400% 0; } }
        
        /* Enhanced Buttons */
        .btn-secondary { 
            background: var(--glass-bg); border: 1px solid var(--glass-border); 
            color: var(--text-secondary); padding: 12px 24px; border-radius: 12px; 
            font-size: 0.9rem; font-weight: 600; cursor: pointer; 
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); 
            backdrop-filter: blur(10px); position: relative; overflow: hidden;
            z-index: 1;
        }
        .btn-secondary::before {
            content: ''; position: absolute; top: 50%; left: 50%; width: 0; height: 0;
            border-radius: 50%; background: rgba(255, 255, 255, 0.2);
            transform: translate(-50%, -50%); transition: width 0.6s, height 0.6s;
            z-index: -1;
        }
        .btn-secondary:hover::before { width: 300px; height: 300px; }
        .btn-secondary:hover { 
            background: var(--primary-glow); color: var(--dark-bg); 
            border-color: var(--primary-glow); 
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.4); 
            transform: translateY(-2px);
        }
        
        /* Dashboard Overview Cards */
        .dashboard-overview {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); 
            gap: 20px; margin: 20px 0 40px 0; padding: 0 20px;
        }
        .overview-card {
            background: var(--glass-bg); backdrop-filter: blur(20px);
            border-radius: 16px; border: 1px solid var(--glass-border);
            padding: 20px; text-align: center; position: relative; overflow: hidden;
            transition: all 0.3s ease; animation: card-fade-in 0.6s ease-out forwards;
            opacity: 0;
        }
        .overview-card:nth-child(1) { animation-delay: 0.1s; }
        .overview-card:nth-child(2) { animation-delay: 0.2s; }
        .overview-card:nth-child(3) { animation-delay: 0.3s; }
        .overview-card:nth-child(4) { animation-delay: 0.4s; }
        .overview-card:nth-child(5) { animation-delay: 0.5s; }
        .overview-card:nth-child(6) { animation-delay: 0.6s; }
        .overview-card::before {
            content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background: linear-gradient(135deg, transparent, rgba(255,215,0,0.05), transparent);
            opacity: 0; transition: opacity 0.3s ease;
            z-index: -1;
        }
        .overview-card::after {
            content: ''; position: absolute; top: -50%; right: -50%; width: 200%; height: 200%;
            background: radial-gradient(circle, rgba(255,215,0,0.1) 0%, transparent 70%);
            opacity: 0; transition: opacity 0.5s ease; z-index: -1;
        }
        .overview-card:hover::before { opacity: 1; }
        .overview-card:hover::after { opacity: 1; }
        .overview-card:hover { transform: translateY(-5px) scale(1.02); }
        .overview-number {
            font-size: 2.5rem; font-weight: 800; margin-bottom: 5px;
            background: linear-gradient(45deg, var(--primary-glow), var(--secondary-glow));
            -webkit-background-clip: text; background-clip: text; color: transparent;
        }
        .overview-label { font-size: 0.9rem; color: var(--text-secondary); font-weight: 500; }
        
        .container { max-width: 1400px; margin: 0 auto; padding: 20px; }
        .hidden { display: none !important; }
        
        /* Enhanced Welcome Section */
        .welcome-header-pro { 
            padding: 50px 0; margin-bottom: 40px; text-align: left; 
            border-left: 5px solid; 
            border-image: linear-gradient(135deg, var(--primary-glow), var(--secondary-glow), var(--accent-glow)) 1; 
            padding-left: 40px; position: relative;
        }
        .welcome-header-pro::after {
            content: ''; position: absolute; left: 0; top: 0; bottom: 0; width: 5px;
            background: linear-gradient(135deg, var(--primary-glow), var(--secondary-glow), var(--accent-glow));
            filter: blur(3px); opacity: 0.7;
        }
        .welcome-header-pro h1 { 
            font-size: clamp(2.5rem, 5vw, 3.8rem); font-weight: 800; 
            line-height: 1.1; margin-bottom: 15px; 
            background: linear-gradient(135deg, var(--text-primary), var(--primary-glow));
            -webkit-background-clip: text; background-clip: text; color: transparent;
        }
        #student-name { 
            color: var(--primary-glow); text-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
            animation: glow-pulse 2s ease-in-out infinite alternate;
        }
        @keyframes glow-pulse { 
            from { text-shadow: 0 0 20px rgba(255, 215, 0, 0.3); }
            to { text-shadow: 0 0 30px rgba(255, 215, 0, 0.6), 0 0 40px rgba(255, 215, 0, 0.3); }
        }
        .welcome-header-pro p { 
            font-size: 1.2rem; color: var(--text-secondary); max-width: 700px; 
            font-weight: 400; letter-spacing: 0.5px;
        }
        
        /* Dashboard Grid */
        .dashboard-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); 
            gap: 30px; margin-bottom: 60px; 
        }
        
        /* Enhanced Navigation Cards */
        .nav-card { 
            background: var(--glass-bg); backdrop-filter: blur(25px);
            border-radius: 20px; border: 1px solid var(--glass-border); 
            padding: 35px 30px; text-decoration: none; 
            box-shadow: 0 12px 40px rgba(0,0,0,0.3); 
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); 
            cursor: pointer; opacity: 0; 
            animation: card-fade-in 0.6s ease-out forwards;
            position: relative; overflow: hidden;
        }
        .nav-card::before {
            content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px;
            background: linear-gradient(90deg, var(--primary-glow), var(--secondary-glow), var(--accent-glow));
            transform: translateX(-100%); transition: transform 0.6s ease;
        }
        .nav-card::after {
            content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background: radial-gradient(circle at center, rgba(255,255,255,0.05) 0%, transparent 70%);
            opacity: 0; transition: opacity 0.3s ease; pointer-events: none;
        }
        .nav-card:hover::before { transform: translateX(0); }
        .nav-card:hover::after { opacity: 1; }
        @keyframes card-fade-in { 
            from { opacity: 0; transform: translateY(30px) scale(0.95); } 
            to { opacity: 1; transform: translateY(0) scale(1); } 
        }
        .nav-card:nth-child(1) { animation-delay: 0.1s; } 
        .nav-card:nth-child(2) { animation-delay: 0.2s; } 
        .nav-card:nth-child(3) { animation-delay: 0.3s; }
        .nav-card:nth-child(4) { animation-delay: 0.4s; } 
        .nav-card:nth-child(5) { animation-delay: 0.5s; }
        .nav-card:nth-child(6) { animation-delay: 0.6s; }
        .nav-card:nth-child(7) { animation-delay: 0.7s; }
        .nav-card:hover { 
            transform: translateY(-12px) scale(1.02); 
            border-color: var(--card-color, var(--primary-glow)); 
            box-shadow: 0 20px 60px rgba(0,0,0,0.4), 0 0 40px var(--card-color, var(--primary-glow))20;
        }
        .nav-card-header { 
            display: flex; align-items: center; justify-content: space-between; 
            margin-bottom: 20px; 
        }
        .nav-card-icon { 
            font-size: 2.8rem; color: var(--card-color, var(--primary-glow)); 
            transition: all 0.4s ease; filter: drop-shadow(0 0 10px var(--card-color, var(--primary-glow))30);
        }
        .nav-card:hover .nav-card-icon { 
            transform: scale(1.15) rotate(5deg); 
            filter: drop-shadow(0 0 20px var(--card-color, var(--primary-glow))50);
        }
        .nav-card-arrow { 
            font-size: 1.8rem; color: var(--text-secondary); opacity: 0; 
            transform: translateX(-15px); transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); 
        }
        .nav-card:hover .nav-card-arrow { 
            opacity: 1; transform: translateX(5px); 
            color: var(--card-color, var(--primary-glow));
        }
        .nav-card h3 { 
            font-size: 1.4rem; margin-bottom: 10px; color: var(--text-primary); 
            text-align: left; font-weight: 700; letter-spacing: 0.5px;
        }
        .nav-card p { 
            color: var(--text-secondary); font-size: 0.95rem; text-align: left; 
            line-height: 1.5; font-weight: 400;
        }
        
        /* Feature Tabs */
        .feature-tabs {
            display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 30px;
            background: var(--glass-bg); backdrop-filter: blur(20px);
            border-radius: 16px; border: 1px solid var(--glass-border);
            padding: 15px;
        }
        .feature-tab {
            background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);
            border-radius: 30px; padding: 10px 20px; font-size: 0.9rem;
            font-weight: 600; cursor: pointer; transition: all 0.3s ease;
            color: var(--text-secondary);
        }
        .feature-tab.active {
            background: var(--primary-glow); color: var(--dark-bg);
            border-color: var(--primary-glow);
        }
        .feature-tab:hover:not(.active) {
            background: rgba(255,255,255,0.1); border-color: var(--primary-glow);
            color: var(--text-primary);
        }
        
        /* Feature Content */
        .feature-content {
            background: var(--glass-bg); backdrop-filter: blur(25px);
            border-radius: 20px; border: 1px solid var(--glass-border);
            padding: 30px; margin-bottom: 40px;
            min-height: 400px;
        }
        .feature-panel {
            display: none;
        }
        .feature-panel.active {
            display: block;
            animation: fade-in 0.5s ease;
        }
        @keyframes fade-in {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Badges Section */
        .badges-container {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 20px; margin-top: 20px;
        }
        .badge-item {
            background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);
            border-radius: 12px; padding: 20px; text-align: center;
            transition: all 0.3s ease;
            position: relative; overflow: hidden;
        }
        .badge-item::after {
            content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background: radial-gradient(circle at center, rgba(255,255,255,0.05) 0%, transparent 70%);
            opacity: 0; transition: opacity 0.3s ease; pointer-events: none;
        }
        .badge-item:hover::after { opacity: 1; }
        .badge-item:hover {
            background: rgba(255,255,255,0.1); border-color: var(--primary-glow);
            transform: translateY(-5px);
        }
        .badge-icon {
            font-size: 3rem; margin-bottom: 15px;
            color: var(--primary-glow);
        }
        .badge-name {
            font-size: 1rem; font-weight: 600; margin-bottom: 5px;
            color: var(--text-primary);
        }
        .badge-desc {
            font-size: 0.8rem; color: var(--text-secondary);
        }
        .badge-earned {
            position: relative;
        }
        .badge-earned::after {
            content: '✓'; position: absolute; top: 10px; right: 10px;
            background: var(--success); color: var(--dark-bg);
            width: 24px; height: 24px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-weight: bold;
        }
        
        /* Study Planner */
        .planner-container {
            display: grid; grid-template-columns: 300px 1fr; gap: 30px;
        }
        .planner-sidebar {
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05);
            border-radius: 12px; padding: 20px;
        }
        .planner-calendar {
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05);
            border-radius: 12px; padding: 20px;
        }
        .calendar-header {
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 20px;
        }
        .calendar-nav {
            display: flex; gap: 10px;
        }
        .calendar-nav-btn {
            background: rgba(255,255,255,0.05); border: none;
            color: var(--text-primary); width: 40px; height: 40px;
            border-radius: 8px; cursor: pointer;
            transition: all 0.3s ease;
        }
        .calendar-nav-btn:hover {
            background: var(--primary-glow); color: var(--dark-bg);
        }
        .calendar-grid {
            display: grid; grid-template-columns: repeat(7, 1fr);
            gap: 5px;
        }
        .calendar-day {
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05);
            border-radius: 8px; padding: 10px; text-align: center;
            cursor: pointer; transition: all 0.3s ease;
            min-height: 80px; display: flex; flex-direction: column;
            justify-content: space-between;
        }
        .calendar-day:hover {
            background: rgba(255,255,255,0.1); border-color: var(--primary-glow);
        }
        .calendar-day.today {
            background: rgba(255,215,0,0.1); border-color: var(--primary-glow);
        }
        .calendar-day-number {
            font-weight: 600; color: var(--text-primary);
        }
        .calendar-events {
            margin-top: 5px;
        }
        .calendar-event {
            background: var(--primary-glow); color: var(--dark-bg);
            border-radius: 4px; padding: 2px 6px; font-size: 0.7rem;
            margin: 2px 0; overflow: hidden; text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        /* Task Manager */
        .task-manager {
            display: grid; grid-template-columns: 1fr 1fr; gap: 30px;
        }
        .task-input {
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05);
            border-radius: 12px; padding: 20px;
        }
        .task-list {
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05);
            border-radius: 12px; padding: 20px;
        }
        .task-form {
            display: flex; flex-direction: column; gap: 15px;
        }
        .priority-buttons {
            display: flex; gap: 10px;
        }
        .priority-btn {
            background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);
            border-radius: 20px; padding: 8px 16px; font-size: 0.8rem;
            cursor: pointer; transition: all 0.3s ease;
            color: var(--text-secondary);
        }
        .priority-btn.active {
            background: var(--primary-glow); color: var(--dark-bg);
            border-color: var(--primary-glow);
        }
        .task-item {
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05);
            border-radius: 8px; padding: 15px; margin-bottom: 10px;
            transition: all 0.3s ease; display: flex; align-items: center;
            justify-content: space-between;
            position: relative; overflow: hidden;
        }
        .task-item::after {
            content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background: radial-gradient(circle at center, rgba(255,255,255,0.05) 0%, transparent 70%);
            opacity: 0; transition: opacity 0.3s ease; pointer-events: none;
        }
        .task-item:hover::after { opacity: 1; }
        .task-item:hover {
            background: rgba(255,255,255,0.06); border-color: rgba(255,215,0,0.3);
        }
        .task-info {
            display: flex; align-items: center; gap: 15px;
        }
        .task-checkbox {
            width: 20px; height: 20px; border: 2px solid var(--primary-glow);
            border-radius: 4px; cursor: pointer; position: relative;
            transition: all 0.3s ease;
        }
        .task-checkbox.checked {
            background: var(--primary-glow);
        }
        .task-checkbox.checked::after {
            content: '✓'; position: absolute; top: 50%; left: 50%;
            transform: translate(-50%, -50%); color: var(--dark-bg);
            font-weight: bold; font-size: 0.8rem;
        }
        .task-details {
            display: flex; flex-direction: column;
        }
        .task-title {
            font-weight: 600; color: var(--text-primary);
        }
        .task-due {
            font-size: 0.8rem; color: var(--text-muted);
        }
        .task-priority {
            padding: 4px 8px; border-radius: 12px; font-size: 0.7rem;
            font-weight: 600; text-transform: uppercase;
        }
        .task-priority.high {
            background: rgba(231,76,60,0.2); color: var(--danger);
        }
        .task-priority.medium {
            background: rgba(243,156,18,0.2); color: var(--warning);
        }
        .task-priority.low {
            background: rgba(46,204,113,0.2); color: var(--success);
        }
        .task-actions {
            display: flex; gap: 10px;
        }
        .task-action-btn {
            background: none; border: none; color: var(--text-secondary);
            font-size: 1rem; cursor: pointer; transition: all 0.3s ease;
            padding: 5px;
        }
        .task-action-btn:hover {
            color: var(--primary-glow);
        }
        
        /* Progress Analytics */
        .analytics-container {
            display: grid; grid-template-columns: 1fr 1fr; gap: 30px;
        }
        .analytics-chart {
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05);
            border-radius: 12px; padding: 20px;
        }
        .chart-title {
            font-size: 1.2rem; font-weight: 700; margin-bottom: 20px;
            color: var(--text-primary);
        }
        .progress-bar {
            background: rgba(255,255,255,0.1); height: 8px;
            border-radius: 4px; margin: 10px 0; overflow: hidden;
        }
        .progress-fill {
            height: 100%; background: linear-gradient(90deg, var(--primary-glow), var(--secondary-glow));
            border-radius: 4px; transition: width 0.5s ease;
        }
        .progress-label {
            display: flex; justify-content: space-between; margin-bottom: 5px;
            font-size: 0.9rem;
        }
        .progress-text {
            color: var(--text-secondary);
        }
        .progress-value {
            color: var(--primary-glow); font-weight: 600;
        }
        
        /* Smart Recommendations */
        .recommendations-container {
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05);
            border-radius: 12px; padding: 20px;
        }
        .recommendation-item {
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05);
            border-radius: 8px; padding: 15px; margin-bottom: 15px;
            transition: all 0.3s ease;
        }
        .recommendation-item:hover {
            background: rgba(255,255,255,0.06); border-color: rgba(255,215,0,0.3);
        }
        .recommendation-header {
            display: flex; align-items: center; gap: 10px;
            margin-bottom: 10px;
        }
        .recommendation-type {
            background: var(--primary-glow); color: var(--dark-bg);
            padding: 4px 8px; border-radius: 12px; font-size: 0.7rem;
            font-weight: 600; text-transform: uppercase;
        }
        .recommendation-title {
            font-weight: 600; color: var(--text-primary);
        }
        .recommendation-desc {
            color: var(--text-secondary); font-size: 0.9rem;
        }
        
        /* Study Goals */
        .goals-container {
            display: grid; grid-template-columns: 1fr 1fr; gap: 30px;
        }
        .goals-input {
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05);
            border-radius: 12px; padding: 20px;
        }
        .goals-progress {
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05);
            border-radius: 12px; padding: 20px;
        }
        .goal-item {
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05);
            border-radius: 8px; padding: 15px; margin-bottom: 15px;
            transition: all 0.3s ease;
            position: relative; overflow: hidden;
        }
        .goal-item::after {
            content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background: radial-gradient(circle at center, rgba(255,255,255,0.05) 0%, transparent 70%);
            opacity: 0; transition: opacity 0.3s ease; pointer-events: none;
        }
        .goal-item:hover::after { opacity: 1; }
        .goal-item:hover {
            background: rgba(255,255,255,0.06); border-color: rgba(255,215,0,0.3);
        }
        .goal-header {
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 10px;
        }
        .goal-title {
            font-weight: 600; color: var(--text-primary);
        }
        .goal-status {
            padding: 4px 8px; border-radius: 12px; font-size: 0.7rem;
            font-weight: 600; text-transform: uppercase;
        }
        .goal-status.in-progress {
            background: rgba(243,156,18,0.2); color: var(--warning);
        }
        .goal-status.completed {
            background: rgba(46,204,113,0.2); color: var(--success);
        }
        .goal-status.overdue {
            background: rgba(231,76,60,0.2); color: var(--danger);
        }
        
        /* Social Learning */
        .social-container {
            display: grid; grid-template-columns: 1fr 1fr; gap: 30px;
        }
        .study-groups {
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05);
            border-radius: 12px; padding: 20px;
        }
        .discussion-feed {
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05);
            border-radius: 12px; padding: 20px;
        }
        .group-item {
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05);
            border-radius: 8px; padding: 15px; margin-bottom: 15px;
            transition: all 0.3s ease;
        }
        .group-item:hover {
            background: rgba(255,255,255,0.06); border-color: rgba(255,215,0,0.3);
        }
        .group-header {
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 10px;
        }
        .group-name {
            font-weight: 600; color: var(--text-primary);
        }
        .group-members {
            font-size: 0.8rem; color: var(--text-muted);
        }
        .group-subject {
            background: var(--secondary-glow); color: var(--dark-bg);
            padding: 4px 8px; border-radius: 12px; font-size: 0.7rem;
            font-weight: 600; margin-bottom: 10px; display: inline-block;
        }
        
        /* Performance Insights */
        .insights-container {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px; margin-top: 20px;
        }
        .insight-card {
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05);
            border-radius: 12px; padding: 20px; text-align: center;
            transition: all 0.3s ease;
        }
        .insight-card:hover {
            background: rgba(255,255,255,0.06); border-color: rgba(255,215,0,0.3);
            transform: translateY(-5px);
        }
        .insight-metric {
            font-size: 2.5rem; font-weight: 800; margin-bottom: 10px;
            background: linear-gradient(45deg, var(--primary-glow), var(--secondary-glow));
            -webkit-background-clip: text; background-clip: text; color: transparent;
        }
        .insight-label {
            font-size: 1rem; color: var(--text-secondary); margin-bottom: 5px;
        }
        .insight-trend {
            font-size: 0.8rem; font-weight: 600;
        }
        .insight-trend.up {
            color: var(--success);
        }
        .insight-trend.down {
            color: var(--danger);
        }
        .insight-trend.stable {
            color: var(--warning);
        }
        
        /* Quiz Maker */
        .quiz-creator {
            display: grid; grid-template-columns: 1fr 1fr; gap: 30px;
        }
        .quiz-builder {
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05);
            border-radius: 12px; padding: 20px;
        }
        .quiz-preview {
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05);
            border-radius: 12px; padding: 20px;
        }
        .question-input {
            background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);
            border-radius: 8px; padding: 12px; width: 100%;
            color: var(--text-primary); margin-bottom: 15px;
        }
        .options-container {
            display: flex; flex-direction: column; gap: 10px;
            margin-bottom: 15px;
        }
        .option-input {
            background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);
            border-radius: 8px; padding: 10px; width: 100%;
            color: var(--text-primary);
        }
        .correct-option {
            border-color: var(--success);
        }
        
        /* File Upload */
        .upload-zone {
            border: 2px dashed rgba(255,255,255,0.2); border-radius: 12px;
            padding: 40px; text-align: center; margin: 20px 0;
            transition: all 0.3s ease; cursor: pointer;
        }
        .upload-zone:hover {
            border-color: var(--primary-glow); background: rgba(255,215,0,0.05);
        }
        .upload-zone.dragover {
            border-color: var(--success); background: rgba(46,204,113,0.1);
        }
        .upload-icon {
            font-size: 3rem; color: var(--text-muted); margin-bottom: 15px;
        }
        .upload-text {
            color: var(--text-secondary); font-size: 1.1rem;
        }
        .upload-subtext {
            color: var(--text-muted); font-size: 0.9rem; margin-top: 5px;
        }
        
        /* Collaborative Notes */
        .collab-notes-container {
            display: grid; grid-template-columns: 250px 1fr; gap: 30px;
            height: 600px;
        }
        .notes-sidebar {
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05);
            border-radius: 12px; padding: 20px; overflow-y: auto;
        }
        .notes-editor {
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05);
            border-radius: 12px; padding: 20px;
        }
        .note-item {
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05);
            border-radius: 8px; padding: 10px; margin-bottom: 10px;
            cursor: pointer; transition: all 0.3s ease;
        }
        .note-item:hover {
            background: rgba(255,255,255,0.06); border-color: rgba(255,215,0,0.3);
        }
        .note-item.active {
            background: rgba(255,215,0,0.1); border-color: var(--primary-glow);
        }
        .note-title {
            font-weight: 600; color: var(--text-primary); margin-bottom: 5px;
        }
        .note-preview {
            font-size: 0.8rem; color: var(--text-muted);
            overflow: hidden; text-overflow: ellipsis; white-space: nowrap;
        }
        .editor-toolbar {
            display: flex; gap: 10px; margin-bottom: 15px;
            padding-bottom: 15px; border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .toolbar-btn {
            background: rgba(255,255,255,0.05); border: none;
            color: var(--text-secondary); padding: 8px 12px;
            border-radius: 6px; cursor: pointer; transition: all 0.3s ease;
        }
        .toolbar-btn:hover {
            background: rgba(255,255,255,0.1); color: var(--primary-glow);
        }
        .toolbar-btn.active {
            background: var(--primary-glow); color: var(--dark-bg);
        }
        .editor-content {
            background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);
            border-radius: 8px; padding: 15px; min-height: 400px;
            color: var(--text-primary); font-family: 'Inter', sans-serif;
            line-height: 1.6; outline: none;
        }
        
        /* Virtual Study Rooms */
        .study-rooms-container {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px; margin-top: 20px;
        }
        .study-room {
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05);
            border-radius: 12px; padding: 20px; transition: all 0.3s ease;
        }
        .study-room:hover {
            background: rgba(255,255,255,0.06); border-color: rgba(255,215,0,0.3);
            transform: translateY(-5px);
        }
        .room-header {
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 15px;
            position: relative;
        }
        .room-name {
            font-weight: 600; color: var(--text-primary);
        }
        .room-status {
            padding: 4px 8px; border-radius: 12px; font-size: 0.7rem;
            font-weight: 600; text-transform: uppercase;
        }
        .room-status.active {
            background: rgba(46,204,113,0.2); color: var(--success);
        }
        .room-status.inactive {
            background: rgba(149,165,166,0.2); color: var(--text-muted);
        }
        .room-participants {
            display: flex; align-items: center; gap: 10px;
            margin-bottom: 15px;
        }
        .participant-avatar {
            width: 30px; height: 30px; border-radius: 50%;
            background: var(--primary-glow); color: var(--dark-bg);
            display: flex; align-items: center; justify-content: center;
            font-size: 0.8rem; font-weight: 600;
        }
        .room-subject {
            background: var(--secondary-glow); color: var(--dark-bg);
            padding: 4px 8px; border-radius: 12px; font-size: 0.8rem;
            font-weight: 600; margin-bottom: 10px; display: inline-block;
        }
        .room-description {
            color: var(--text-secondary); font-size: 0.9rem;
            margin-bottom: 15px;
        }
        .join-room-btn {
            width: 100%; background: var(--primary-glow); color: var(--dark-bg);
            border: none; padding: 10px; border-radius: 8px;
            font-weight: 600; cursor: pointer; transition: all 0.3s ease;
        }
        .join-room-btn:hover {
            background: #ffcc00; transform: translateY(-2px);
        }
        
        /* Mind Map */
        .mindmap-container {
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05);
            border-radius: 12px; padding: 20px; margin-top: 20px;
            height: 600px; position: relative;
        }
        .mindmap-toolbar {
            display: flex; gap: 10px; margin-bottom: 15px;
        }
        .mindmap-canvas {
            width: 100%; height: calc(100% - 60px);
            background: rgba(255,255,255,0.02); border-radius: 8px;
            position: relative; overflow: hidden;
        }
        .mindmap-node {
            position: absolute; background: var(--glass-bg);
            border: 2px solid var(--primary-glow); border-radius: 20px;
            padding: 10px 15px; color: var(--text-primary);
            font-weight: 600; cursor: move; user-select: none;
            transition: all 0.3s ease;
        }
        .mindmap-node:hover {
            background: rgba(255,215,0,0.1); transform: scale(1.05);
        }
        .mindmap-connection {
            position: absolute; height: 2px; background: var(--primary-glow);
            transform-origin: left center; opacity: 0.6;
        }
        
        /* Resume Builder */
        .resume-builder {
            display: grid; grid-template-columns: 1fr 2fr; gap: 30px;
        }
        .resume-sections {
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05);
            border-radius: 12px; padding: 20px;
        }
        .resume-section {
            margin-bottom: 15px; padding: 15px;
            background: rgba(255,255,255,0.03); border-radius: 8px;
            cursor: pointer; transition: all 0.3s ease;
        }
        .resume-section:hover {
            background: rgba(255,255,255,0.06); border-left: 3px solid var(--primary-glow);
        }
        .resume-section.active {
            background: rgba(255,215,0,0.1); border-left: 3px solid var(--primary-glow);
        }
        .resume-preview {
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05);
            border-radius: 12px; padding: 30px;
            min-height: 500px;
        }
        .resume-form {
            display: none;
        }
        .resume-form.active {
            display: block;
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-label {
            display: block; margin-bottom: 8px;
            font-weight: 600; color: var(--text-primary);
        }
        .form-input, .form-textarea {
            width: 100%; padding: 12px 15px;
            background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);
            border-radius: 8px; color: var(--text-primary);
            font-family: 'Inter', sans-serif;
            transition: all 0.3s ease;
        }
        .form-input:focus, .form-textarea:focus {
            outline: none; border-color: var(--primary-glow);
            background: rgba(255,255,255,0.08);
        }
        .form-textarea {
            min-height: 120px; resize: vertical;
        }
        .btn-primary {
            background: var(--primary-glow); color: var(--dark-bg);
            border: none; padding: 12px 24px; border-radius: 8px;
            font-weight: 600; cursor: pointer;
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            background: #ffcc00; transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255,215,0,0.3);
        }
        
        /* AI Assistant */
        .ai-assistant-container {
            display: grid; grid-template-columns: 1fr 1fr; gap: 30px;
            height: 500px;
        }
        .ai-chat {
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05);
            border-radius: 12px; padding: 20px;
            display: flex; flex-direction: column;
        }
        .ai-chat-header {
            display: flex; align-items: center; gap: 15px;
            margin-bottom: 20px; padding-bottom: 15px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .ai-avatar {
            width: 50px; height: 50px; border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-glow), var(--secondary-glow));
            display: flex; align-items: center; justify-content: center;
            font-size: 1.5rem; color: var(--dark-bg);
        }
        .ai-status {
            display: flex; align-items: center; gap: 8px;
            font-size: 0.9rem; color: var(--text-secondary);
        }
        .status-dot {
            width: 10px; height: 10px; border-radius: 50%;
            background: var(--success); animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.2); }
            100% { opacity: 1; transform: scale(1); }
        }
        .ai-messages {
            flex: 1; overflow-y: auto; margin-bottom: 20px;
            padding-right: 10px;
        }
        .ai-messages::-webkit-scrollbar { width: 6px; }
        .ai-messages::-webkit-scrollbar-track { background: rgba(255,255,255,0.1); border-radius: 3px; }
        .ai-messages::-webkit-scrollbar-thumb { 
            background: var(--primary-glow); border-radius: 3px; 
        }
        .message {
            margin-bottom: 15px; display: flex;
        }
        .message.user {
            justify-content: flex-end;
        }
        .message-bubble {
            max-width: 80%; padding: 12px 18px;
            border-radius: 18px; font-size: 0.9rem;
            line-height: 1.4;
        }
        .message.ai .message-bubble {
            background: rgba(255,255,255,0.1); border-top-left-radius: 4px;
            color: var(--text-primary);
        }
        .message.user .message-bubble {
            background: var(--primary-glow); color: var(--dark-bg);
            border-top-right-radius: 4px;
        }
        .ai-input-container {
            display: flex; gap: 10px;
        }
        .ai-input {
            flex: 1; padding: 12px 18px;
            background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);
            border-radius: 30px; color: var(--text-primary);
            font-family: 'Inter', sans-serif;
        }
        .ai-input:focus {
            outline: none; border-color: var(--primary-glow);
        }
        .ai-send {
            width: 45px; height: 45px; border-radius: 50%;
            background: var(--primary-glow); color: var(--dark-bg);
            border: none; display: flex; align-items: center; justify-content: center;
            cursor: pointer; transition: all 0.3s ease;
        }
        .ai-send:hover {
            background: #ffcc00; transform: scale(1.05);
        }
        .ai-features {
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05);
            border-radius: 12px; padding: 20px;
        }
        .ai-feature-title {
            font-size: 1.2rem; font-weight: 700; margin-bottom: 20px;
            color: var(--text-primary);
        }
        .ai-feature-list {
            list-style: none;
        }
        .ai-feature-item {
            display: flex; align-items: center; gap: 15px;
            padding: 15px; margin-bottom: 10px;
            background: rgba(255,255,255,0.03); border-radius: 8px;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .ai-feature-item:hover {
            background: rgba(255,255,255,0.06); border-left: 3px solid var(--primary-glow);
        }
        .ai-feature-icon {
            width: 40px; height: 40px; border-radius: 8px;
            background: rgba(255,215,0,0.1); color: var(--primary-glow);
            display: flex; align-items: center; justify-content: center;
            font-size: 1.2rem;
        }
        .ai-feature-name {
            font-weight: 600; color: var(--text-primary);
        }
        
        /* Time Tracker */
        .time-tracker-container {
            display: grid; grid-template-columns: 1fr 1fr; gap: 30px;
        }
        .tracker-timer {
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05);
            border-radius: 12px; padding: 30px; text-align: center;
        }
        .timer-display {
            font-size: 4rem; font-weight: 700; margin: 20px 0;
            background: linear-gradient(45deg, var(--primary-glow), var(--secondary-glow));
            -webkit-background-clip: text; background-clip: text; color: transparent;
        }
        .timer-controls {
            display: flex; justify-content: center; gap: 15px;
            margin-top: 30px;
            position: relative;
        }
        .timer-btn {
            width: 60px; height: 60px; border-radius: 50%;
            background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);
            color: var(--text-primary); font-size: 1.5rem;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; transition: all 0.3s ease;
        }
        .timer-btn:hover {
            background: rgba(255,255,255,0.1); border-color: var(--primary-glow);
            transform: scale(1.05);
        }
        .timer-btn.primary {
            background: var(--primary-glow); color: var(--dark-bg);
            border-color: var(--primary-glow);
        }
        .timer-btn.primary:hover {
            background: #ffcc00;
        }
        .tracker-activities {
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05);
            border-radius: 12px; padding: 20px;
        }
        .activity-header {
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 20px;
        }
        .activity-title {
            font-size: 1.2rem; font-weight: 700;
            color: var(--text-primary);
        }
        .activity-list {
            max-height: 400px; overflow-y: auto;
        }
        .activity-list::-webkit-scrollbar { width: 6px; }
        .activity-list::-webkit-scrollbar-track { background: rgba(255,255,255,0.1); border-radius: 3px; }
        .activity-list::-webkit-scrollbar-thumb { 
            background: var(--primary-glow); border-radius: 3px; 
        }
        .activity-item {
            display: flex; justify-content: space-between; align-items: center;
            padding: 15px; margin-bottom: 10px;
            background: rgba(255,255,255,0.03); border-radius: 8px;
            transition: all 0.3s ease;
            position: relative; overflow: hidden;
        }
        .activity-item::after {
            content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background: radial-gradient(circle at center, rgba(255,255,255,0.05) 0%, transparent 70%);
            opacity: 0; transition: opacity 0.3s ease; pointer-events: none;
        }
        .activity-item:hover::after { opacity: 1; }
        .activity-item:hover {
            background: rgba(255,255,255,0.06);
        }
        .activity-name {
            font-weight: 600; color: var(--text-primary);
        }
        .activity-time {
            color: var(--text-secondary);
        }
        .activity-progress {
            height: 4px; background: rgba(255,255,255,0.1); border-radius: 2px;
            margin-top: 8px; overflow: hidden;
        }
        .activity-progress-bar {
            height: 100%; background: var(--primary-glow); border-radius: 2px;
        }
        
        /* Virtual Currency */
        .currency-container {
            display: grid; grid-template-columns: 1fr 2fr; gap: 30px;
        }
        .currency-balance {
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05);
            border-radius: 12px; padding: 30px; text-align: center;
        }
        .currency-icon {
            font-size: 3rem; margin-bottom: 20px;
            color: var(--primary-glow);
        }
        .currency-amount {
            font-size: 3.5rem; font-weight: 800; margin-bottom: 10px;
            background: linear-gradient(45deg, var(--primary-glow), var(--secondary-glow));
            -webkit-background-clip: text; background-clip: text; color: transparent;
        }
        .currency-label {
            font-size: 1.2rem; color: var(--text-secondary);
        }
        .currency-actions {
            display: flex; justify-content: center; gap: 15px;
            margin-top: 30px;
        }
        .currency-btn {
            padding: 12px 24px; border-radius: 8px;
            font-weight: 600; cursor: pointer;
            transition: all 0.3s ease;
        }
        .currency-btn.earn {
            background: var(--success); color: var(--dark-bg);
            border: none;
        }
        .currency-btn.spend {
            background: transparent; color: var(--primary-glow);
            border: 1px solid var(--primary-glow);
        }
        .currency-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        .currency-transactions {
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05);
            border-radius: 12px; padding: 20px;
        }
        .transaction-header {
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 20px;
        }
        .transaction-title {
            font-size: 1.2rem; font-weight: 700;
            color: var(--text-primary);
        }
        .transaction-list {
            max-height: 400px; overflow-y: auto;
        }
        .transaction-list::-webkit-scrollbar { width: 6px; }
        .transaction-list::-webkit-scrollbar-track { background: rgba(255,255,255,0.1); border-radius: 3px; }
        .transaction-list::-webkit-scrollbar-thumb { 
            background: var(--primary-glow); border-radius: 3px; 
        }
        .transaction-item {
            display: flex; justify-content: space-between; align-items: center;
            padding: 15px; margin-bottom: 10px;
            background: rgba(255,255,255,0.03); border-radius: 8px;
            transition: all 0.3s ease;
            position: relative; overflow: hidden;
        }
        .transaction-item::after {
            content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background: radial-gradient(circle at center, rgba(255,255,255,0.05) 0%, transparent 70%);
            opacity: 0; transition: opacity 0.3s ease; pointer-events: none;
        }
        .transaction-item:hover::after { opacity: 1; }
        .transaction-item:hover {
            background: rgba(255,255,255,0.06);
        }
        .transaction-details {
            display: flex; align-items: center; gap: 15px;
        }
        .transaction-icon {
            width: 40px; height: 40px; border-radius: 8px;
            display: flex; align-items: center; justify-content: center;
            font-size: 1.2rem;
        }
        .transaction-icon.earn {
            background: rgba(46,204,113,0.1); color: var(--success);
        }
        .transaction-icon.spend {
            background: rgba(231,76,60,0.1); color: var(--danger);
        }
        .transaction-info {
            display: flex; flex-direction: column;
        }
        .transaction-desc {
            font-weight: 600; color: var(--text-primary);
        }
        .transaction-date {
            font-size: 0.8rem; color: var(--text-muted);
        }
        .transaction-amount {
            font-weight: 700; font-size: 1.1rem;
        }
        .transaction-amount.earn {
            color: var(--success);
        }
        .transaction-amount.spend {
            color: var(--danger);
        }
        
        /* Leaderboard */
        .leaderboard-container {
            display: grid; grid-template-columns: 1fr 2fr; gap: 30px;
        }
        .leaderboard-rank {
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05);
            border-radius: 12px; padding: 30px; text-align: center;
        }
        .rank-position {
            font-size: 5rem; font-weight: 800; margin-bottom: 10px;
            background: linear-gradient(45deg, var(--primary-glow), var(--secondary-glow));
            -webkit-background-clip: text; background-clip: text; color: transparent;
        }
        .rank-label {
            font-size: 1.2rem; color: var(--text-secondary);
        }
        .rank-medal {
            font-size: 4rem; margin: 20px 0;
        }
        .rank-medal.gold { color: #FFD700; }
        .rank-medal.silver { color: #C0C0C0; }
        .rank-medal.bronze { color: #CD7F32; }
        .leaderboard-list {
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05);
            border-radius: 12px; padding: 20px;
        }
        .leaderboard-table {
            width: 100%; border-collapse: collapse;
        }
        .leaderboard-table th {
            text-align: left; padding: 15px; font-weight: 600;
            color: var(--text-secondary); border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .leaderboard-table td {
            padding: 15px; border-bottom: 1px solid rgba(255,255,255,0.05);
        }
        .leaderboard-table tr:last-child td {
            border-bottom: none;
        }
        .leaderboard-table tr:hover {
            background: rgba(255,255,255,0.03);
        }
        .leaderboard-rank-col {
            font-weight: 700; font-size: 1.1rem;
            width: 60px;
        }
        .leaderboard-name-col {
            font-weight: 600; color: var(--text-primary);
        }
        .leaderboard-score-col {
            font-weight: 700; color: var(--primary-glow);
            text-align: right;
        }
        .leaderboard-table tr.current-user {
            background: rgba(255,215,0,0.1);
        }
        .leaderboard-table tr.current-user td {
            border-bottom: 1px solid rgba(255,215,0,0.2);
        }
        
        /* Notices Section */
        .notices-section {
            background: var(--glass-bg); backdrop-filter: blur(25px);
            border-radius: 20px; border: 1px solid var(--glass-border);
            padding: 30px; margin-bottom: 40px;
            position: relative; overflow: hidden;
        }
        .notices-section::before {
            content: ''; position: absolute; top: 0; left: 0; right: 0; height: 1px;
            background: linear-gradient(90deg, transparent, var(--primary-glow), transparent);
            opacity: 0.5;
        }
        .section-header {
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 25px; padding-bottom: 15px; border-bottom: 1px solid var(--glass-border);
        }
        .section-title {
            font-size: 1.8rem; font-weight: 700;
            background: linear-gradient(45deg, var(--primary-glow), var(--secondary-glow));
            -webkit-background-clip: text; background-clip: text; color: transparent;
        }
        .notices-list {
            max-height: 400px; overflow-y: auto;
        }
        .notices-list::-webkit-scrollbar { width: 8px; }
        .notices-list::-webkit-scrollbar-track { background: rgba(255,255,255,0.1); border-radius: 4px; }
        .notices-list::-webkit-scrollbar-thumb { 
            background: linear-gradient(135deg, var(--primary-glow), var(--secondary-glow)); 
            border-radius: 4px; 
        }
        .notice-item {
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05);
            border-radius: 12px; padding: 20px; margin-bottom: 15px;
            transition: all 0.3s ease; position: relative;
        }
        .notice-item:hover {
            background: rgba(255,255,255,0.06); border-color: rgba(255,215,0,0.3);
            transform: translateX(5px);
        }
        .notice-item.important {
            border-left: 4px solid var(--danger);
        }
        .notice-title {
            font-size: 1.2rem; font-weight: 600; margin-bottom: 10px;
            color: var(--text-primary);
        }
        .notice-message {
            color: var(--text-secondary); margin-bottom: 15px;
            line-height: 1.5;
        }
        .notice-meta {
            display: flex; justify-content: space-between; align-items: center;
            font-size: 0.85rem; color: var(--text-muted);
        }
        .notice-time {
            display: flex; align-items: center; gap: 5px;
        }
        .notice-badge {
            background: var(--primary-glow); color: var(--dark-bg);
            padding: 4px 10px; border-radius: 20px; font-size: 0.75rem;
            font-weight: 600;
        }
        
        /* Recent Materials Section */
        .materials-section {
            background: var(--glass-bg); backdrop-filter: blur(25px);
            border-radius: 20px; border: 1px solid var(--glass-border);
            padding: 30px; margin-bottom: 40px;
            position: relative; overflow: hidden;
        }
        .materials-grid {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px; margin-top: 20px;
        }
        .material-card {
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05);
            border-radius: 12px; padding: 20px; transition: all 0.3s ease;
            position: relative; overflow: hidden;
        }
        .material-card::after {
            content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background: radial-gradient(circle at center, rgba(255,255,255,0.05) 0%, transparent 70%);
            opacity: 0; transition: opacity 0.3s ease; pointer-events: none;
        }
        .material-card:hover::after { opacity: 1; }
        .material-card:hover {
            background: rgba(255,255,255,0.06); border-color: rgba(255,215,0,0.3);
            transform: translateY(-5px);
        }
        .material-icon {
            font-size: 2.5rem; margin-bottom: 15px;
            color: var(--primary-glow);
        }
        .material-title {
            font-size: 1.1rem; font-weight: 600; margin-bottom: 10px;
            color: var(--text-primary);
        }
        .material-meta {
            font-size: 0.85rem; color: var(--text-muted);
        }
        
        /* Dark Mode Toggle */
        .theme-toggle {
            background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);
            border-radius: 20px; padding: 8px 12px; cursor: pointer;
            transition: all 0.3s ease; display: flex; align-items: center; gap: 8px;
        }
        .theme-toggle:hover {
            background: rgba(255,255,255,0.1); border-color: var(--primary-glow);
        }
        
        /* Calendar Widget */
        .calendar-widget {
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05);
            border-radius: 12px; padding: 20px; margin-bottom: 20px;
        }
        .calendar-mini {
            display: grid; grid-template-columns: repeat(7, 1fr);
            gap: 5px; margin-top: 15px;
        }
        .calendar-mini-day {
            aspect-ratio: 1; display: flex; align-items: center; justify-content: center;
            border-radius: 6px; cursor: pointer; transition: all 0.3s ease;
            font-size: 0.8rem;
            position: relative;
        }
        .calendar-mini-day:hover {
            background: rgba(255,255,255,0.1);
        }
        .calendar-mini-day.today {
            background: var(--primary-glow); color: var(--dark-bg);
            font-weight: 600;
        }
        
        /* Study Streak */
        .streak-widget {
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05);
            border-radius: 12px; padding: 20px; text-align: center;
        }
        .streak-number {
            font-size: 3rem; font-weight: 800;
            background: linear-gradient(45deg, var(--primary-glow), var(--accent-glow));
            -webkit-background-clip: text; background-clip: text; color: transparent;
        }
        .streak-label {
            color: var(--text-secondary); margin-top: 5px;
        }
        .streak-fire {
            font-size: 2rem; color: var(--accent-glow); margin-bottom: 10px;
            animation: fire-flicker 0.5s ease-in-out infinite alternate;
        }
        @keyframes fire-flicker {
            from { transform: scale(1) rotate(-2deg); }
            to { transform: scale(1.1) rotate(2deg); }
        }
        
        /* Enhanced Modals */
        .modal-overlay { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(10,10,10,0.8); backdrop-filter: blur(15px); 
            display: flex; justify-content: center; align-items: center; z-index: 2000; 
            opacity: 0; visibility: hidden; 
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); 
        }
        .modal-overlay.active { opacity: 1; visibility: visible; }
        .modal { 
            background: var(--glass-bg); backdrop-filter: blur(30px);
            border: 1px solid var(--glass-border); border-radius: 20px; 
            width: 90%; max-width: 900px; padding: 40px; 
            box-shadow: 0 20px 60px rgba(0,0,0,0.5); 
            transform: scale(0.9) translateY(20px); 
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative; overflow: hidden;
        }
        .modal::before {
            content: ''; position: absolute; top: 0; left: 0; right: 0; height: 1px;
            background: linear-gradient(90deg, transparent, var(--primary-glow), transparent);
            opacity: 0.6;
        }
        .modal-overlay.active .modal { transform: scale(1) translateY(0); }
        .modal-header { 
            display: flex; justify-content: space-between; align-items: center; 
            margin-bottom: 25px; border-bottom: 1px solid var(--border-color); 
            padding-bottom: 20px; 
        }
        .modal-header h2 { 
            font-size: 1.6rem; font-weight: 700; 
            background: linear-gradient(45deg, var(--primary-glow), var(--secondary-glow));
            -webkit-background-clip: text; background-clip: text; color: transparent;
        }
        .modal-close { 
            background: none; border: none; color: var(--text-primary); 
            font-size: 2rem; cursor: pointer; width: 40px; height: 40px;
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            transition: all 0.3s ease; 
        }
        .modal-close:hover { 
            background: rgba(255,255,255,0.1); transform: rotate(90deg); 
            color: var(--accent-glow);
        }
        
        /* Enhanced Toast */
        .toast { 
            position: fixed; bottom: 30px; right: 30px; 
            background: var(--glass-bg); backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border); border-radius: 12px; 
            padding: 18px 24px; box-shadow: 0 12px 40px rgba(0,0,0,0.4); 
            z-index: 3000; display: flex; align-items: center; gap: 12px;
            transform: translateX(400px); opacity: 0; 
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); 
            min-width: 300px;
        }
        .toast.show { transform: translateX(0); opacity: 1; }
        .toast.success { border-left: 4px solid var(--success); }
        .toast.error { border-left: 4px solid var(--danger); }
        .toast.info { border-left: 4px solid var(--info); }
        .toast i { font-size: 1.3rem; }
        .toast.success i { color: var(--success); }
        .toast.error i { color: var(--danger); }
        .toast.info i { color: var(--info); }
        
        /* Enhanced Loading Spinner */
        .spinner-container { display: flex; justify-content: center; align-items: center; height: 120px; }
        .spinner { 
            position: relative; width: 50px; height: 50px; 
            border: 4px solid rgba(255, 255, 255, 0.1); border-radius: 50%; 
            border-top-color: var(--primary-glow); 
            animation: spin 1s cubic-bezier(0.4, 0, 0.2, 1) infinite; 
        }
        .spinner::after {
            content: '';
            position: absolute;
            top: 5px;
            left: 5px;
            right: 5px;
            bottom: 5px;
            border-radius: 50%;
            border: 2px solid transparent;
            border-top-color: var(--secondary-glow);
            animation: spin 0.8s cubic-bezier(0.4, 0, 0.2, 1) infinite reverse;
        }
        @keyframes spin { to { transform: rotate(360deg); } }
        
        /* Enhanced Empty State */
        .empty-state {
            text-align: center; padding: 40px 20px;
            color: var(--text-muted);
            position: relative; overflow: hidden;
        }
        .empty-state::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--primary-glow), transparent);
            opacity: 0.3;
        }
        .empty-icon {
            font-size: 3rem; margin-bottom: 15px; opacity: 0.5;
            animation: float 3s ease-in-out infinite;
        }
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        /* Progress Circle */
        .progress-circle {
            position: relative; width: 120px; height: 120px; margin: 0 auto;
        }
        .progress-circle svg {
            transform: rotate(-90deg);
        }
        .progress-circle-bg {
            fill: none; stroke: rgba(255,255,255,0.1); stroke-width: 8;
        }
        .progress-circle-fill {
            fill: none; stroke: var(--primary-glow); stroke-width: 8;
            stroke-linecap: round; transition: stroke-dasharray 0.5s ease;
        }
        .progress-circle-text {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            font-size: 1.5rem; font-weight: 700; color: var(--text-primary);
        }
        
        /* Floating Chatbot Button */
        .chatbot-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: linear-gradient(135deg, var(--primary-glow), var(--secondary-glow));
            color: var(--dark-bg);
            border: none;
            border-radius: 50px;
            padding: 15px 20px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(255, 215, 0, 0.7); }
            70% { box-shadow: 0 0 0 15px rgba(255, 215, 0, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 215, 0, 0); }
        }

        .chatbot-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.4);
        }

        /* Chatbot Modal */
        .chatbot-modal {
            position: fixed;
            bottom: 100px;
            right: 30px;
            width: 350px;
            height: 500px;
            background: var(--glass-bg);
            backdrop-filter: blur(25px);
            border-radius: 20px;
            border: 1px solid var(--glass-border);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
            z-index: 1000;
            display: none;
            flex-direction: column;
            overflow: hidden;
            animation: slide-up 0.4s ease-out;
        }

        @keyframes slide-up {
            from { transform: translateY(100px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .chatbot-modal.active {
            display: flex;
        }

        .chatbot-container {
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .chatbot-header {
            background: linear-gradient(135deg, var(--primary-glow), var(--secondary-glow));
            color: var(--dark-bg);
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chatbot-title {
            font-weight: 700;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .chatbot-close-btn {
            background: none;
            border: none;
            color: var(--dark-bg);
            font-size: 1.2rem;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .chatbot-close-btn:hover {
            transform: rotate(90deg);
        }

        .chatbot-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .chatbot-input-container {
            padding: 15px;
            display: flex;
            gap: 10px;
        }

        .chatbot-input {
            flex: 1;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 30px;
            padding: 12px 20px;
            color: var(--text-primary);
            font-family: 'Inter', sans-serif;
            outline: none;
        }

        .chatbot-input:focus {
            border-color: var(--primary-glow);
        }

        .chatbot-send-btn {
            background: var(--primary-glow);
            color: var(--dark-bg);
            border: none;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .chatbot-send-btn:hover {
            background: #ffcc00;
            transform: scale(1.05);
        }
        
        /* Premium Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, var(--primary-glow), var(--secondary-glow));
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #ffcc00, var(--secondary-glow));
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .page-header { flex-direction: column; gap: 20px; margin: 15px; padding: 25px 20px; }
            .welcome-header-pro { padding-left: 25px; margin-bottom: 30px; }
            .dashboard-grid { grid-template-columns: 1fr; gap: 20px; }
            .dashboard-overview { grid-template-columns: repeat(2, 1fr); }
            .materials-grid { grid-template-columns: 1fr; }
            .section-header { flex-direction: column; align-items: flex-start; gap: 10px; }
            .modal { padding: 30px 20px; }
            .chatbot-modal {
                width: 90%;
                right: 5%;
                left: 5%;
            }
            
            /* Feature responsive */
            .ai-assistant-container, .resume-builder, .time-tracker-container,
            .currency-container, .leaderboard-container, .task-manager,
            .analytics-container, .social-container, .goals-container,
            .quiz-creator, .planner-container, .collab-notes-container {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 480px) {
            .dashboard-overview { grid-template-columns: 1fr; }
            .overview-number { font-size: 2rem; }
            .welcome-header-pro h1 { font-size: 2rem; }
            .nav-card { padding: 25px 20px; }
            .nav-card h3 { font-size: 1.2rem; }
            .chatbot-btn {
                padding: 12px 16px;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <div class="background-container">
        <div class="aurora-layer"></div>
        <div class="noise-layer"></div>
    </div>
    
    <main>
        <header class="page-header">
            <a href="/studentdashboard.html" class="brand-logo">
                <svg class="header-logo-svg" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                    <path fill="var(--primary-glow)" d="M50,2 A48,48 0 1,0 50,98 A48,48 0 1,0 50,2 Z" />
                    <g fill="var(--dark-bg)">
                        <path d="M28,25 h10 v50 h-10 Z" />
                        <path d="M45,25 H60 A12.5,12.5 0 0,1 60,50 H45 Z M45,50 H63 A12.5,12.5 0 0,1 63,75 H45 Z" />
                    </g>
                </svg>
                <h1 class="brand-title">IB STUDIOZ</h1>
            </a>
            <div style="display: flex; gap: 15px; align-items: center;">
                <div class="theme-toggle" id="theme-toggle">
                    <i class="fas fa-moon"></i>
                    <span>Dark</span>
                </div>
                <button id="profile-btn" class="btn-secondary">
                    <i class="fas fa-user"></i> Profile
                </button>
                <button id="logout-btn" class="btn-secondary">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
        </header>
        
        <div class="container">
            <!-- Dashboard Overview Cards -->
            <div class="dashboard-overview">
                <div class="overview-card">
                    <div class="overview-number" id="materials-count">...</div>
                    <div class="overview-label">Materials</div>
                </div>
                <div class="overview-card">
                    <div class="overview-number" id="pyqs-count">...</div>
                    <div class="overview-label">PYQs</div>
                </div>
                <div class="overview-card">
                    <div class="overview-number" id="seminars-count">...</div>
                    <div class="overview-label">Seminars</div>
                </div>
                <div class="overview-card">
                    <div class="overview-number" id="credits-count">...</div>
                    <div class="overview-label">Credits</div>
                </div>
                <div class="overview-card">
                    <div class="overview-number" id="streak-count">...</div>
                    <div class="overview-label">Study Streak</div>
                </div>
                <div class="overview-card">
                    <div class="overview-number" id="hours-count">...</div>
                    <div class="overview-label">Study Hours</div>
                </div>
            </div>
            
            <div class="welcome-header-pro">
                <h1>Student Dashboard</h1>
                <p>Welcome back, <span id="student-name">Student</span>. Access your learning materials and stay updated with the latest announcements.</p>
            </div>
            
            <!-- Feature Tabs -->
            <div class="feature-tabs">
                <div class="feature-tab active" data-tab="dashboard">Dashboard</div>
                <div class="feature-tab" data-tab="planner">Study Planner</div>
                <div class="feature-tab" data-tab="tasks">Task Manager</div>
                <div class="feature-tab" data-tab="analytics">Analytics</div>
                <div class="feature-tab" data-tab="social">Social Learning</div>
                <div class="feature-tab" data-tab="goals">Study Goals</div>
                <div class="feature-tab" data-tab="quiz-maker">Quiz Maker</div>
                <div class="feature-tab" data-tab="mindmap">Mind Map</div>
                <div class="feature-tab" data-tab="collab-notes">Collaborative Notes</div>
                <div class="feature-tab" data-tab="study-rooms">Study Rooms</div>
                <div class="feature-tab" data-tab="insights">Performance</div>
                <div class="feature-tab" data-tab="badges">Badges</div>
                <div class="feature-tab" data-tab="resume">Resume Builder</div>
                <div class="feature-tab" data-tab="ai-assistant">AI Assistant</div>
                <div class="feature-tab" data-tab="time-tracker">Time Tracker</div>
                <div class="feature-tab" data-tab="credits">Virtual Currency</div>
                <div class="feature-tab" data-tab="leaderboard">Leaderboard</div>
            </div>
            
            <!-- Feature Content -->
            <div class="feature-content">
                <!-- Dashboard Panel -->
                <div class="feature-panel active" id="dashboard-panel">
                    <!-- Study Streak Widget -->
                    <div class="streak-widget" style="margin-bottom: 40px;">
                        <div class="streak-fire">🔥</div>
                        <div class="streak-number" id="streak-display">...</div>
                        <div class="streak-label">Day Study Streak</div>
                    </div>
                    
                    <!-- Notices Section -->
                    <div class="notices-section">
                        <div class="section-header">
                            <h2 class="section-title"><i class="fas fa-bullhorn"></i> Notices & Announcements</h2>
                            <span class="notice-badge" id="new-notices-badge" style="display: none;">New</span>
                        </div>
                        <div class="notices-list" id="notices-list">
                            <div class="spinner-container">
                                <div class="spinner"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Recent Materials Section -->
                    <div class="materials-section">
                        <div class="section-header">
                            <h2 class="section-title"><i class="fas fa-book"></i> Recent Materials</h2>
                            <a href="/materials.html" class="btn-secondary">View All</a>
                        </div>
                        <div class="materials-grid" id="recent-materials">
                            <div class="spinner-container">
                                <div class="spinner"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Quick Access Section -->
                    <section class="dashboard-grid">
                        <a href="/materials.html" class="nav-card" style="--card-color: #2575fc;">
                            <div class="nav-card-header">
                                <div class="nav-card-icon"><i class="fas fa-book-open"></i></div>
                                <span class="nav-card-arrow">→</span>
                            </div>
                            <h3>Study Materials</h3>
                            <p>Access notes, e-books, and other learning resources for your courses.</p>
                        </a>
                        
                        <a href="/pyq.html" class="nav-card" style="--card-color: #f857a6;">
                            <div class="nav-card-header">
                                <div class="nav-card-icon"><i class="fas fa-file-alt"></i></div>
                                <span class="nav-card-arrow">→</span>
                            </div>
                            <h3>Previous Year Papers</h3>
                            <p>Practice with previous year question papers to prepare for exams.</p>
                        </a>
                        
                        <a href="/seminar.html" class="nav-card" style="--card-color: #00b09b;">
                            <div class="nav-card-header">
                                <div class="nav-card-icon"><i class="fas fa-chalkboard-teacher"></i></div>
                                <span class="nav-card-arrow">→</span>
                            </div>
                            <h3>Seminars</h3>
                            <p>Watch recorded seminars and presentations from industry experts.</p>
                        </a>
                        
                        <a href="/quiz.html" class="nav-card" style="--card-color: #9b59b6;">
                            <div class="nav-card-header">
                                <div class="nav-card-icon"><i class="fas fa-question-circle"></i></div>
                                <span class="nav-card-arrow">→</span>
                            </div>
                            <h3>Quizzes</h3>
                            <p>Test your knowledge with interactive quizzes and assessments.</p>
                        </a>
                        
                        <a href="/cgpa.html" class="nav-card" style="--card-color: #ff6b6b;">
                            <div class="nav-card-header">
                                <div class="nav-card-icon"><i class="fas fa-calculator"></i></div>
                                <span class="nav-card-arrow">→</span>
                            </div>
                            <h3>GPA Calculator</h3>
                            <p>Calculate your Grade Point Average and track your academic progress.</p>
                        </a>
                        
                        <div class="nav-card" style="--card-color: #e67e22;" onclick="switchToTab('study-rooms')">
                            <div class="nav-card-header">
                                <div class="nav-card-icon"><i class="fas fa-users"></i></div>
                                <span class="nav-card-arrow">→</span>
                            </div>
                            <h3>Virtual Study Rooms</h3>
                            <p>Join collaborative study sessions with other students.</p>
                        </div>
                        
                        <div class="nav-card" style="--card-color: #16a085;" onclick="switchToTab('mindmap')">
                            <div class="nav-card-header">
                                <div class="nav-card-icon"><i class="fas fa-project-diagram"></i></div>
                                <span class="nav-card-arrow">→</span>
                            </div>
                            <h3>Mind Mapping</h3>
                            <p>Create visual mind maps to organize your study concepts.</p>
                        </div>
                    </section>
                </div>
                
                <!-- Study Planner Panel -->
                <div class="feature-panel" id="planner-panel">
                    <div class="section-header">
                        <h2 class="section-title"><i class="fas fa-calendar-alt"></i> Study Planner</h2>
                        <button class="btn-secondary" id="add-event-btn">
                            <i class="fas fa-plus"></i> Add Event
                        </button>
                    </div>
                    
                    <div class="planner-container">
                        <div class="planner-sidebar">
                            <div class="calendar-widget">
                                <div style="text-align: center; font-weight: 600; margin-bottom: 10px;" id="calendar-month">
                                    August 2025
                                </div>
                                <div class="calendar-mini" id="calendar-mini">
                                    <!-- Mini calendar will be generated here -->
                                </div>
                            </div>
                            
                            <div style="margin-top: 20px;">
                                <h4 style="color: var(--text-primary); margin-bottom: 15px;">Today's Events</h4>
                                <div id="today-events">
                                    <div class="empty-state">
                                        <div class="empty-icon"><i class="fas fa-calendar"></i></div>
                                        <p>No events today</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="planner-calendar">
                            <div class="calendar-header">
                                <h3 style="color: var(--text-primary);" id="current-month">August 2025</h3>
                                <div class="calendar-nav">
                                    <button class="calendar-nav-btn" id="prev-month">
                                        <i class="fas fa-chevron-left"></i>
                                    </button>
                                    <button class="calendar-nav-btn" id="next-month">
                                        <i class="fas fa-chevron-right"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <div style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 5px; margin-bottom: 10px;">
                                <div style="text-align: center; font-weight: 600; padding: 10px; color: var(--text-secondary);">Sun</div>
                                <div style="text-align: center; font-weight: 600; padding: 10px; color: var(--text-secondary);">Mon</div>
                                <div style="text-align: center; font-weight: 600; padding: 10px; color: var(--text-secondary);">Tue</div>
                                <div style="text-align: center; font-weight: 600; padding: 10px; color: var(--text-secondary);">Wed</div>
                                <div style="text-align: center; font-weight: 600; padding: 10px; color: var(--text-secondary);">Thu</div>
                                <div style="text-align: center; font-weight: 600; padding: 10px; color: var(--text-secondary);">Fri</div>
                                <div style="text-align: center; font-weight: 600; padding: 10px; color: var(--text-secondary);">Sat</div>
                            </div>
                            
                            <div class="calendar-grid" id="calendar-grid">
                                <!-- Calendar days will be generated here -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Task Manager Panel -->
                <div class="feature-panel" id="tasks-panel">
                    <div class="section-header">
                        <h2 class="section-title"><i class="fas fa-tasks"></i> Task Manager</h2>
                        <div style="display: flex; gap: 10px;">
                            <button class="btn-secondary" id="filter-tasks">
                                <i class="fas fa-filter"></i> Filter
                            </button>
                            <button class="btn-secondary" id="add-task-btn">
                                <i class="fas fa-plus"></i> Add Task
                            </button>
                        </div>
                    </div>
                    
                    <div class="task-manager">
                        <div class="task-input">
                            <h3 style="color: var(--text-primary); margin-bottom: 20px;">Add New Task</h3>
                            <div class="task-form">
                                <input type="text" class="form-input" id="task-title" placeholder="Enter task title">
                                <textarea class="form-textarea" id="task-description" placeholder="Enter task description"></textarea>
                                <input type="date" class="form-input" id="task-due-date">
                                
                                <div>
                                    <label class="form-label">Priority</label>
                                    <div class="priority-buttons">
                                        <div class="priority-btn active" data-priority="high">High</div>
                                        <div class="priority-btn" data-priority="medium">Medium</div>
                                        <div class="priority-btn" data-priority="low">Low</div>
                                    </div>
                                </div>
                                
                                <button class="btn-primary" id="save-task">
                                    <i class="fas fa-plus"></i> Add Task
                                </button>
                            </div>
                        </div>
                        
                        <div class="task-list">
                            <h3 style="color: var(--text-primary); margin-bottom: 20px;">Your Tasks</h3>
                            <div id="tasks-container">
                                <div class="spinner-container">
                                    <div class="spinner"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Analytics Panel -->
                <div class="feature-panel" id="analytics-panel">
                    <div class="section-header">
                        <h2 class="section-title"><i class="fas fa-chart-line"></i> Progress Analytics</h2>
                        <div class="btn-secondary">
                            <i class="fas fa-download"></i> Export Report
                        </div>
                    </div>
                    
                    <div class="analytics-container">
                        <div class="analytics-chart">
                            <div class="chart-title">Study Progress</div>
                            
                            <div style="margin-bottom: 20px;">
                                <div class="progress-label">
                                    <span class="progress-text">Mathematics</span>
                                    <span class="progress-value">85%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 85%;"></div>
                                </div>
                            </div>
                            
                            <div style="margin-bottom: 20px;">
                                <div class="progress-label">
                                    <span class="progress-text">Physics</span>
                                    <span class="progress-value">72%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 72%;"></div>
                                </div>
                            </div>
                            
                            <div style="margin-bottom: 20px;">
                                <div class="progress-label">
                                    <span class="progress-text">Chemistry</span>
                                    <span class="progress-value">91%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 91%;"></div>
                                </div>
                            </div>
                            
                            <div>
                                <div class="progress-label">
                                    <span class="progress-text">Computer Science</span>
                                    <span class="progress-value">78%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 78%;"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="analytics-chart">
                            <div class="chart-title">Weekly Study Goal</div>
                            <div class="progress-circle">
                                <svg width="120" height="120">
                                    <circle class="progress-circle-bg" cx="60" cy="60" r="50"></circle>
                                    <circle class="progress-circle-fill" cx="60" cy="60" r="50" 
                                            stroke-dasharray="0 314" id="weekly-progress-circle"></circle>
                                </svg>
                                <div class="progress-circle-text" id="weekly-progress-text">0%</div>
                            </div>
                            <div style="text-align: center; margin-top: 20px; color: var(--text-secondary);">
                                <div id="weekly-hours">0/20 hours this week</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Social Learning Panel -->
                <div class="feature-panel" id="social-panel">
                    <div class="section-header">
                        <h2 class="section-title"><i class="fas fa-users"></i> Social Learning</h2>
                        <button class="btn-secondary" id="create-group-btn">
                            <i class="fas fa-plus"></i> Create Group
                        </button>
                    </div>
                    
                    <div class="social-container">
                        <div class="study-groups">
                            <h3 style="color: var(--text-primary); margin-bottom: 20px;">Study Groups</h3>
                            <div id="study-groups-list">
                                <div class="group-item">
                                    <div class="group-header">
                                        <div class="group-name">Mathematics Study Group</div>
                                        <div class="group-subject">MATH</div>
                                    </div>
                                    <div class="group-members">5 members</div>
                                    <div style="color: var(--text-secondary); font-size: 0.9rem; margin-top: 10px;">
                                        Preparing for calculus exam
                                    </div>
                                </div>
                                
                                <div class="group-item">
                                    <div class="group-header">
                                        <div class="group-name">Physics Lab Partners</div>
                                        <div class="group-subject">PHYS</div>
                                    </div>
                                    <div class="group-members">3 members</div>
                                    <div style="color: var(--text-secondary); font-size: 0.9rem; margin-top: 10px;">
                                        Working on quantum mechanics
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="discussion-feed">
                            <h3 style="color: var(--text-primary); margin-bottom: 20px;">Discussion Feed</h3>
                            <div id="discussion-feed">
                                <div class="recommendation-item">
                                    <div class="recommendation-header">
                                        <div class="recommendation-type">Question</div>
                                        <div class="recommendation-title">Sarah M.</div>
                                    </div>
                                    <div class="recommendation-desc">
                                        Can someone explain the difference between integration by parts and substitution?
                                    </div>
                                    <div style="margin-top: 10px; font-size: 0.8rem; color: var(--text-muted);">
                                        2 hours ago • 3 replies
                                    </div>
                                </div>
                                
                                <div class="recommendation-item">
                                    <div class="recommendation-header">
                                        <div class="recommendation-type">Share</div>
                                        <div class="recommendation-title">Alex K.</div>
                                    </div>
                                    <div class="recommendation-desc">
                                        Found this amazing physics simulation tool for understanding wave mechanics!
                                    </div>
                                    <div style="margin-top: 10px; font-size: 0.8rem; color: var(--text-muted);">
                                        4 hours ago • 7 likes
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Study Goals Panel -->
                <div class="feature-panel" id="goals-panel">
                    <div class="section-header">
                        <h2 class="section-title"><i class="fas fa-bullseye"></i> Study Goals</h2>
                        <button class="btn-secondary" id="add-goal-btn">
                            <i class="fas fa-plus"></i> Add Goal
                        </button>
                    </div>
                    
                    <div class="goals-container">
                        <div class="goals-input">
                            <h3 style="color: var(--text-primary); margin-bottom: 20px;">Set New Goal</h3>
                            <div class="task-form">
                                <input type="text" class="form-input" id="goal-title" placeholder="Enter goal title">
                                <textarea class="form-textarea" id="goal-description" placeholder="Describe your goal"></textarea>
                                <input type="date" class="form-input" id="goal-deadline">
                                <input type="number" class="form-input" id="goal-target" placeholder="Target value (hours/pages/etc.)">
                                
                                <button class="btn-primary" id="save-goal">
                                    <i class="fas fa-plus"></i> Add Goal
                                </button>
                            </div>
                        </div>
                        
                        <div class="goals-progress">
                            <h3 style="color: var(--text-primary); margin-bottom: 20px;">Current Goals</h3>
                            <div id="goals-list">
                                <div class="goal-item">
                                    <div class="goal-header">
                                        <div class="goal-title">Complete Calculus Chapter 5</div>
                                        <div class="goal-status in-progress">In Progress</div>
                                    </div>
                                    <div style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 10px;">
                                        Due: September 15, 2025
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 60%;"></div>
                                    </div>
                                    <div style="text-align: center; margin-top: 5px; font-size: 0.8rem; color: var(--text-muted);">
                                        60% Complete
                                    </div>
                                </div>
                                
                                <div class="goal-item">
                                    <div class="goal-header">
                                        <div class="goal-title">Read 50 pages of Physics textbook</div>
                                        <div class="goal-status completed">Completed</div>
                                    </div>
                                    <div style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 10px;">
                                        Due: August 30, 2025
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 100%;"></div>
                                    </div>
                                    <div style="text-align: center; margin-top: 5px; font-size: 0.8rem; color: var(--text-muted);">
                                        100% Complete
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Quiz Maker Panel -->
                <div class="feature-panel" id="quiz-maker-panel">
                    <div class="section-header">
                        <h2 class="section-title"><i class="fas fa-question-circle"></i> Quiz Maker</h2>
                        <button class="btn-secondary" id="save-quiz-btn">
                            <i class="fas fa-save"></i> Save Quiz
                        </button>
                    </div>
                    
                    <div class="quiz-creator">
                        <div class="quiz-builder">
                            <h3 style="color: var(--text-primary); margin-bottom: 20px;">Create Quiz</h3>
                            
                            <div class="form-group">
                                <label class="form-label">Quiz Title</label>
                                <input type="text" class="form-input" id="quiz-title" placeholder="Enter quiz title">
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Subject</label>
                                <input type="text" class="form-input" id="quiz-subject" placeholder="Enter subject">
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Question</label>
                                <textarea class="question-input" id="quiz-question" placeholder="Enter your question"></textarea>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Options</label>
                                <div class="options-container">
                                    <input type="text" class="option-input correct-option" id="option-1" placeholder="Option 1 (Correct Answer)">
                                    <input type="text" class="option-input" id="option-2" placeholder="Option 2">
                                    <input type="text" class="option-input" id="option-3" placeholder="Option 3">
                                    <input type="text" class="option-input" id="option-4" placeholder="Option 4">
                                </div>
                            </div>
                            
                            <button class="btn-primary" id="add-question">
                                <i class="fas fa-plus"></i> Add Question
                            </button>
                        </div>
                        
                        <div class="quiz-preview">
                            <h3 style="color: var(--text-primary); margin-bottom: 20px;">Quiz Preview</h3>
                            <div id="quiz-preview-content">
                                <div class="empty-state">
                                    <div class="empty-icon"><i class="fas fa-question-circle"></i></div>
                                    <p>Add questions to see preview</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Mind Map Panel -->
                <div class="feature-panel" id="mindmap-panel">
                    <div class="section-header">
                        <h2 class="section-title"><i class="fas fa-project-diagram"></i> Mind Map</h2>
                        <div style="display: flex; gap: 10px;">
                            <button class="btn-secondary" id="save-mindmap">
                                <i class="fas fa-save"></i> Save
                            </button>
                            <button class="btn-secondary" id="clear-mindmap">
                                <i class="fas fa-trash"></i> Clear
                            </button>
                        </div>
                    </div>
                    
                    <div class="mindmap-container">
                        <div class="mindmap-toolbar">
                            <button class="toolbar-btn" id="add-node-btn">
                                <i class="fas fa-plus"></i> Add Node
                            </button>
                            <button class="toolbar-btn" id="connect-nodes-btn">
                                <i class="fas fa-link"></i> Connect
                            </button>
                            <input type="text" class="form-input" id="node-text" placeholder="Node text" style="flex: 1; margin-left: 10px;">
                        </div>
                        
                        <div class="mindmap-canvas" id="mindmap-canvas">
                            <div class="mindmap-node" style="top: 250px; left: 300px;" data-id="1">
                                Central Topic
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Collaborative Notes Panel -->
                <div class="feature-panel" id="collab-notes-panel">
                    <div class="section-header">
                        <h2 class="section-title"><i class="fas fa-edit"></i> Collaborative Notes</h2>
                        <button class="btn-secondary" id="new-note-btn">
                            <i class="fas fa-plus"></i> New Note
                        </button>
                    </div>
                    
                    <div class="collab-notes-container">
                        <div class="notes-sidebar">
                            <h4 style="color: var(--text-primary); margin-bottom: 15px;">My Notes</h4>
                            <div id="notes-list">
                                <div class="note-item active">
                                    <div class="note-title">Mathematics - Calculus</div>
                                    <div class="note-preview">Integration techniques and applications...</div>
                                </div>
                                <div class="note-item">
                                    <div class="note-title">Physics - Mechanics</div>
                                    <div class="note-preview">Newton's laws and motion equations...</div>
                                </div>
                                <div class="note-item">
                                    <div class="note-title">Chemistry - Organic</div>
                                    <div class="note-preview">Functional groups and reactions...</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="notes-editor">
                            <div class="editor-toolbar">
                                <button class="toolbar-btn" data-command="bold">
                                    <i class="fas fa-bold"></i>
                                </button>
                                <button class="toolbar-btn" data-command="italic">
                                    <i class="fas fa-italic"></i>
                                </button>
                                <button class="toolbar-btn" data-command="underline">
                                    <i class="fas fa-underline"></i>
                                </button>
                                <button class="toolbar-btn" data-command="insertUnorderedList">
                                    <i class="fas fa-list-ul"></i>
                                </button>
                                <button class="toolbar-btn" data-command="insertOrderedList">
                                    <i class="fas fa-list-ol"></i>
                                </button>
                                <button class="btn-primary" id="save-note">
                                    <i class="fas fa-save"></i> Save
                                </button>
                            </div>
                            
                            <div class="editor-content" contenteditable="true" id="note-editor">
                                <h2>Mathematics - Calculus</h2>
                                <p>Integration is the reverse process of differentiation...</p>
                                <ul>
                                    <li>Integration by parts</li>
                                    <li>Integration by substitution</li>
                                    <li>Partial fractions</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Study Rooms Panel -->
                <div class="feature-panel" id="study-rooms-panel">
                    <div class="section-header">
                        <h2 class="section-title"><i class="fas fa-door-open"></i> Virtual Study Rooms</h2>
                        <button class="btn-secondary" id="create-room-btn">
                            <i class="fas fa-plus"></i> Create Room
                        </button>
                    </div>
                    
                    <div class="study-rooms-container" id="study-rooms-container">
                        <div class="study-room">
                            <div class="room-header">
                                <div class="room-name">Calculus Study Session</div>
                                <div class="room-status active">Active</div>
                            </div>
                            <div class="room-subject">Mathematics</div>
                            <div class="room-description">
                                Working through integration problems and discussing techniques
                            </div>
                            <div class="room-participants">
                                <div class="participant-avatar">A</div>
                                <div class="participant-avatar">B</div>
                                <div class="participant-avatar">C</div>
                                <span style="color: var(--text-muted); font-size: 0.8rem;">+2 more</span>
                            </div>
                            <button class="join-room-btn">
                                <i class="fas fa-sign-in-alt"></i> Join Room
                            </button>
                        </div>
                        
                        <div class="study-room">
                            <div class="room-header">
                                <div class="room-name">Physics Lab Discussion</div>
                                <div class="room-status active">Active</div>
                            </div>
                            <div class="room-subject">Physics</div>
                            <div class="room-description">
                                Discussing quantum mechanics lab results and theory
                            </div>
                            <div class="room-participants">
                                <div class="participant-avatar">D</div>
                                <div class="participant-avatar">E</div>
                            </div>
                            <button class="join-room-btn">
                                <i class="fas fa-sign-in-alt"></i> Join Room
                            </button>
                        </div>
                        
                        <div class="study-room">
                            <div class="room-header">
                                <div class="room-name">Computer Science Project</div>
                                <div class="room-status inactive">Planning</div>
                            </div>
                            <div class="room-subject">CS</div>
                            <div class="room-description">
                                Planning our final year project on machine learning
                            </div>
                            <div class="room-participants">
                                <div class="participant-avatar">F</div>
                                <div class="participant-avatar">G</div>
                                <div class="participant-avatar">H</div>
                            </div>
                            <button class="join-room-btn">
                                <i class="fas fa-sign-in-alt"></i> Join Room
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Performance Insights Panel -->
                <div class="feature-panel" id="insights-panel">
                    <div class="section-header">
                        <h2 class="section-title"><i class="fas fa-lightbulb"></i> Performance Insights</h2>
                        <button class="btn-secondary">
                            <i class="fas fa-sync"></i> Refresh
                        </button>
                    </div>
                    
                    <div class="insights-container">
                        <div class="insight-card">
                            <div class="insight-metric">7.2</div>
                            <div class="insight-label">Average Study Hours/Day</div>
                            <div class="insight-trend up">
                                <i class="fas fa-arrow-up"></i> +15% this week
                            </div>
                        </div>
                        
                        <div class="insight-card">
                            <div class="insight-metric">89%</div>
                            <div class="insight-label">Quiz Performance</div>
                            <div class="insight-trend up">
                                <i class="fas fa-arrow-up"></i> +5% improvement
                            </div>
                        </div>
                        
                        <div class="insight-card">
                            <div class="insight-metric">12</div>
                            <div class="insight-label">Tasks Completed</div>
                            <div class="insight-trend stable">
                                <i class="fas fa-minus"></i> Same as last week
                            </div>
                        </div>
                        
                        <div class="insight-card">
                            <div class="insight-metric">95%</div>
                            <div class="insight-label">Attendance Rate</div>
                            <div class="insight-trend down">
                                <i class="fas fa-arrow-down"></i> -2% this month
                            </div>
                        </div>
                    </div>
                    
                    <div class="recommendations-container" style="margin-top: 30px;">
                        <h3 style="color: var(--text-primary); margin-bottom: 20px;">Smart Recommendations</h3>
                        
                        <div class="recommendation-item">
                            <div class="recommendation-header">
                                <div class="recommendation-type">Study</div>
                                <div class="recommendation-title">Focus on Mathematics</div>
                            </div>
                            <div class="recommendation-desc">
                                Your math performance has dropped 8% this week. Consider spending extra time on calculus problems.
                            </div>
                        </div>
                        
                        <div class="recommendation-item">
                            <div class="recommendation-header">
                                <div class="recommendation-type">Break</div>
                                <div class="recommendation-title">Take a Study Break</div>
                            </div>
                            <div class="recommendation-desc">
                                You've been studying for 4 hours straight. Consider taking a 15-minute break for better retention.
                            </div>
                        </div>
                        
                        <div class="recommendation-item">
                            <div class="recommendation-header">
                                <div class="recommendation-type">Social</div>
                                <div class="recommendation-title">Join Study Group</div>
                            </div>
                            <div class="recommendation-desc">
                                Students in physics study groups show 23% better performance. Consider joining one!
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Badges Panel -->
                <div class="feature-panel" id="badges-panel">
                    <div class="section-header">
                        <h2 class="section-title"><i class="fas fa-medal"></i> Achievement Badges</h2>
                        <div class="btn-secondary">
                            <i class="fas fa-trophy"></i> View All
                        </div>
                    </div>
                    
                    <div class="badges-container" id="badges-container">
                        <div class="spinner-container">
                            <div class="spinner"></div>
                        </div>
                    </div>
                </div>
                
                <!-- Resume Builder Panel -->
                <div class="feature-panel" id="resume-panel">
                    <div class="section-header">
                        <h2 class="section-title"><i class="fas fa-file-alt"></i> Resume Builder</h2>
                        <button class="btn-primary" id="download-resume">
                            <i class="fas fa-download"></i> Download Resume
                        </button>
                    </div>
                    
                    <div class="resume-builder">
                        <div class="resume-sections">
                            <div class="resume-section active" data-section="personal">
                                <i class="fas fa-user"></i> Personal Information
                            </div>
                            <div class="resume-section" data-section="education">
                                <i class="fas fa-graduation-cap"></i> Education
                            </div>
                            <div class="resume-section" data-section="experience">
                                <i class="fas fa-briefcase"></i> Experience
                            </div>
                            <div class="resume-section" data-section="skills">
                                <i class="fas fa-cogs"></i> Skills
                            </div>
                            <div class="resume-section" data-section="projects">
                                <i class="fas fa-project-diagram"></i> Projects
                            </div>
                            <div class="resume-section" data-section="achievements">
                                <i class="fas fa-trophy"></i> Achievements
                            </div>
                        </div>
                        
                        <div class="resume-preview">
                            <!-- Personal Information Form -->
                            <div class="resume-form active" id="personal-form">
                                <h3 style="margin-bottom: 20px; color: var(--text-primary);">Personal Information</h3>
                                <div class="form-group">
                                    <label class="form-label">Full Name</label>
                                    <input type="text" class="form-input" id="resume-name" placeholder="Enter your full name">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Email Address</label>
                                    <input type="email" class="form-input" id="resume-email" placeholder="Enter your email">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Phone Number</label>
                                    <input type="tel" class="form-input" id="resume-phone" placeholder="Enter your phone number">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Professional Summary</label>
                                    <textarea class="form-textarea" id="resume-summary" placeholder="Write a brief professional summary"></textarea>
                                </div>
                                <button class="btn-primary" id="save-personal">Save Information</button>
                            </div>
                            
                            <!-- Education Form -->
                            <div class="resume-form" id="education-form">
                                <h3 style="margin-bottom: 20px; color: var(--text-primary);">Education</h3>
                                <div class="form-group">
                                    <label class="form-label">Institution</label>
                                    <input type="text" class="form-input" id="resume-institution" placeholder="Enter institution name">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Degree</label>
                                    <input type="text" class="form-input" id="resume-degree" placeholder="Enter your degree">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Graduation Year</label>
                                    <input type="text" class="form-input" id="resume-graduation" placeholder="Enter graduation year">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">GPA</label>
                                    <input type="text" class="form-input" id="resume-gpa" placeholder="Enter your GPA">
                                </div>
                                <button class="btn-primary" id="save-education">Save Education</button>
                            </div>
                            
                            <!-- Experience Form -->
                            <div class="resume-form" id="experience-form">
                                <h3 style="margin-bottom: 20px; color: var(--text-primary);">Work Experience</h3>
                                <div class="form-group">
                                    <label class="form-label">Company</label>
                                    <input type="text" class="form-input" id="resume-company" placeholder="Enter company name">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Position</label>
                                    <input type="text" class="form-input" id="resume-position" placeholder="Enter your position">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Duration</label>
                                    <input type="text" class="form-input" id="resume-duration" placeholder="Enter duration (e.g., June 2023 - August 2023)">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Responsibilities</label>
                                    <textarea class="form-textarea" id="resume-responsibilities" placeholder="List your key responsibilities"></textarea>
                                </div>
                                <button class="btn-primary" id="save-experience">Save Experience</button>
                            </div>
                            
                            <!-- Skills Form -->
                            <div class="resume-form" id="skills-form">
                                <h3 style="margin-bottom: 20px; color: var(--text-primary);">Skills</h3>
                                <div class="form-group">
                                    <label class="form-label">Programming Languages</label>
                                    <input type="text" class="form-input" id="resume-languages" placeholder="Enter programming languages (comma separated)">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Web Technologies</label>
                                    <input type="text" class="form-input" id="resume-web-tech" placeholder="Enter web technologies (comma separated)">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Database</label>
                                    <input type="text" class="form-input" id="resume-database" placeholder="Enter database skills (comma separated)">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Tools & Software</label>
                                    <input type="text" class="form-input" id="resume-tools" placeholder="Enter tools and software (comma separated)">
                                </div>
                                <button class="btn-primary" id="save-skills">Save Skills</button>
                            </div>
                            
                            <!-- Projects Form -->
                            <div class="resume-form" id="projects-form">
                                <h3 style="margin-bottom: 20px; color: var(--text-primary);">Projects</h3>
                                <div class="form-group">
                                    <label class="form-label">Project Name</label>
                                    <input type="text" class="form-input" id="resume-project-name" placeholder="Enter project name">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Technologies Used</label>
                                    <input type="text" class="form-input" id="resume-project-tech" placeholder="Enter technologies used">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Description</label>
                                    <textarea class="form-textarea" id="resume-project-desc" placeholder="Describe your project"></textarea>
                                </div>
                                <button class="btn-primary" id="save-project">Save Project</button>
                            </div>
                            
                            <!-- Achievements Form -->
                            <div class="resume-form" id="achievements-form">
                                <h3 style="margin-bottom: 20px; color: var(--text-primary);">Achievements</h3>
                                <div class="form-group">
                                    <label class="form-label">Achievement 1</label>
                                    <input type="text" class="form-input" id="resume-achievement1" placeholder="Enter achievement">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Achievement 2</label>
                                    <input type="text" class="form-input" id="resume-achievement2" placeholder="Enter achievement">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Achievement 3</label>
                                    <input type="text" class="form-input" id="resume-achievement3" placeholder="Enter achievement">
                                </div>
                                <button class="btn-primary" id="save-achievements">Save Achievements</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- AI Assistant Panel -->
                <div class="feature-panel" id="ai-assistant-panel">
                    <div class="section-header">
                        <h2 class="section-title"><i class="fas fa-robot"></i> AI Learning Assistant</h2>
                        <div class="btn-secondary">
                            <i class="fas fa-cog"></i> Settings
                        </div>
                    </div>
                    
                    <div class="ai-assistant-container">
                        <div class="ai-chat">
                            <div class="ai-chat-header">
                                <div class="ai-avatar">
                                    <i class="fas fa-robot"></i>
                                </div>
                                <div>
                                    <div style="font-weight: 600; color: var(--text-primary);">Study Assistant</div>
                                    <div class="ai-status">
                                        <div class="status-dot"></div>
                                        Online
                                    </div>
                                </div>
                            </div>
                            
                            <div class="ai-messages" id="ai-messages">
                                <div class="message ai">
                                    <div class="message-bubble">
                                        Hello! I'm your AI learning assistant. How can I help you today?
                                    </div>
                                </div>
                            </div>
                            
                            <div class="ai-input-container">
                                <input type="text" class="ai-input" placeholder="Ask me anything..." id="ai-input">
                                <button class="ai-send" id="ai-send">
                                    <i class="fas fa-paper-plane"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="ai-features">
                            <div class="ai-feature-title">AI Features</div>
                            <ul class="ai-feature-list">
                                <li class="ai-feature-item">
                                    <div class="ai-feature-icon">
                                        <i class="fas fa-brain"></i>
                                    </div>
                                    <div class="ai-feature-name">Exam Preparation Coach</div>
                                </li>
                                <li class="ai-feature-item">
                                    <div class="ai-feature-icon">
                                        <i class="fas fa-comments"></i>
                                    </div>
                                    <div class="ai-feature-name">Emotion-Aware Chatbot</div>
                                </li>
                                <li class="ai-feature-item">
                                    <div class="ai-feature-icon">
                                        <i class="fas fa-microphone"></i>
                                    </div>
                                    <div class="ai-feature-name">Speech Recognition</div>
                                </li>
                                <li class="ai-feature-item">
                                    <div class="ai-feature-icon">
                                        <i class="fas fa-video"></i>
                                    </div>
                                    <div class="ai-feature-name">YouTube Video Assistant</div>
                                </li>
                                <li class="ai-feature-item">
                                    <div class="ai-feature-icon">
                                        <i class="fas fa-file-alt"></i>
                                    </div>
                                    <div class="ai-feature-name">Quiz Difficulty Adjuster</div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <!-- Time Tracker Panel -->
                <div class="feature-panel" id="time-tracker-panel">
                    <div class="section-header">
                        <h2 class="section-title"><i class="fas fa-stopwatch"></i> Time Tracker</h2>
                        <div class="btn-secondary">
                            <i class="fas fa-chart-bar"></i> Reports
                        </div>
                    </div>
                    
                    <div class="time-tracker-container">
                        <div class="tracker-timer">
                            <div style="font-size: 1.2rem; color: var(--text-secondary); margin-bottom: 10px;">Current Session</div>
                            <div class="timer-display" id="timer-display">00:00:00</div>
                            <div style="font-size: 1rem; color: var(--text-secondary); margin-bottom: 20px;" id="timer-activity">No activity selected</div>
                            
                            <div class="timer-controls">
                                <button class="timer-btn" id="timer-reset">
                                    <i class="fas fa-redo"></i>
                                </button>
                                <button class="timer-btn primary" id="timer-start">
                                    <i class="fas fa-play"></i>
                                </button>
                                <button class="timer-btn" id="timer-stop">
                                    <i class="fas fa-pause"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="tracker-activities">
                            <div class="activity-header">
                                <div class="activity-title">Study Activities</div>
                                <button class="btn-secondary" id="add-activity">
                                    <i class="fas fa-plus"></i> Add Activity
                                </button>
                            </div>
                            
                            <div class="activity-list" id="activity-list">
                                <div class="spinner-container">
                                    <div class="spinner"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Virtual Currency Panel -->
                <div class="feature-panel" id="credits-panel">
                    <div class="section-header">
                        <h2 class="section-title"><i class="fas fa-coins"></i> Virtual Currency - Credits</h2>
                        <div class="btn-secondary">
                            <i class="fas fa-history"></i> Transaction History
                        </div>
                    </div>
                    
                    <div class="currency-container">
                        <div class="currency-balance">
                            <div class="currency-icon">
                                <i class="fas fa-coins"></i>
                            </div>
                            <div class="currency-amount" id="currency-amount">...</div>
                            <div class="currency-label">Credits</div>
                            <div class="currency-actions">
                                <button class="currency-btn earn" id="earn-credits">
                                    <i class="fas fa-plus"></i> Earn
                                </button>
                                <button class="currency-btn spend" id="spend-credits">
                                    <i class="fas fa-shopping-cart"></i> Spend
                                </button>
                            </div>
                        </div>
                        
                        <div class="currency-transactions">
                            <div class="transaction-header">
                                <div class="transaction-title">Recent Transactions</div>
                            </div>
                            <div class="transaction-list" id="transaction-list">
                                <div class="spinner-container">
                                    <div class="spinner"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Leaderboard Panel -->
                <div class="feature-panel" id="leaderboard-panel">
                    <div class="section-header">
                        <h2 class="section-title"><i class="fas fa-trophy"></i> Leaderboard</h2>
                        <div class="btn-secondary">
                            <i class="fas fa-sync"></i> Refresh
                        </div>
                    </div>
                    
                    <div class="leaderboard-container">
                        <div class="leaderboard-rank">
                            <div class="rank-position" id="rank-position">#5</div>
                            <div class="rank-label">Your Rank</div>
                            <div class="rank-medal" id="rank-medal">
                                <i class="fas fa-medal"></i>
                            </div>
                            <div class="rank-points" id="rank-points">2100 Points</div>
                            <div class="rank-percentile" id="rank-percentile">Top 63%</div>
                        </div>
                        
                        <div class="leaderboard-list">
                            <table class="leaderboard-table">
                                <thead>
                                    <tr>
                                        <th>Rank</th>
                                        <th>Name</th>
                                        <th>Points</th>
                                    </tr>
                                </thead>
                                <tbody id="leaderboard-tbody">
                                    <!-- Leaderboard rows will be generated here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <!-- Floating Chatbot Button -->
    <button id="chatbot-btn" class="chatbot-btn">
        <i class="fas fa-comments"></i>
        <span>IB HELP</span>
    </button>

    <!-- Chatbot Modal -->
    <div class="chatbot-modal" id="chatbot-modal">
        <div class="chatbot-container">
            <div class="chatbot-header">
                <div class="chatbot-title">
                    <i class="fas fa-robot"></i> IB HELP
                </div>
                <button class="chatbot-close-btn" id="chatbot-close-btn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="chatbot-messages" id="chatbot-messages">
                <div class="message ai">
                    <div class="message-bubble">
                        Hello! I'm your IB HELP assistant. How can I assist you today?
                    </div>
                </div>
            </div>
            <div class="chatbot-input-container">
                <input type="text" class="chatbot-input" placeholder="Type your message..." id="chatbot-input">
                <button class="chatbot-send-btn" id="chatbot-send-btn">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>
    
    <!-- Modals -->
    <!-- Profile Modal -->
    <div class="modal-overlay" id="profile-modal">
        <div class="modal">
            <div class="modal-header">
                <h2>User Profile</h2>
                <button class="modal-close" id="profile-modal-close-btn">&times;</button>
            </div>
            <div class="modal-body" id="profile-content">
                <!-- Profile content will be loaded here -->
            </div>
        </div>
    </div>
    
    <!-- Event Modal -->
    <div class="modal-overlay" id="event-modal">
        <div class="modal">
            <div class="modal-header">
                <h2>Add Event</h2>
                <button class="modal-close" id="event-modal-close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Event Title</label>
                    <input type="text" class="form-input" id="event-title" placeholder="Enter event title">
                </div>
                <div class="form-group">
                    <label class="form-label">Subject</label>
                    <input type="text" class="form-input" id="event-subject" placeholder="Enter subject">
                </div>
                <div class="form-group">
                    <label class="form-label">Date</label>
                    <input type="date" class="form-input" id="event-date">
                </div>
                <div class="form-group">
                    <label class="form-label">Time</label>
                    <input type="time" class="form-input" id="event-time">
                </div>
                <div class="form-group">
                    <label class="form-label">Duration (minutes)</label>
                    <input type="number" class="form-input" id="event-duration" placeholder="60">
                </div>
                <button class="btn-primary" id="save-event">Save Event</button>
            </div>
        </div>
    </div>
    
    <!-- Upload Modal -->
    <div class="modal-overlay" id="upload-modal">
        <div class="modal">
            <div class="modal-header">
                <h2>Upload Files</h2>
                <button class="modal-close" id="upload-modal-close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="upload-zone" id="upload-zone">
                    <div class="upload-icon">
                        <i class="fas fa-cloud-upload-alt"></i>
                    </div>
                    <div class="upload-text">Drag & drop files here or click to browse</div>
                    <div class="upload-subtext">Supports PDF, DOC, DOCX, PPT, PPTX</div>
                </div>
                <input type="file" id="file-input" multiple style="display: none;">
                <div id="upload-progress" style="display: none; margin-top: 20px;">
                    <div class="progress-bar">
                        <div class="progress-fill" id="upload-progress-bar" style="width: 0%;"></div>
                    </div>
                    <div id="upload-status" style="text-align: center; margin-top: 10px;">Uploading...</div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <i class="fas fa-check-circle"></i>
        <span id="toast-message">Success!</span>
    </div>
    
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script>
        // Initialize Firebase
        const firebaseConfig = { 
            apiKey: "AIzaSyDCmvA9sFCSc5r4ZuFUJuGdO1LDoW7rKao", 
            authDomain: "student-portal-free.firebaseapp.com", 
            projectId: "student-portal-free", 
            storageBucket: "student-portal-free.appspot.com", 
            messagingSenderId: "272865877510", 
            appId: "1:272865877510:web:0875a2502ae55bbf9ead87" 
        };
        
        // Initialize Firebase only if not already initialized
        if (!firebase.apps.length) {
            firebase.initializeApp(firebaseConfig);
        }
        
        const auth = firebase.auth();
        const db = firebase.firestore();
        
        // Global variables
        let currentUser = null;
        let userData = null;
        let lastNoticeTime = null;
        let timerInterval = null;
        let timerSeconds = 0;
        let timerRunning = false;
        let currentActivity = null;
        let currentDate = new Date();
        let studyStreak = 0;
        let totalStudyHours = 0;
        let tasks = [];
        let events = [];
        let quizQuestions = [];
        let mindmapNodes = [];
        let selectedPriority = 'high';
        let studyRooms = [];
        let notes = [];
        let goals = [];
        
        // DOM Elements
        const studentNameEl = document.getElementById('student-name');
        const logoutBtn = document.getElementById('logout-btn');
        const profileBtn = document.getElementById('profile-btn');
        const profileModal = document.getElementById('profile-modal');
        const profileModalCloseBtn = document.getElementById('profile-modal-close-btn');
        const profileContent = document.getElementById('profile-content');
        
        // Dashboard counters
        const materialsCount = document.getElementById('materials-count');
        const pyqsCount = document.getElementById('pyqs-count');
        const seminarsCount = document.getElementById('seminars-count');
        const creditsCount = document.getElementById('credits-count');
        const streakCount = document.getElementById('streak-count');
        const hoursCount = document.getElementById('hours-count');
        
        // Feature tabs
        const featureTabs = document.querySelectorAll('.feature-tab');
        const featurePanels = document.querySelectorAll('.feature-panel');
        
        // Timer elements
        const timerDisplay = document.getElementById('timer-display');
        const timerActivity = document.getElementById('timer-activity');
        const timerStart = document.getElementById('timer-start');
        const timerStop = document.getElementById('timer-stop');
        const timerReset = document.getElementById('timer-reset');
        
        // AI Assistant elements
        const aiMessages = document.getElementById('ai-messages');
        const aiInput = document.getElementById('ai-input');
        const aiSend = document.getElementById('ai-send');
        
        // Resume Builder elements
        const resumeSections = document.querySelectorAll('.resume-section');
        const resumeForms = document.querySelectorAll('.resume-form');
        
        // Toast notification
        const toast = document.getElementById('toast');
        const toastMessage = document.getElementById('toast-message');
        
        // Chatbot elements
        const chatbotBtn = document.getElementById('chatbot-btn');
        const chatbotModal = document.getElementById('chatbot-modal');
        const chatbotCloseBtn = document.getElementById('chatbot-close-btn');
        const chatbotMessages = document.getElementById('chatbot-messages');
        const chatbotInput = document.getElementById('chatbot-input');
        const chatbotSendBtn = document.getElementById('chatbot-send-btn');
        
        // Enhanced toast function with auto-hide
        function showToast(message, type = 'success') {
            toastMessage.textContent = message;
            toast.className = `toast ${type} show`;
            
            const icon = toast.querySelector('i');
            if (type === 'success') {
                icon.className = 'fas fa-check-circle';
            } else if (type === 'error') {
                icon.className = 'fas fa-exclamation-circle';
            } else if (type === 'info') {
                icon.className = 'fas fa-info-circle';
            }
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 4000);
        }
        
        // Switch to specific tab
        function switchToTab(tabName) {
            const tab = document.querySelector(`[data-tab="${tabName}"]`);
            if (tab) {
                tab.click();
            }
        }
        
        // Format timestamp
        function formatTimestamp(timestamp) {
            if (!timestamp || !timestamp.toDate) return 'N/A';
            const date = timestamp.toDate();
            const now = new Date();
            const diffMs = now - date;
            const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));
            
            if (diffDays === 0) {
                return 'Today ' + date.toLocaleTimeString('en-US', { 
                    hour: 'numeric', minute: '2-digit', hour12: true 
                });
            } else if (diffDays === 1) {
                return 'Yesterday';
            } else if (diffDays < 7) {
                return `${diffDays} days ago`;
            } else {
                return date.toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' });
            }
        }
        
        // Format time
        function formatTime(seconds) {
            const hrs = Math.floor(seconds / 3600);
            const mins = Math.floor((seconds % 3600) / 60);
            const secs = seconds % 60;
            
            return `${hrs.toString().padStart(2, '0')}:${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }
        
        // Generate calendar
        function generateCalendar() {
            const calendarGrid = document.getElementById('calendar-grid');
            const currentMonthEl = document.getElementById('current-month');
            const calendarMonth = document.getElementById('calendar-month');
            
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            
            const monthNames = ['January', 'February', 'March', 'April', 'May', 'June',
                               'July', 'August', 'September', 'October', 'November', 'December'];
            
            currentMonthEl.textContent = `${monthNames[month]} ${year}`;
            calendarMonth.textContent = `${monthNames[month]} ${year}`;
            
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            const today = new Date();
            
            let calendarHTML = '';
            
            // Empty cells for days before month starts
            for (let i = 0; i < firstDay; i++) {
                calendarHTML += '<div class="calendar-day"></div>';
            }
            
            // Days of the month
            for (let day = 1; day <= daysInMonth; day++) {
                const isToday = today.getDate() === day && 
                               today.getMonth() === month && 
                               today.getFullYear() === year;
                
                const dayEvents = events.filter(event => {
                    if (!event.date) return false;
                    const eventDate = new Date(event.date);
                    return eventDate.getDate() === day && 
                           eventDate.getMonth() === month && 
                           eventDate.getFullYear() === year;
                });
                
                let eventsHTML = '';
                dayEvents.slice(0, 2).forEach(event => {
                    eventsHTML += `<div class="calendar-event">${event.title}</div>`;
                });
                
                calendarHTML += `
                    <div class="calendar-day ${isToday ? 'today' : ''}" onclick="selectDate(${year}, ${month}, ${day})">
                        <div class="calendar-day-number">${day}</div>
                        <div class="calendar-events">${eventsHTML}</div>
                    </div>
                `;
            }
            
            calendarGrid.innerHTML = calendarHTML;
            
            // Generate mini calendar
            generateMiniCalendar();
            
            // Update today's events
            updateTodayEvents();
        }
        
        // Generate mini calendar
        function generateMiniCalendar() {
            const calendarMini = document.getElementById('calendar-mini');
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            const today = new Date();
            
            let miniHTML = '';
            
            // Empty cells
            for (let i = 0; i < firstDay; i++) {
                miniHTML += '<div class="calendar-mini-day"></div>';
            }
            
            // Days
            for (let day = 1; day <= daysInMonth; day++) {
                const isToday = today.getDate() === day && 
                               today.getMonth() === month && 
                               today.getFullYear() === year;
                
                miniHTML += `
                    <div class="calendar-mini-day ${isToday ? 'today' : ''}" onclick="selectDate(${year}, ${month}, ${day})">
                        ${day}
                    </div>
                `;
            }
            
            calendarMini.innerHTML = miniHTML;
        }
        
        // Update today's events
        function updateTodayEvents() {
            const todayEventsContainer = document.getElementById('today-events');
            const today = new Date();
            const todayFormatted = today.toISOString().split('T')[0];
            
            const todaysEvents = events.filter(event => event.date === todayFormatted);
            
            if (todaysEvents.length === 0) {
                todayEventsContainer.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon"><i class="fas fa-calendar"></i></div>
                        <p>No events today</p>
                    </div>
                `;
                return;
            }
            
            let eventsHTML = '';
            todaysEvents.forEach(event => {
                eventsHTML += `
                    <div class="calendar-event">
                        <strong>${event.title}</strong>
                        <div>${event.time} • ${event.duration} mins</div>
                    </div>
                `;
            });
            
            todayEventsContainer.innerHTML = eventsHTML;
        }
        
        // Select date
        function selectDate(year, month, day) {
            const selectedDate = new Date(year, month, day);
            showToast(`Selected: ${selectedDate.toLocaleDateString()}`, 'info');
        }
        
        // Load tasks
        function loadTasks() {
            const tasksContainer = document.getElementById('tasks-container');
            
            if (tasks.length === 0) {
                tasksContainer.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon"><i class="fas fa-tasks"></i></div>
                        <p>No tasks yet</p>
                    </div>
                `;
                return;
            }
            
            const tasksHTML = tasks.map((task, index) => `
                <div class="task-item">
                    <div class="task-info">
                        <div class="task-checkbox ${task.completed ? 'checked' : ''}" 
                             onclick="toggleTask(${index})"></div>
                        <div class="task-details">
                            <div class="task-title ${task.completed ? 'line-through' : ''}">${task.title}</div>
                            <div class="task-due">Due: ${task.dueDate}</div>
                        </div>
                    </div>
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <div class="task-priority ${task.priority}">${task.priority}</div>
                        <div class="task-actions">
                            <button class="task-action-btn" onclick="editTask(${index})">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="task-action-btn" onclick="deleteTask(${index})">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
            
            tasksContainer.innerHTML = tasksHTML;
        }
        
        // Toggle task completion
        function toggleTask(index) {
            tasks[index].completed = !tasks[index].completed;
            loadTasks();
            showToast(tasks[index].completed ? 'Task completed!' : 'Task marked incomplete', 'success');
        }
        
        // Delete task
        function deleteTask(index) {
            if (confirm('Are you sure you want to delete this task?')) {
                tasks.splice(index, 1);
                loadTasks();
                showToast('Task deleted', 'success');
            }
        }
        
        // Edit task
        function editTask(index) {
            const task = tasks[index];
            document.getElementById('task-title').value = task.title;
            document.getElementById('task-description').value = task.description;
            document.getElementById('task-due-date').value = task.dueDate;
            
            // Update priority buttons
            document.querySelectorAll('.priority-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.getAttribute('data-priority') === task.priority) {
                    btn.classList.add('active');
                }
            });
            
            // Remove the task for re-adding
            tasks.splice(index, 1);
            loadTasks();
            showToast('Task loaded for editing', 'info');
        }
        
        // Initialize page
        function initializePage() {
            // Theme toggle
            const themeToggle = document.getElementById('theme-toggle');
            themeToggle.addEventListener('click', () => {
                document.body.classList.toggle('light-theme');
                const isDark = !document.body.classList.contains('light-theme');
                themeToggle.innerHTML = isDark ? '<i class="fas fa-moon"></i><span>Dark</span>' : '<i class="fas fa-sun"></i><span>Light</span>';
            });
            
            // Logout functionality
            logoutBtn.addEventListener('click', () => {
                if (confirm('Are you sure you want to logout?')) {
                    auth.signOut().then(() => {
                        window.location.replace('/index.html');
                    }).catch(error => {
                        showToast("Logout failed. Please try again.", "error");
                    });
                }
            });
            
            // Profile modal
            profileBtn.addEventListener('click', () => {
                loadProfile();
                profileModal.classList.add('active');
            });
            
            profileModalCloseBtn.addEventListener('click', () => {
                profileModal.classList.remove('active');
            });
            
            profileModal.addEventListener('click', (e) => {
                if (e.target === profileModal) {
                    profileModal.classList.remove('active');
                }
            });
            
            // Feature tabs
            featureTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabId = tab.getAttribute('data-tab');
                    
                    // Update active tab
                    featureTabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    
                    // Update active panel
                    featurePanels.forEach(panel => {
                        panel.classList.remove('active');
                        if (panel.id === `${tabId}-panel`) {
                            panel.classList.add('active');
                        }
                    });
                    
                    // Load panel-specific data
                    loadPanelData(tabId);
                });
            });
            
            // Calendar navigation
            document.getElementById('prev-month').addEventListener('click', () => {
                currentDate.setMonth(currentDate.getMonth() - 1);
                generateCalendar();
            });
            
            document.getElementById('next-month').addEventListener('click', () => {
                currentDate.setMonth(currentDate.getMonth() + 1);
                generateCalendar();
            });
            
            // Event modal
            const eventModal = document.getElementById('event-modal');
            const eventModalCloseBtn = document.getElementById('event-modal-close-btn');
            
            document.getElementById('add-event-btn').addEventListener('click', () => {
                eventModal.classList.add('active');
            });
            
            eventModalCloseBtn.addEventListener('click', () => {
                eventModal.classList.remove('active');
            });
            
            document.getElementById('save-event').addEventListener('click', () => {
                const title = document.getElementById('event-title').value;
                const subject = document.getElementById('event-subject').value;
                const date = document.getElementById('event-date').value;
                const time = document.getElementById('event-time').value;
                const duration = document.getElementById('event-duration').value;
                
                if (title && date) {
                    events.push({
                        title, subject, date, time, duration,
                        id: Date.now()
                    });
                    
                    generateCalendar();
                    eventModal.classList.remove('active');
                    showToast('Event added successfully', 'success');
                    
                    // Clear form
                    document.getElementById('event-title').value = '';
                    document.getElementById('event-subject').value = '';
                    document.getElementById('event-date').value = '';
                    document.getElementById('event-time').value = '';
                    document.getElementById('event-duration').value = '';
                } else {
                    showToast('Please fill in required fields', 'error');
                }
            });
            
            // Task management
            const priorityBtns = document.querySelectorAll('.priority-btn');
            priorityBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    priorityBtns.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    selectedPriority = btn.getAttribute('data-priority');
                });
            });
            
            document.getElementById('save-task').addEventListener('click', () => {
                const title = document.getElementById('task-title').value;
                const description = document.getElementById('task-description').value;
                const dueDate = document.getElementById('task-due-date').value;
                
                if (title && dueDate) {
                    tasks.push({
                        title, description, dueDate,
                        priority: selectedPriority,
                        completed: false,
                        id: Date.now()
                    });
                    
                    loadTasks();
                    showToast('Task added successfully', 'success');
                    
                    // Clear form
                    document.getElementById('task-title').value = '';
                    document.getElementById('task-description').value = '';
                    document.getElementById('task-due-date').value = '';
                } else {
                    showToast('Please fill in required fields', 'error');
                }
            });
            
            // Study goals
            document.getElementById('save-goal').addEventListener('click', () => {
                const title = document.getElementById('goal-title').value;
                const description = document.getElementById('goal-description').value;
                const deadline = document.getElementById('goal-deadline').value;
                const target = document.getElementById('goal-target').value;
                
                if (title && deadline) {
                    goals.push({
                        title, description, deadline, target,
                        progress: 0,
                        status: 'in-progress',
                        id: Date.now()
                    });
                    
                    loadGoals();
                    showToast('Goal added successfully', 'success');
                    
                    // Clear form
                    document.getElementById('goal-title').value = '';
                    document.getElementById('goal-description').value = '';
                    document.getElementById('goal-deadline').value = '';
                    document.getElementById('goal-target').value = '';
                } else {
                    showToast('Please fill in required fields', 'error');
                }
            });
            
            // Quiz maker
            document.getElementById('add-question').addEventListener('click', () => {
                const title = document.getElementById('quiz-title').value;
                const subject = document.getElementById('quiz-subject').value;
                const question = document.getElementById('quiz-question').value;
                const option1 = document.getElementById('option-1').value;
                const option2 = document.getElementById('option-2').value;
                const option3 = document.getElementById('option-3').value;
                const option4 = document.getElementById('option-4').value;
                
                if (question && option1 && option2) {
                    quizQuestions.push({
                        question, 
                        options: [option1, option2, option3, option4].filter(opt => opt),
                        correct: 0, // First option is correct
                        id: Date.now()
                    });
                    
                    updateQuizPreview();
                    showToast('Question added to quiz', 'success');
                    
                    // Clear question form
                    document.getElementById('quiz-question').value = '';
                    document.getElementById('option-1').value = '';
                    document.getElementById('option-2').value = '';
                    document.getElementById('option-3').value = '';
                    document.getElementById('option-4').value = '';
                } else {
                    showToast('Please fill in question and at least 2 options', 'error');
                }
            });
            
            // Mind map functionality
            let nodeCounter = 2;
            document.getElementById('add-node-btn').addEventListener('click', () => {
                const text = document.getElementById('node-text').value;
                if (text) {
                    const canvas = document.getElementById('mindmap-canvas');
                    const node = document.createElement('div');
                    node.className = 'mindmap-node';
                    node.setAttribute('data-id', nodeCounter++);
                    node.textContent = text;
                    node.style.top = Math.random() * 400 + 'px';
                    node.style.left = Math.random() * 600 + 'px';
                    
                    // Make draggable
                    makeDraggable(node);
                    
                    canvas.appendChild(node);
                    document.getElementById('node-text').value = '';
                    showToast('Node added', 'success');
                }
            });
            
            document.getElementById('clear-mindmap').addEventListener('click', () => {
                if (confirm('Clear all nodes?')) {
                    const canvas = document.getElementById('mindmap-canvas');
                    const nodes = canvas.querySelectorAll('.mindmap-node');
                    nodes.forEach(node => {
                        if (node.getAttribute('data-id') !== '1') {
                            node.remove();
                        }
                    });
                    showToast('Mind map cleared', 'info');
                }
            });
            
            // Collaborative notes
            const notesList = document.getElementById('notes-list');
            const noteEditor = document.getElementById('note-editor');
            
            notesList.addEventListener('click', (e) => {
                const noteItem = e.target.closest('.note-item');
                if (noteItem) {
                    document.querySelectorAll('.note-item').forEach(item => {
                        item.classList.remove('active');
                    });
                    noteItem.classList.add('active');
                    
                    // Load note content (placeholder)
                    const noteTitle = noteItem.querySelector('.note-title').textContent;
                    showToast(`Loaded: ${noteTitle}`, 'info');
                }
            });
            
            // Editor toolbar
            document.querySelectorAll('.toolbar-btn[data-command]').forEach(btn => {
                btn.addEventListener('click', () => {
                    const command = btn.getAttribute('data-command');
                    document.execCommand(command, false, null);
                    btn.classList.toggle('active');
                });
            });
            
            document.getElementById('save-note').addEventListener('click', () => {
                showToast('Note saved', 'success');
            });
            
            document.getElementById('new-note-btn').addEventListener('click', () => {
                const title = prompt('Enter note title:');
                if (title) {
                    const notesList = document.getElementById('notes-list');
                    const newNote = document.createElement('div');
                    newNote.className = 'note-item';
                    newNote.innerHTML = `
                        <div class="note-title">${title}</div>
                        <div class="note-preview">New note...</div>
                    `;
                    notesList.appendChild(newNote);
                    showToast('New note created', 'success');
                }
            });
            
            // File upload
            const uploadZone = document.getElementById('upload-zone');
            const fileInput = document.getElementById('file-input');
            
            uploadZone.addEventListener('click', () => fileInput.click());
            uploadZone.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadZone.classList.add('dragover');
            });
            uploadZone.addEventListener('dragleave', () => {
                uploadZone.classList.remove('dragover');
            });
            uploadZone.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadZone.classList.remove('dragover');
                handleFiles(e.dataTransfer.files);
            });
            
            fileInput.addEventListener('change', (e) => {
                handleFiles(e.target.files);
            });
            
            // Timer functionality
            timerStart.addEventListener('click', () => {
                if (!timerRunning) {
                    timerRunning = true;
                    timerStart.innerHTML = '<i class="fas fa-pause"></i>';
                    
                    timerInterval = setInterval(() => {
                        timerSeconds++;
                        timerDisplay.textContent = formatTime(timerSeconds);
                    }, 1000);
                    
                    if (!currentActivity) {
                        currentActivity = 'General Study';
                        timerActivity.textContent = currentActivity;
                    }
                    
                    showToast('Timer started', 'info');
                } else {
                    timerRunning = false;
                    timerStart.innerHTML = '<i class="fas fa-play"></i>';
                    clearInterval(timerInterval);
                    
                    showToast('Timer paused', 'info');
                }
            });
            
            timerStop.addEventListener('click', () => {
                if (timerRunning) {
                    timerRunning = false;
                    timerStart.innerHTML = '<i class="fas fa-play"></i>';
                    clearInterval(timerInterval);
                    
                    // Save the session
                    saveTimeSession(timerSeconds, currentActivity);
                    
                    // Update study hours
                    totalStudyHours += timerSeconds / 3600;
                    hoursCount.textContent = Math.round(totalStudyHours);
                    
                    // Update study streak
                    updateStudyStreak();
                    
                    // Reset timer
                    timerSeconds = 0;
                    timerDisplay.textContent = formatTime(timerSeconds);
                    timerActivity.textContent = 'No activity selected';
                    currentActivity = null;
                    
                    showToast('Session saved successfully', 'success');
                }
            });
            
            timerReset.addEventListener('click', () => {
                if (timerRunning) {
                    timerRunning = false;
                    timerStart.innerHTML = '<i class="fas fa-play</i>';
                    clearInterval(timerInterval);
                }
                
                timerSeconds = 0;
                timerDisplay.textContent = formatTime(timerSeconds);
                timerActivity.textContent = 'No activity selected';
                currentActivity = null;
                
                showToast('Timer reset', 'info');
            });
            
            // AI Assistant functionality
            aiSend.addEventListener('click', sendAiMessage);
            aiInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    sendAiMessage();
                }
            });
            
            // Resume Builder functionality
            resumeSections.forEach(section => {
                section.addEventListener('click', () => {
                    const sectionId = section.getAttribute('data-section');
                    
                    // Update active section
                    resumeSections.forEach(s => s.classList.remove('active'));
                    section.classList.add('active');
                    
                    // Update active form
                    resumeForms.forEach(form => {
                        form.classList.remove('active');
                        if (form.id === `${sectionId}-form`) {
                            form.classList.add('active');
                        }
                    });
                });
            });
            
            // Resume save buttons
            document.getElementById('save-personal')?.addEventListener('click', savePersonalInfo);
            document.getElementById('save-education')?.addEventListener('click', saveEducation);
            document.getElementById('save-experience')?.addEventListener('click', saveExperience);
            document.getElementById('save-skills')?.addEventListener('click', saveSkills);
            document.getElementById('save-project')?.addEventListener('click', saveProject);
            document.getElementById('save-achievements')?.addEventListener('click', saveAchievements);
            
            // Download resume
            document.getElementById('download-resume')?.addEventListener('click', downloadResume);
            
            // Virtual currency
            document.getElementById('earn-credits')?.addEventListener('click', earnCredits);
            document.getElementById('spend-credits')?.addEventListener('click', spendCredits);
            
            // Add activity
            document.getElementById('add-activity')?.addEventListener('click', addActivity);
            
            // Initialize calendar
            generateCalendar();
            
            // Initialize sample data
            initializeSampleData();
            
            // Load dashboard data
            loadDashboardData();
            
            // Chatbot functionality
            chatbotBtn.addEventListener('click', () => {
                chatbotModal.classList.add('active');
                chatbotInput.focus();
            });
            
            chatbotCloseBtn.addEventListener('click', () => {
                chatbotModal.classList.remove('active');
            });
            
            chatbotSendBtn.addEventListener('click', sendChatbotMessage);
            chatbotInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    sendChatbotMessage();
                }
            });
        }
        
        // Initialize sample data
        function initializeSampleData() {
            // Sample tasks
            tasks = [
                {
                    title: 'Complete Calculus Assignment',
                    description: 'Solve problems 1-15 from Chapter 5',
                    dueDate: '2025-09-05',
                    priority: 'high',
                    completed: false,
                    id: 1
                },
                {
                    title: 'Physics Lab Report',
                    description: 'Write report on pendulum experiment',
                    dueDate: '2025-09-03',
                    priority: 'medium',
                    completed: true,
                    id: 2
                }
            ];
            
            // Sample events
            events = [
                {
                    title: 'Math Exam',
                    subject: 'Mathematics',
                    date: '2025-09-10',
                    time: '10:00',
                    duration: '120',
                    id: 1
                },
                {
                    title: 'Physics Seminar',
                    subject: 'Physics',
                    date: '2025-09-02',
                    time: '14:00',
                    duration: '60',
                    id: 2
                }
            ];
            
            // Sample goals
            goals = [
                {
                    title: 'Complete Calculus Chapter 5',
                    description: 'Study and solve all problems',
                    deadline: '2025-09-15',
                    target: '15 problems',
                    progress: 60,
                    status: 'in-progress',
                    id: 1
                },
                {
                    title: 'Read 50 pages of Physics textbook',
                    description: 'Read and summarize key concepts',
                    deadline: '2025-08-30',
                    target: '50 pages',
                    progress: 100,
                    status: 'completed',
                    id: 2
                }
            ];
            
            // Sample study rooms
            studyRooms = [
                {
                    name: 'Calculus Study Session',
                    subject: 'Mathematics',
                    description: 'Working through integration problems and discussing techniques',
                    participants: 5,
                    status: 'active',
                    id: 1
                },
                {
                    name: 'Physics Lab Discussion',
                    subject: 'Physics',
                    description: 'Discussing quantum mechanics lab results and theory',
                    participants: 3,
                    status: 'active',
                    id: 2
                },
                {
                    name: 'Computer Science Project',
                    subject: 'CS',
                    description: 'Planning our final year project on machine learning',
                    participants: 3,
                    status: 'inactive',
                    id: 3
                }
            ];
            
            // Initialize study streak
            studyStreak = Math.floor(Math.random() * 15) + 1;
            streakCount.textContent = studyStreak;
            document.getElementById('streak-display').textContent = studyStreak;
            
            // Initialize study hours
            totalStudyHours = Math.random() * 15 + 5;
            hoursCount.textContent = Math.round(totalStudyHours);
        }
        
        // Update study streak
        function updateStudyStreak() {
            const lastStudyDate = localStorage.getItem('lastStudyDate');
            const today = new Date().toDateString();
            
            if (lastStudyDate !== today) {
                studyStreak++;
                streakCount.textContent = studyStreak;
                document.getElementById('streak-display').textContent = studyStreak;
                localStorage.setItem('lastStudyDate', today);
                showToast(`Study streak: ${studyStreak} days!`, 'success');
            }
        }
        
        // Update quiz preview
        function updateQuizPreview() {
            const previewContent = document.getElementById('quiz-preview-content');
            const title = document.getElementById('quiz-title').value;
            const subject = document.getElementById('quiz-subject').value;
            
            if (quizQuestions.length === 0) {
                previewContent.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon"><i class="fas fa-question-circle"></i></div>
                        <p>Add questions to see preview</p>
                    </div>
                `;
                return;
            }
            
            let previewHTML = '';
            if (title) {
                previewHTML += `<h3 style="color: var(--text-primary); margin-bottom: 10px;">${title}</h3>`;
            }
            if (subject) {
                previewHTML += `<div style="color: var(--text-secondary); margin-bottom: 20px;">Subject: ${subject}</div>`;
            }
            
            quizQuestions.forEach((q, index) => {
                previewHTML += `
                    <div style="margin-bottom: 20px; padding: 15px; background: rgba(255,255,255,0.03); border-radius: 8px;">
                        <div style="font-weight: 600; margin-bottom: 10px; color: var(--text-primary);">
                            ${index + 1}. ${q.question}
                        </div>
                        <div style="margin-left: 20px;">
                            ${q.options.map((opt, i) => `
                                <div style="margin-bottom: 5px; color: ${i === q.correct ? 'var(--success)' : 'var(--text-secondary)'};">
                                    ${String.fromCharCode(65 + i)}. ${opt} ${i === q.correct ? '✓' : ''}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            });
            
            previewContent.innerHTML = previewHTML;
        }
        
        // Make element draggable
        function makeDraggable(element) {
            let isDragging = false;
            let currentX, currentY, initialX, initialY;
            
            element.addEventListener('mousedown', (e) => {
                isDragging = true;
                initialX = e.clientX - element.offsetLeft;
                initialY = e.clientY - element.offsetTop;
            });
            
            document.addEventListener('mousemove', (e) => {
                if (!isDragging) return;
                
                currentX = e.clientX - initialX;
                currentY = e.clientY - initialY;
                
                element.style.left = currentX + 'px';
                element.style.top = currentY + 'px';
            });
            
            document.addEventListener('mouseup', () => {
                isDragging = false;
            });
        }
        
        // Handle file uploads
        function handleFiles(files) {
            const uploadProgress = document.getElementById('upload-progress');
            const uploadProgressBar = document.getElementById('upload-progress-bar');
            const uploadStatus = document.getElementById('upload-status');
            
            if (files.length > 0) {
                uploadProgress.style.display = 'block';
                
                // Simulate upload progress
                let progress = 0;
                const interval = setInterval(() => {
                    progress += Math.random() * 20;
                    if (progress >= 100) {
                        progress = 100;
                        clearInterval(interval);
                        uploadStatus.textContent = 'Upload complete!';
                        setTimeout(() => {
                            uploadProgress.style.display = 'none';
                            document.getElementById('upload-modal').classList.remove('active');
                            showToast(`${files.length} file(s) uploaded successfully`, 'success');
                        }, 1000);
                    }
                    uploadProgressBar.style.width = progress + '%';
                    uploadStatus.textContent = `Uploading ${files.length} file(s)... ${Math.round(progress)}%`;
                }, 200);
            }
        }
        
        // Load panel-specific data
        function loadPanelData(panelId) {
            switch(panelId) {
                case 'planner':
                    generateCalendar();
                    break;
                case 'tasks':
                    loadTasks();
                    break;
                case 'analytics':
                    updateAnalytics();
                    break;
                case 'badges':
                    loadBadges();
                    break;
                case 'ai-assistant':
                    // AI assistant is already initialized
                    break;
                case 'time-tracker':
                    loadActivities();
                    break;
                case 'credits':
                    loadTransactions();
                    break;
                case 'leaderboard':
                    loadLeaderboard();
                    break;
                case 'quiz-maker':
                    updateQuizPreview();
                    break;
                case 'goals':
                    loadGoals();
                    break;
                case 'study-rooms':
                    loadStudyRooms();
                    break;
            }
        }
        
        // Update analytics
        function updateAnalytics() {
            const weeklyProgressCircle = document.getElementById('weekly-progress-circle');
            const weeklyProgressText = document.getElementById('weekly-progress-text');
            const weeklyHours = document.getElementById('weekly-hours');
            
            const progress = Math.min((totalStudyHours / 20) * 100, 100);
            const circumference = 2 * Math.PI * 50;
            const strokeDasharray = (progress / 100) * circumference;
            
            weeklyProgressCircle.style.strokeDasharray = `${strokeDasharray} ${circumference}`;
            weeklyProgressText.textContent = `${Math.round(progress)}%`;
            weeklyHours.textContent = `${Math.round(totalStudyHours)}/20 hours this week`;
        }
        
        // Send AI message
        function sendAiMessage() {
            const message = aiInput.value.trim();
            if (!message) return;
            
            // Add user message
            const userMessage = document.createElement('div');
            userMessage.className = 'message user';
            userMessage.innerHTML = `<div class="message-bubble">${message}</div>`;
            aiMessages.appendChild(userMessage);
            
            // Clear input
            aiInput.value = '';
            
            // Simulate AI response
            setTimeout(() => {
                const aiMessage = document.createElement('div');
                aiMessage.className = 'message ai';
                
                // Enhanced response logic
                let response = "I'm here to help with your studies. Could you provide more details?";
                
                if (message.toLowerCase().includes('recursion')) {
                    response = "Recursion is a programming technique where a function calls itself. Think of it like Russian dolls - each doll contains a smaller version of itself until you reach the smallest one (base case).";
                } else if (message.toLowerCase().includes('exam') || message.toLowerCase().includes('test')) {
                    response = "For effective exam prep: 1) Create a study schedule 2) Use active recall techniques 3) Practice with past papers 4) Take regular breaks 5) Get adequate sleep. What subject are you preparing for?";
                } else if (message.toLowerCase().includes('stress') || message.toLowerCase().includes('anxious')) {
                    response = "Study stress is normal! Try the 25-5 technique: study for 25 minutes, then take a 5-minute break. Also consider deep breathing exercises and remember that progress matters more than perfection.";
                } else if (message.toLowerCase().includes('motivation') || message.toLowerCase().includes('motivat')) {
                    response = "Remember why you started! Set small, achievable goals and celebrate each victory. Your current study streak of " + studyStreak + " days shows you're already making great progress!";
                } else if (message.toLowerCase().includes('time management')) {
                    response = "Great question! Try time-blocking: assign specific time slots to different subjects. Use our built-in time tracker to monitor your study sessions and identify your most productive hours.";
                } else if (message.toLowerCase().includes('note') || message.toLowerCase().includes('notes')) {
                    response = "Effective note-taking tips: Use the Cornell method, create visual diagrams, summarize in your own words, and review within 24 hours. Try our collaborative notes feature for group study!";
                }
                
                aiMessage.innerHTML = `<div class="message-bubble">${response}</div>`;
                aiMessages.appendChild(aiMessage);
                
                // Scroll to bottom
                aiMessages.scrollTop = aiMessages.scrollHeight;
            }, 1000);
            
            // Scroll to bottom
            aiMessages.scrollTop = aiMessages.scrollHeight;
        }
        
        // Send chatbot message
        function sendChatbotMessage() {
            const message = chatbotInput.value.trim();
            if (!message) return;

            // Add user message
            const userMessage = document.createElement('div');
            userMessage.className = 'message user';
            userMessage.innerHTML = `<div class="message-bubble">${message}</div>`;
            chatbotMessages.appendChild(userMessage);

            // Clear input
            chatbotInput.value = '';

            // Simulate bot response
            setTimeout(() => {
                const botMessage = document.createElement('div');
                botMessage.className = 'message ai';
                
                // Enhanced response logic
                let response = "I'm here to help with your studies. Could you provide more details?";
                
                if (message.toLowerCase().includes('help')) {
                    response = "I can assist you with:\n• Study materials\n• Previous year papers\n• Exam preparation\n• Time management\n• Course concepts\nWhat would you like help with?";
                } else if (message.toLowerCase().includes('material') || message.toLowerCase().includes('note')) {
                    response = "You can access all study materials from the 'Study Materials' section on your dashboard. We have notes, e-books, and other resources organized by subject.";
                } else if (message.toLowerCase().includes('pyq') || message.toLowerCase().includes('previous')) {
                    response = "Previous year question papers are available in the 'Previous Year Papers' section. They're organized by subject and year to help you prepare effectively.";
                } else if (message.toLowerCase().includes('seminar')) {
                    response = "Check out the 'Seminars' section for recorded sessions from industry experts and faculty members. They cover important course concepts and exam tips.";
                } else if (message.toLowerCase().includes('exam') || message.toLowerCase().includes('test')) {
                    response = "For exam preparation, I recommend:\n1. Review previous year papers\n2. Take practice quizzes\n3. Use the study planner to organize your time\n4. Join virtual study rooms for group discussions";
                } else if (message.toLowerCase().includes('contact') || message.toLowerCase().includes('support')) {
                    response = "For additional support, you can:\n• Email support@ibstudioz.com\n• Call our helpline at +1-234-567-8900\n• Visit the help center on our website";
                }
                
                botMessage.innerHTML = `<div class="message-bubble">${response}</div>`;
                chatbotMessages.appendChild(botMessage);

                // Scroll to bottom
                chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
            }, 1000);

            // Scroll to bottom
            chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
        }
        
        // Save time session
        function saveTimeSession(seconds, activity) {
            if (!currentUser) return;
            
            const session = {
                userId: currentUser.uid,
                activity: activity,
                duration: seconds,
                timestamp: firebase.firestore.FieldValue.serverTimestamp()
            };
            
            db.collection('timeSessions').add(session)
                .then(() => {
                    console.log('Time session saved successfully');
                })
                .catch(error => {
                    console.error('Error saving time session:', error);
                    showToast('Failed to save session', 'error');
                });
        }
        
        // Load user profile
        function loadProfile() {
            if (!currentUser) return;
            
            profileContent.innerHTML = '<div class="spinner-container"><div class="spinner"></div></div>';
            
            db.collection('users').doc(currentUser.uid).get()
                .then(doc => {
                    if (doc.exists) {
                        const data = doc.data();
                        const profileHtml = `
                            <div style="display: grid; grid-template-columns: auto 1fr; gap: 15px; margin-bottom: 20px;">
                                <div style="font-weight: 600; color: var(--text-secondary);">Full Name:</div>
                                <div>${data.name || 'Not provided'}</div>
                                
                                <div style="font-weight: 600; color: var(--text-secondary);">Email:</div>
                                <div>${currentUser.email}</div>
                                
                                <div style="font-weight: 600; color: var(--text-secondary);">Admission No:</div>
                                <div>${data.admissionNo || 'Not provided'}</div>
                                
                                <div style="font-weight: 600; color: var(--text-secondary);">Branch:</div>
                                <div>${data.branch || 'Not provided'}</div>
                                
                                <div style="font-weight: 600; color: var(--text-secondary);">Semester:</div>
                                <div>${data.semester || 'Not provided'}</div>
                                
                                <div style="font-weight: 600; color: var(--text-secondary);">Study Streak:</div>
                                <div>${studyStreak} days</div>
                                
                                <div style="font-weight: 600; color: var(--text-secondary);">Total Study Hours:</div>
                                <div>${Math.round(totalStudyHours)} hours</div>
                                
                                <div style="font-weight: 600; color: var(--text-secondary);">Joined:</div>
                                <div>${formatTimestamp(data.createdAt)}</div>
                            </div>
                            
                            <div style="text-align: center; margin-top: 30px;">
                                <button class="btn-secondary" onclick="editProfile()">
                                    <i class="fas fa-edit"></i> Edit Profile
                                </button>
                            </div>
                        `;
                        
                        profileContent.innerHTML = profileHtml;
                    }
                })
                .catch(error => {
                    console.error('Error loading profile:', error);
                    profileContent.innerHTML = '<div class="empty-state"><p>Failed to load profile</p></div>';
                });
        }
        
        // Edit profile (placeholder function)
        function editProfile() {
            showToast('Edit profile feature coming soon!', 'info');
        }
        
        // Animate counter when value changes
        function animateCounter(element) {
            const target = parseInt(element.textContent);
            const duration = 1000;
            const start = 0;
            const increment = target / (duration / 16);
            let current = start;
            
            const updateCounter = () => {
                current += increment;
                if (current < target) {
                    element.textContent = Math.floor(current);
                    requestAnimationFrame(updateCounter);
                } else {
                    element.textContent = target;
                }
            };
            
            updateCounter();
        }
        
        // Load dashboard data
        function loadDashboardData() {
            if (!currentUser) return;
            
            // Show loading indicators
            document.querySelectorAll('.overview-number').forEach(el => {
                el.textContent = '...';
            });
            
            // Load materials count with real-time updates
            db.collection('notes').onSnapshot(snapshot => {
                materialsCount.textContent = snapshot.size;
                animateCounter(materialsCount);
            }, error => {
                console.error('Error loading materials:', error);
                materialsCount.textContent = 'Error';
            });
            
            // Load PYQs count with real-time updates
            db.collection('pyqs').onSnapshot(snapshot => {
                pyqsCount.textContent = snapshot.size;
                animateCounter(pyqsCount);
            }, error => {
                console.error('Error loading PYQs:', error);
                pyqsCount.textContent = 'Error';
            });
            
            // Load seminars count with real-time updates
            db.collection('seminars').onSnapshot(snapshot => {
                seminarsCount.textContent = snapshot.size;
                animateCounter(seminarsCount);
            }, error => {
                console.error('Error loading seminars:', error);
                seminarsCount.textContent = 'Error';
            });
            
            // Load user credits with real-time updates
            db.collection('users').doc(currentUser.uid).onSnapshot(doc => {
                if (doc.exists) {
                    const data = doc.data();
                    creditsCount.textContent = data.credits || 0;
                    userData = data;
                    studentNameEl.textContent = data.name || 'Student';
                    animateCounter(creditsCount);
                }
            }, error => {
                console.error('Error loading user data:', error);
                creditsCount.textContent = 'Error';
            });
            
            // Load study streak from user data
            db.collection('users').doc(currentUser.uid).get().then(doc => {
                if (doc.exists) {
                    const data = doc.data();
                    studyStreak = data.studyStreak || 0;
                    streakCount.textContent = studyStreak;
                    document.getElementById('streak-display').textContent = studyStreak;
                    animateCounter(streakCount);
                }
            });
            
            // Load total study hours from user data
            db.collection('users').doc(currentUser.uid).get().then(doc => {
                if (doc.exists) {
                    const data = doc.data();
                    totalStudyHours = data.totalStudyHours || 0;
                    hoursCount.textContent = Math.round(totalStudyHours);
                    animateCounter(hoursCount);
                }
            });
            
            // Load notices with real-time updates
            loadNotices();
            
            // Load recent materials with real-time updates
            loadRecentMaterials();
        }
        
        // Load notices with real-time updates
        function loadNotices() {
            const noticesList = document.getElementById('notices-list');
            const newNoticesBadge = document.getElementById('new-notices-badge');
            
            // Get last notice view time from localStorage
            lastNoticeTime = localStorage.getItem('lastNoticeTime');
            
            // Show loading state
            noticesList.innerHTML = `
                <div class="spinner-container">
                    <div class="spinner"></div>
                </div>
            `;
            
            db.collection('notices')
                .orderBy('createdAt', 'desc')
                .limit(10)
                .onSnapshot(snapshot => {
                    const notices = [];
                    let hasNewNotices = false;
                    
                    snapshot.forEach(doc => {
                        const notice = doc.data();
                        notice.id = doc.id;
                        notices.push(notice);
                        
                        // Check if this is a new notice
                        if (lastNoticeTime && notice.createdAt && notice.createdAt.toDate()) {
                            const noticeTime = notice.createdAt.toDate().getTime();
                            const lastViewTime = parseInt(lastNoticeTime);
                            if (noticeTime > lastViewTime) {
                                hasNewNotices = true;
                            }
                        }
                    });
                    
                    // Show new notices badge if there are new notices
                    if (hasNewNotices) {
                        newNoticesBadge.style.display = 'block';
                    } else {
                        newNoticesBadge.style.display = 'none';
                    }
                    
                    if (notices.length === 0) {
                        noticesList.innerHTML = `
                            <div class="empty-state">
                                <div class="empty-icon"><i class="fas fa-bullhorn"></i></div>
                                <p>No notices at the moment</p>
                            </div>
                        `;
                        return;
                    }
                    
                    const noticesHtml = notices.map(notice => {
                        const isImportant = notice.important || false;
                        const isNew = lastNoticeTime && notice.createdAt && notice.createdAt.toDate() && 
                                      notice.createdAt.toDate().getTime() > parseInt(lastNoticeTime);
                        
                        return `
                            <div class="notice-item ${isImportant ? 'important' : ''}">
                                <div class="notice-title">${notice.title || 'Untitled Notice'}</div>
                                <div class="notice-message">${notice.message || ''}</div>
                                <div class="notice-meta">
                                    <div class="notice-time">
                                        <i class="fas fa-clock"></i>
                                        ${formatTimestamp(notice.createdAt)}
                                    </div>
                                    ${isNew ? '<span class="notice-badge">NEW</span>' : ''}
                                </div>
                            </div>
                        `;
                    }).join('');
                    
                    noticesList.innerHTML = noticesHtml;
                    
                    // Mark notices as viewed when user scrolls to bottom
                    noticesList.addEventListener('scroll', () => {
                        if (noticesList.scrollTop + noticesList.clientHeight >= noticesList.scrollHeight - 50) {
                            localStorage.setItem('lastNoticeTime', Date.now().toString());
                            newNoticesBadge.style.display = 'none';
                            
                            // Remove NEW badges
                            document.querySelectorAll('.notice-badge').forEach(badge => {
                                badge.style.display = 'none';
                            });
                        }
                    });
                }, error => {
                    console.error('Error loading notices:', error);
                    noticesList.innerHTML = `
                        <div class="empty-state">
                            <div class="empty-icon"><i class="fas fa-exclamation-circle"></i></div>
                            <p>Failed to load notices</p>
                        </div>
                    `;
                });
        }
        
        // Load recent materials with real-time updates
        function loadRecentMaterials() {
            const recentMaterials = document.getElementById('recent-materials');
            
            // Show loading state
            recentMaterials.innerHTML = `
                <div class="spinner-container">
                    <div class="spinner"></div>
                </div>
            `;
            
            // Create a combined query for all materials
            const materialsPromises = [
                db.collection('notes').orderBy('createdAt', 'desc').limit(6).get(),
                db.collection('pyqs').orderBy('createdAt', 'desc').limit(6).get(),
                db.collection('seminars').orderBy('createdAt', 'desc').limit(6).get()
            ];
            
            Promise.all(materialsPromises).then(snapshots => {
                const allMaterials = [];
                
                // Process notes
                snapshots[0].forEach(doc => {
                    const data = doc.data();
                    allMaterials.push({
                        id: doc.id,
                        type: 'note',
                        title: data.title || 'Untitled',
                        details: data.details || data.description || 'No description',
                        createdAt: data.createdAt,
                        icon: 'fa-file-alt'
                    });
                });
                
                // Process PYQs
                snapshots[1].forEach(doc => {
                    const data = doc.data();
                    allMaterials.push({
                        id: doc.id,
                        type: 'pyq',
                        title: data.title || 'Untitled',
                        details: data.subject || 'No subject',
                        createdAt: data.createdAt,
                        icon: 'fa-file-alt'
                    });
                });
                
                // Process seminars
                snapshots[2].forEach(doc => {
                    const data = doc.data();
                    allMaterials.push({
                        id: doc.id,
                        type: 'seminar',
                        title: data.title || 'Untitled',
                        details: data.speaker || 'No speaker',
                        createdAt: data.createdAt,
                        icon: 'fa-chalkboard-teacher'
                    });
                });
                
                // Sort by creation date
                allMaterials.sort((a, b) => {
                    const aTime = a.createdAt ? a.createdAt.toDate() : new Date(0);
                    const bTime = b.createdAt ? b.createdAt.toDate() : new Date(0);
                    return bTime - aTime;
                });
                
                // Take only the latest 6
                const latestMaterials = allMaterials.slice(0, 6);
                
                if (latestMaterials.length === 0) {
                    recentMaterials.innerHTML = `
                        <div class="empty-state">
                            <div class="empty-icon"><i class="fas fa-book"></i></div>
                            <p>No materials available</p>
                        </div>
                    `;
                    return;
                }
                
                const materialsHtml = latestMaterials.map(material => `
                    <div class="material-card">
                        <div class="material-icon">
                            <i class="fas ${material.icon}"></i>
                        </div>
                        <div class="material-title">${material.title}</div>
                        <div class="material-meta">
                            ${material.type.charAt(0).toUpperCase() + material.type.slice(1)} • 
                            ${formatTimestamp(material.createdAt)}
                        </div>
                    </div>
                `).join('');
                
                recentMaterials.innerHTML = materialsHtml;
            }).catch(error => {
                console.error('Error loading recent materials:', error);
                recentMaterials.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon"><i class="fas fa-exclamation-circle"></i></div>
                        <p>Failed to load materials</p>
                    </div>
                `;
            });
        }
        
        // Load badges
        function loadBadges() {
            const badgesContainer = document.getElementById('badges-container');
            
            // Sample badges data
            const sampleBadges = [
                { name: 'First Steps', description: 'Complete your first study session', icon: 'fa-star', earned: true },
                { name: 'Week Warrior', description: 'Study for 7 consecutive days', icon: 'fa-fire', earned: true },
                { name: 'Quiz Master', description: 'Score 90% or higher on 5 quizzes', icon: 'fa-trophy', earned: false },
                { name: 'Time Manager', description: 'Use time tracker for 30 sessions', icon: 'fa-clock', earned: false },
                { name: 'Social Learner', description: 'Join 3 study groups', icon: 'fa-users', earned: false },
                { name: 'Note Taker', description: 'Create 50 collaborative notes', icon: 'fa-edit', earned: false }
            ];
            
            const badgesHtml = sampleBadges.map(badge => `
                <div class="badge-item ${badge.earned ? 'badge-earned' : ''}">
                    <div class="badge-icon">
                        <i class="fas ${badge.icon}"></i>
                    </div>
                    <div class="badge-name">${badge.name}</div>
                    <div class="badge-desc">${badge.description}</div>
                </div>
            `).join('');
            
            badgesContainer.innerHTML = badgesHtml;
        }
        
        // Load activities
        function loadActivities() {
            const activityList = document.getElementById('activity-list');
            
            // Sample activities
            const sampleActivities = [
                { name: 'Mathematics', totalTime: 7200, weeklyTime: 3600 },
                { name: 'Physics', totalTime: 5400, weeklyTime: 2700 },
                { name: 'Chemistry', totalTime: 4800, weeklyTime: 2400 },
                { name: 'Computer Science', totalTime: 6000, weeklyTime: 3000 }
            ];
            
            const activitiesHtml = sampleActivities.map(activity => {
                const hours = Math.floor(activity.weeklyTime / 3600);
                const minutes = Math.floor((activity.weeklyTime % 3600) / 60);
                const progress = Math.min((activity.weeklyTime / (20 * 3600)) * 100, 100);
                
                return `
                    <div class="activity-item">
                        <div>
                            <div class="activity-name">${activity.name}</div>
                            <div class="activity-time">${hours}h ${minutes}m this week</div>
                            <div class="activity-progress">
                                <div class="activity-progress-bar" style="width: ${progress}%;"></div>
                            </div>
                        </div>
                        <button class="btn-secondary" style="padding: 8px 12px; font-size: 0.9rem;" onclick="selectActivity('${activity.name}')">
                            <i class="fas fa-play"></i>
                        </button>
                    </div>
                `;
            }).join('');
            
            activityList.innerHTML = activitiesHtml;
        }
        
        // Select activity for timer
        function selectActivity(name) {
            currentActivity = name;
            timerActivity.textContent = name;
            showToast(`Selected: ${name}`, 'info');
        }
        
        // Add new activity
        function addActivity() {
            const name = prompt('Enter activity name:');
            if (name && name.trim()) {
                showToast('Activity added successfully', 'success');
            }
        }
        
        // Load transactions
        function loadTransactions() {
            const transactionList = document.getElementById('transaction-list');
            const currencyAmount = document.getElementById('currency-amount');
            
            // Sample transactions
            const sampleTransactions = [
                { type: 'earn', amount: 50, description: 'Completed quiz', icon: 'fa-trophy', date: new Date() },
                { type: 'spend', amount: 20, description: 'Unlocked premium content', icon: 'fa-unlock', date: new Date(Date.now() - 86400000) },
                { type: 'earn', amount: 30, description: 'Study streak bonus', icon: 'fa-fire', date: new Date(Date.now() - 172800000) }
            ];
            
            currencyAmount.textContent = '150';
            
            const transactionsHtml = sampleTransactions.map(transaction => `
                <div class="transaction-item">
                    <div class="transaction-details">
                        <div class="transaction-icon ${transaction.type}">
                            <i class="fas ${transaction.icon}"></i>
                        </div>
                        <div class="transaction-info">
                            <div class="transaction-desc">${transaction.description}</div>
                            <div class="transaction-date">${transaction.date.toLocaleDateString()}</div>
                        </div>
                    </div>
                    <div class="transaction-amount ${transaction.type}">
                        ${transaction.type === 'earn' ? '+' : '-'}${transaction.amount}
                    </div>
                </div>
            `).join('');
            
            transactionList.innerHTML = transactionsHtml;
        }
        
        // Earn credits
        function earnCredits() {
            const amount = parseInt(prompt('Enter amount to earn:'));
            if (amount && amount > 0) {
                showToast(`Earned ${amount} credits successfully`, 'success');
                
                // Update display
                const currentCredits = parseInt(document.getElementById('currency-amount').textContent);
                document.getElementById('currency-amount').textContent = currentCredits + amount;
                creditsCount.textContent = currentCredits + amount;
            }
        }
        
        // Spend credits
        function spendCredits() {
            const amount = parseInt(prompt('Enter amount to spend:'));
            if (amount && amount > 0) {
                const currentCredits = parseInt(document.getElementById('currency-amount').textContent);
                if (currentCredits >= amount) {
                    showToast(`Spent ${amount} credits successfully`, 'success');
                    
                    // Update display
                    document.getElementById('currency-amount').textContent = currentCredits - amount;
                    creditsCount.textContent = currentCredits - amount;
                } else {
                    showToast('Insufficient credits', 'error');
                }
            }
        }
        
        // Load leaderboard
        function loadLeaderboard() {
            const leaderboardTbody = document.getElementById('leaderboard-tbody');
            const userRank = document.getElementById('rank-position');
            const userPoints = document.getElementById('rank-points');
            const userPercentile = document.getElementById('rank-percentile');
            const userMedal = document.getElementById('rank-medal');
            
            // Sample leaderboard data
            const sampleUsers = [
                { name: 'Alice Johnson', points: 2450 },
                { name: 'Bob Smith', points: 2380 },
                { name: 'Charlie Brown', points: 2290 },
                { name: 'Diana Prince', points: 2150 },
                { name: 'You', points: 2100 },
                { name: 'Frank Miller', points: 2050 },
                { name: 'Grace Lee', points: 1980 },
                { name: 'Henry Ford', points: 1920 }
            ];
            
            // Update user rank display
            const currentUserRank = 5;
            userRank.textContent = `#${currentUserRank}`;
            userPoints.textContent = `2100 Points`;
            userPercentile.textContent = `Top 63%`;
            
            // Update medal
            userMedal.className = 'rank-medal';
            userMedal.innerHTML = '<i class="fas fa-award"></i>';
            
            // Generate leaderboard table
            const leaderboardHtml = sampleUsers.map((user, index) => `
                <tr class="${user.name === 'You' ? 'current-user' : ''}">
                    <td class="leaderboard-rank-col">#${index + 1}</td>
                    <td class="leaderboard-name-col">${user.name}</td>
                    <td class="leaderboard-score-col">${user.points}</td>
                </tr>
            `).join('');
            
            leaderboardTbody.innerHTML = leaderboardHtml;
        }
        
        // Load goals
        function loadGoals() {
            const goalsList = document.getElementById('goals-list');
            
            if (goals.length === 0) {
                goalsList.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon"><i class="fas fa-bullseye"></i></div>
                        <p>No goals yet</p>
                    </div>
                `;
                return;
            }
            
            const goalsHtml = goals.map(goal => `
                <div class="goal-item">
                    <div class="goal-header">
                        <div class="goal-title">${goal.title}</div>
                        <div class="goal-status ${goal.status}">${goal.status.replace('-', ' ')}</div>
                    </div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 10px;">
                        Due: ${goal.deadline}
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${goal.progress}%;"></div>
                    </div>
                    <div style="text-align: center; margin-top: 5px; font-size: 0.8rem; color: var(--text-muted);">
                        ${goal.progress}% Complete
                    </div>
                </div>
            `).join('');
            
            goalsList.innerHTML = goalsHtml;
        }
        
        // Load study rooms
        function loadStudyRooms() {
            const studyRoomsContainer = document.getElementById('study-rooms-container');
            
            if (studyRooms.length === 0) {
                studyRoomsContainer.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon"><i class="fas fa-door-open"></i></div>
                        <p>No study rooms available</p>
                    </div>
                `;
                return;
            }
            
            const roomsHtml = studyRooms.map(room => `
                <div class="study-room">
                    <div class="room-header">
                        <div class="room-name">${room.name}</div>
                        <div class="room-status ${room.status}">${room.status}</div>
                    </div>
                    <div class="room-subject">${room.subject}</div>
                    <div class="room-description">
                        ${room.description}
                    </div>
                    <div class="room-participants">
                        ${Array.from({ length: Math.min(room.participants, 3) }, (_, i) => 
                            `<div class="participant-avatar">${String.fromCharCode(65 + i)}</div>`
                        ).join('')}
                        ${room.participants > 3 ? `<span style="color: var(--text-muted); font-size: 0.8rem;">+${room.participants - 3} more</span>` : ''}
                    </div>
                    <button class="join-room-btn">
                        <i class="fas fa-sign-in-alt"></i> Join Room
                    </button>
                </div>
            `).join('');
            
            studyRoomsContainer.innerHTML = roomsHtml;
        }
        
        // Resume Builder Functions
        function savePersonalInfo() {
            showToast('Personal information saved', 'success');
        }
        
        function saveEducation() {
            showToast('Education saved', 'success');
        }
        
        function saveExperience() {
            showToast('Experience saved', 'success');
        }
        
        function saveSkills() {
            showToast('Skills saved', 'success');
        }
        
        function saveProject() {
            showToast('Project saved', 'success');
        }
        
        function saveAchievements() {
            showToast('Achievements saved', 'success');
        }
        
        function downloadResume() {
            // Create a temporary iframe to trigger download
            const iframe = document.createElement('iframe');
            iframe.style.display = 'none';
            document.body.appendChild(iframe);
            
            // Generate resume content
            const resumeContent = generateResumeContent();
            
            // Create a blob with the resume content
            const blob = new Blob([resumeContent], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            
            // Set iframe source to the blob URL
            iframe.src = url;
            
            // Trigger download
            iframe.onload = function() {
                iframe.contentWindow.print();
                setTimeout(() => {
                    document.body.removeChild(iframe);
                    URL.revokeObjectURL(url);
                }, 100);
            };
            
            showToast('Resume downloaded successfully', 'success');
        }
        
        function generateResumeContent() {
            // Generate HTML content for the resume based on form data
            // This is a simplified version
            return `
                <!DOCTYPE html>
                <html>
                <head>
                    <title>Resume</title>
                    <style>
                        body { font-family: Arial, sans-serif; line-height: 1.6; margin: 40px; }
                        h1 { color: #333; }
                        .section { margin-bottom: 30px; }
                        .section-title { font-size: 18px; font-weight: bold; color: #444; margin-bottom: 10px; }
                        .item { margin-bottom: 15px; }
                        .item-title { font-weight: bold; }
                        .item-date { color: #666; font-style: italic; }
                    </style>
                </head>
                <body>
                    <h1>${document.getElementById('resume-name').value || 'Your Name'}</h1>
                    
                    <div class="section">
                        <div class="section-title">Contact Information</div>
                        <div class="item">
                            <div class="item-title">Email: ${document.getElementById('resume-email').value || 'your.email@example.com'}</div>
                            <div class="item-title">Phone: ${document.getElementById('resume-phone').value || 'Your Phone Number'}</div>
                        </div>
                    </div>
                    
                    <div class="section">
                        <div class="section-title">Professional Summary</div>
                        <div class="item">
                            ${document.getElementById('resume-summary').value || 'Your professional summary goes here.'}
                        </div>
                    </div>
                    
                    <div class="section">
                        <div class="section-title">Education</div>
                        <div class="item">
                            <div class="item-title">${document.getElementById('resume-degree').value || 'Your Degree'}</div>
                            <div class="item-date">${document.getElementById('resume-institution').value || 'Your Institution'}</div>
                            <div class="item-date">Graduated: ${document.getElementById('resume-graduation').value || 'Year'}</div>
                            <div class="item-date">GPA: ${document.getElementById('resume-gpa').value || 'Your GPA'}</div>
                        </div>
                    </div>
                    
                    <div class="section">
                        <div class="section-title">Skills</div>
                        <div class="item">
                            <div class="item-title">Programming Languages: ${document.getElementById('resume-languages').value || 'List your programming languages'}</div>
                            <div class="item-title">Web Technologies: ${document.getElementById('resume-web-tech').value || 'List your web technologies'}</div>
                            <div class="item-title">Database: ${document.getElementById('resume-database').value || 'List your database skills'}</div>
                            <div class="item-title">Tools & Software: ${document.getElementById('resume-tools').value || 'List your tools and software'}</div>
                        </div>
                    </div>
                </body>
                </html>
            `;
        }
        
        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            // Escape key closes modals
            if (e.key === 'Escape') {
                document.querySelectorAll('.modal-overlay.active').forEach(modal => {
                    modal.classList.remove('active');
                });
                chatbotModal.classList.remove('active');
            }
            
            // Ctrl/Cmd + K for quick search
            if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
                e.preventDefault();
                showToast('Quick search feature coming soon!', 'info');
            }
            
            // Ctrl/Cmd + H for chatbot
            if ((e.ctrlKey || e.metaKey) && e.key === 'h') {
                e.preventDefault();
                chatbotBtn.click();
            }
            
            // Tab navigation with numbers
            if (e.ctrlKey && e.key >= '1' && e.key <= '9') {
                e.preventDefault();
                const tabIndex = parseInt(e.key) - 1;
                const tabs = document.querySelectorAll('.feature-tab');
                if (tabs[tabIndex]) {
                    tabs[tabIndex].click();
                }
            }
        });
        
        // Initialize draggable functionality for mind map
        function initializeMindMap() {
            const centerNode = document.querySelector('.mindmap-node[data-id="1"]');
            if (centerNode) {
                makeDraggable(centerNode);
            }
        }
        
        // Notification system
        function checkNotifications() {
            // Check for overdue tasks
            const overdueTasks = tasks.filter(task => {
                if (task.completed) return false;
                const dueDate = new Date(task.dueDate);
                return dueDate < new Date();
            });
            
            if (overdueTasks.length > 0) {
                setTimeout(() => {
                    showToast(`You have ${overdueTasks.length} overdue task(s)`, 'error');
                }, 2000);
            }
            
            // Check study streak
            const lastStudyDate = localStorage.getItem('lastStudyDate');
            const today = new Date().toDateString();
            
            if (lastStudyDate && lastStudyDate !== today) {
                const daysSinceStudy = Math.floor((new Date() - new Date(lastStudyDate)) / (1000 * 60 * 60 * 24));
                if (daysSinceStudy > 1) {
                    setTimeout(() => {
                        showToast('Your study streak is at risk! Start a session to maintain it.', 'warning');
                    }, 5000);
                }
            }
        }
        
        // Auto-save functionality
        function setupAutoSave() {
            // Auto-save notes
            const noteEditor = document.getElementById('note-editor');
            if (noteEditor) {
                let autoSaveTimeout;
                noteEditor.addEventListener('input', () => {
                    clearTimeout(autoSaveTimeout);
                    autoSaveTimeout = setTimeout(() => {
                        console.log('Auto-saving note...');
                        // In real implementation, save to Firebase
                    }, 2000);
                });
            }
            
            // Auto-save resume forms
            document.querySelectorAll('.form-input, .form-textarea').forEach(input => {
                let autoSaveTimeout;
                input.addEventListener('input', () => {
                    clearTimeout(autoSaveTimeout);
                    autoSaveTimeout = setTimeout(() => {
                        console.log('Auto-saving form data...');
                        // In real implementation, save to Firebase
                    }, 3000);
                });
            });
        }
        
        // Simulate user activity for demo
        function simulateActivity() {
            // Simulate some study hours
            totalStudyHours = Math.random() * 15 + 5;
            hoursCount.textContent = Math.round(totalStudyHours);
            
            // Update analytics
            setTimeout(() => {
                updateAnalytics();
            }, 1000);
        }
        
        // Authentication check
        auth.onAuthStateChanged(user => {
            if (user) {
                currentUser = user;
                
                // Get user data
                db.collection('users').doc(user.uid).get().then(doc => {
                    if (doc.exists) {
                        userData = doc.data();
                        studentNameEl.textContent = userData.name || 'Student';
                    } else {
                        studentNameEl.textContent = 'Student';
                    }
                    
                    // Initialize page
                    initializePage();
                    initializeMindMap();
                    setupAutoSave();
                    simulateActivity();
                    
                    // Check notifications after a delay
                    setTimeout(() => {
                        checkNotifications();
                    }, 3000);
                    
                }).catch(error => {
                    console.error('Error getting user data:', error);
                    studentNameEl.textContent = 'Student';
                    initializePage();
                    initializeMindMap();
                    setupAutoSave();
                    simulateActivity();
                });
            } else {
                // For demo purposes, initialize anyway
                currentUser = { uid: 'demo-user' };
                studentNameEl.textContent = 'Demo Student';
                initializePage();
                initializeMindMap();
                setupAutoSave();
                simulateActivity();
            }
        });
        
        // Console welcome message
        console.log('%cIB STUDIOZ Enhanced Student Dashboard', 'color: #FFD700; font-size: 24px; font-weight: bold;');
        console.log('%cNew Features: Study Planner, Task Manager, Analytics, Social Learning, Study Goals, Quiz Maker, Mind Maps, Collaborative Notes, Study Rooms, Performance Insights', 'color: #00A2FF; font-size: 14px;');
        console.log('Enhanced functionality with real-time updates ✓');
        
        // Initialize everything on page load
        document.addEventListener('DOMContentLoaded', () => {
            // Set default date for date inputs
            const today = new Date().toISOString().split('T')[0];
            document.querySelectorAll('input[type="date"]').forEach(input => {
                if (!input.value) {
                    input.min = today;
                }
            });
            
            // Initialize sample data if not authenticated
            if (!currentUser) {
                initializePage();
                initializeMindMap();
                setupAutoSave();
                simulateActivity();
            }
            
            // Add welcome message for new users
            if (!localStorage.getItem('welcomeShown')) {
                setTimeout(() => {
                    showToast('Welcome to IB STUDIOZ! Press Ctrl+H for help anytime.', 'info');
                    localStorage.setItem('welcomeShown', 'true');
                }, 2000);
            }
        });
    </script>
</body>
</html>
